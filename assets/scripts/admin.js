$(document).ready(function(){Modernizr.load([{test:window.JSON,nope:"assets/scripts/libs/json2.min.js"}])});!function(e){var d='[data-dismiss="alert"]',f=function(a){e(a).on("click",d,this.close)};f.prototype={constructor:f,close:function(a){function g(){h.trigger("closed").remove()}var j=e(this),i=j.attr("data-target"),h;i||(i=j.attr("href"),i=i&&i.replace(/.*(?=#[^\s]*$)/,"")),h=e(i),h.trigger("close"),a&&a.preventDefault(),h.length||(h=j.hasClass("alert")?j:j.parent()),h.trigger("close").removeClass("in"),e.support.transition&&h.hasClass("fade")?h.on(e.support.transition.end,g):g()}},e.fn.alert=function(a){return this.each(function(){var c=e(this),b=c.data("alert");b||c.data("alert",b=new f(this)),typeof a=="string"&&b[a].call(c)})},e.fn.alert.Constructor=f,e(function(){e("body").on("click.alert.data-api",d,f.prototype.close)})}(window.jQuery);!function(d){var c=function(a,e){this.$element=d(a),this.options=d.extend({},d.fn.button.defaults,e)};c.prototype={constructor:c,setState:function(g){var f="disabled",j=this.$element,i=j.data(),h=j.is("input")?"val":"html";g+="Text",i.resetText||j.data("resetText",j[h]()),j[h](i[g]||this.options[g]),setTimeout(function(){g=="loadingText"?j.addClass(f).attr(f,f):j.removeClass(f).removeAttr(f)},0)},toggle:function(){var b=this.$element.parent('[data-toggle="buttons-radio"]');b&&b.find(".active").removeClass("active"),this.$element.toggleClass("active")}},d.fn.button=function(a){return this.each(function(){var h=d(this),g=h.data("button"),b=typeof a=="object"&&a;g||h.data("button",g=new c(this,b)),a=="toggle"?g.toggle():a&&g.setState(a)})},d.fn.button.defaults={loadingText:"loading..."},d.fn.button.Constructor=c,d(function(){d("body").on("click.button.data-api","[data-toggle^=button]",function(a){var e=d(a.target);e.hasClass("btn")||(e=e.closest(".btn")),e.button("toggle")})})}(window.jQuery);!function(d){var c=function(a,e){this.$element=d(a),this.options=d.extend({},d.fn.carousel.defaults,e),this.options.slide&&this.slide(this.options.slide),this.options.pause=="hover"&&this.$element.on("mouseenter",d.proxy(this.pause,this)).on("mouseleave",d.proxy(this.cycle,this))};c.prototype={cycle:function(){return this.interval=setInterval(d.proxy(this.next,this),this.options.interval),this},to:function(a){var j=this.$element.find(".active"),i=j.parent().children(),h=i.index(j),g=this;if(a>i.length-1||a<0){return}return this.sliding?this.$element.one("slid",function(){g.to(a)}):h==a?this.pause().cycle():this.slide(a>h?"next":"prev",d(i[a]))},pause:function(){return clearInterval(this.interval),this.interval=null,this},next:function(){if(this.sliding){return}return this.slide("next")},prev:function(){if(this.sliding){return}return this.slide("prev")},slide:function(a,p){var o=this.$element.find(".active"),n=p||o[a](),m=this.interval,l=a=="next"?"left":"right",k=a=="next"?"first":"last",j=this;this.sliding=!0,m&&this.pause(),n=n.length?n:this.$element.find(".item")[k]();if(n.hasClass("active")){return}return !d.support.transition&&this.$element.hasClass("slide")?(this.$element.trigger("slide"),o.removeClass("active"),n.addClass("active"),this.sliding=!1,this.$element.trigger("slid")):(n.addClass(a),n[0].offsetWidth,o.addClass(l),n.addClass(l),this.$element.trigger("slide"),this.$element.one(d.support.transition.end,function(){n.removeClass([a,l].join(" ")).addClass("active"),o.removeClass(["active",l].join(" ")),j.sliding=!1,setTimeout(function(){j.$element.trigger("slid")},0)})),m&&this.cycle(),this}},d.fn.carousel=function(a){return this.each(function(){var h=d(this),g=h.data("carousel"),b=typeof a=="object"&&a;g||h.data("carousel",g=new c(this,b)),typeof a=="number"?g.to(a):typeof a=="string"||(a=b.slide)?g[a]():g.cycle()})},d.fn.carousel.defaults={interval:5000,pause:"hover"},d.fn.carousel.Constructor=c,d(function(){d("body").on("click.carousel.data-api","[data-slide]",function(a){var j=d(this),i,h=d(j.attr("data-target")||(i=j.attr("href"))&&i.replace(/.*(?=#[^\s]+$)/,"")),g=!h.data("modal")&&d.extend({},h.data(),j.data());h.carousel(g),a.preventDefault()})})}(window.jQuery);!function(d){var c=function(a,e){this.$element=d(a),this.options=d.extend({},d.fn.collapse.defaults,e),this.options.parent&&(this.$parent=d(this.options.parent)),this.options.toggle&&this.toggle()};c.prototype={constructor:c,dimension:function(){var b=this.$element.hasClass("width");return b?"width":"height"},show:function(){var a=this.dimension(),h=d.camelCase(["scroll",a].join("-")),g=this.$parent&&this.$parent.find(".in"),f;g&&g.length&&(f=g.data("collapse"),g.collapse("hide"),f||g.data("collapse",null)),this.$element[a](0),this.transition("addClass","show","shown"),this.$element[a](this.$element[0][h])},hide:function(){var b=this.dimension();this.reset(this.$element[b]()),this.transition("removeClass","hide","hidden"),this.$element[b](0)},reset:function(f){var e=this.dimension();return this.$element.removeClass("collapse")[e](f||"auto")[0].offsetWidth,this.$element[f?"addClass":"removeClass"]("collapse"),this},transition:function(a,j,i){var h=this,g=function(){j=="show"&&h.reset(),h.$element.trigger(i)};this.$element.trigger(j)[a]("in"),d.support.transition&&this.$element.hasClass("collapse")?this.$element.one(d.support.transition.end,g):g()},toggle:function(){this[this.$element.hasClass("in")?"hide":"show"]()}},d.fn.collapse=function(a){return this.each(function(){var h=d(this),g=h.data("collapse"),b=typeof a=="object"&&a;g||h.data("collapse",g=new c(this,b)),typeof a=="string"&&g[a]()})},d.fn.collapse.defaults={toggle:!0},d.fn.collapse.Constructor=c,d(function(){d("body").on("click.collapse.data-api","[data-toggle=collapse]",function(a){var j=d(this),i,h=j.attr("data-target")||a.preventDefault()||(i=j.attr("href"))&&i.replace(/.*(?=#[^\s]+$)/,""),g=d(h).data("collapse")?"toggle":j.data();d(h).collapse(g)})})}(window.jQuery);!function(f){function g(){f(e).parent().removeClass("open")}"use strict";var e='[data-toggle="dropdown"]',h=function(a){var d=f(a).on("click.dropdown.data-api",this.toggle);f("html").on("click.dropdown.data-api",function(){d.parent().removeClass("open")})};h.prototype={constructor:h,toggle:function(a){var k=f(this),j=k.attr("data-target"),i,d;return j||(j=k.attr("href"),j=j&&j.replace(/.*(?=#[^\s]*$)/,"")),i=f(j),i.length||(i=k.parent()),d=i.hasClass("open"),g(),!d&&i.toggleClass("open"),!1}},f.fn.dropdown=function(a){return this.each(function(){var c=f(this),b=c.data("dropdown");b||c.data("dropdown",b=new h(this)),typeof a=="string"&&b[a].call(c)})},f.fn.dropdown.Constructor=h,f(function(){f("html").on("click.dropdown.data-api",g),f("body").on("click.dropdown.data-api",e,h.prototype.toggle)})}(window.jQuery);!function(i){function n(){var a=this,d=setTimeout(function(){a.$element.off(i.support.transition.end),m.call(a)},500);this.$element.one(i.support.transition.end,function(){clearTimeout(d),m.call(a)})}function m(b){this.$element.hide().trigger("hidden"),l.call(this)}function l(a){var o=this,g=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var f=i.support.transition&&g;this.$backdrop=i('<div class="modal-backdrop '+g+'" />').appendTo(document.body),this.options.backdrop!="static"&&this.$backdrop.click(i.proxy(this.hide,this)),f&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),f?this.$backdrop.one(i.support.transition.end,a):a()}else{!this.isShown&&this.$backdrop?(this.$backdrop.removeClass("in"),i.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one(i.support.transition.end,i.proxy(k,this)):k.call(this)):a&&a()}}function k(){this.$backdrop.remove(),this.$backdrop=null}function j(){var a=this;this.isShown&&this.options.keyboard?i(document).on("keyup.dismiss.modal",function(b){b.which==27&&a.hide()}):this.isShown||i(document).off("keyup.dismiss.modal")}"use strict";var h=function(a,d){this.options=d,this.$element=i(a).delegate('[data-dismiss="modal"]',"click.dismiss.modal",i.proxy(this.hide,this))};h.prototype={constructor:h,toggle:function(){return this[this.isShown?"hide":"show"]()},show:function(){var a=this;if(this.isShown){return}i("body").addClass("modal-open"),this.isShown=!0,this.$element.trigger("show"),j.call(this),l.call(this,function(){var b=i.support.transition&&a.$element.hasClass("fade");!a.$element.parent().length&&a.$element.appendTo(document.body),a.$element.show(),b&&a.$element[0].offsetWidth,a.$element.addClass("in"),b?a.$element.one(i.support.transition.end,function(){a.$element.trigger("shown")}):a.$element.trigger("shown")})},hide:function(a){a&&a.preventDefault();if(!this.isShown){return}var c=this;this.isShown=!1,i("body").removeClass("modal-open"),j.call(this),this.$element.trigger("hide").removeClass("in"),i.support.transition&&this.$element.hasClass("fade")?n.call(this):m.call(this)}},i.fn.modal=function(a){return this.each(function(){var g=i(this),c=g.data("modal"),b=i.extend({},i.fn.modal.defaults,g.data(),typeof a=="object"&&a);c||g.data("modal",c=new h(this,b)),typeof a=="string"?c[a]():b.show&&c.show()})},i.fn.modal.defaults={backdrop:!0,keyboard:!0,show:!0},i.fn.modal.Constructor=h,i(function(){i("body").on("click.modal.data-api",'[data-toggle="modal"]',function(a){var q=i(this),p,o=i(q.attr("data-target")||(p=q.attr("href"))&&p.replace(/.*(?=#[^\s]+$)/,"")),g=o.data("modal")?"toggle":i.extend({},o.data(),q.data());a.preventDefault(),o.modal(g)})})}(window.jQuery);!function(d){var c=function(f,e){this.init("tooltip",f,e)};c.prototype={constructor:c,init:function(a,j,i){var h,g;this.type=a,this.$element=d(j),this.options=this.getOptions(i),this.enabled=!0,this.options.trigger!="manual"&&(h=this.options.trigger=="hover"?"mouseenter":"focus",g=this.options.trigger=="hover"?"mouseleave":"blur",this.$element.on(h,this.options.selector,d.proxy(this.enter,this)),this.$element.on(g,this.options.selector,d.proxy(this.leave,this))),this.options.selector?this._options=d.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},getOptions:function(a){return a=d.extend({},d.fn[this.type].defaults,a,this.$element.data()),a.delay&&typeof a.delay=="number"&&(a.delay={show:a.delay,hide:a.delay}),a},enter:function(a){var e=d(a.currentTarget)[this.type](this._options).data(this.type);!e.options.delay||!e.options.delay.show?e.show():(e.hoverState="in",setTimeout(function(){e.hoverState=="in"&&e.show()},e.options.delay.show))},leave:function(a){var e=d(a.currentTarget)[this.type](this._options).data(this.type);!e.options.delay||!e.options.delay.hide?e.hide():(e.hoverState="out",setTimeout(function(){e.hoverState=="out"&&e.hide()},e.options.delay.hide))},show:function(){var i,h,n,m,l,k,j;if(this.hasContent()&&this.enabled){i=this.tip(),this.setContent(),this.options.animation&&i.addClass("fade"),k=typeof this.options.placement=="function"?this.options.placement.call(this,i[0],this.$element[0]):this.options.placement,h=/in/.test(k),i.remove().css({top:0,left:0,display:"block"}).appendTo(h?this.$element:document.body),n=this.getPosition(h),m=i[0].offsetWidth,l=i[0].offsetHeight;switch(h?k.split(" ")[1]:k){case"bottom":j={top:n.top+n.height,left:n.left+n.width/2-m/2};break;case"top":j={top:n.top-l,left:n.left+n.width/2-m/2};break;case"left":j={top:n.top+n.height/2-l/2,left:n.left-m};break;case"right":j={top:n.top+n.height/2-l/2,left:n.left+n.width}}i.css(j).addClass(k).addClass("in")}},setContent:function(){var b=this.tip();b.find(".tooltip-inner").html(this.getTitle()),b.removeClass("fade in top bottom left right")},hide:function(){function e(){var g=setTimeout(function(){f.off(d.support.transition.end).remove()},500);f.one(d.support.transition.end,function(){clearTimeout(g),f.remove()})}var a=this,f=this.tip();f.removeClass("in"),d.support.transition&&this.$tip.hasClass("fade")?e():f.remove()},fixTitle:function(){var b=this.$element;(b.attr("title")||typeof b.attr("data-original-title")!="string")&&b.attr("data-original-title",b.attr("title")||"").removeAttr("title")},hasContent:function(){return this.getTitle()},getPosition:function(a){return d.extend({},a?{top:0,left:0}:this.$element.offset(),{width:this.$element[0].offsetWidth,height:this.$element[0].offsetHeight})},getTitle:function(){var f,e=this.$element,g=this.options;return f=e.attr("data-original-title")||(typeof g.title=="function"?g.title.call(e[0]):g.title),f=(f||"").toString().replace(/(^\s*|\s*$)/,""),f},tip:function(){return this.$tip=this.$tip||d(this.options.template)},validate:function(){this.$element[0].parentNode||(this.hide(),this.$element=null,this.options=null)},enable:function(){this.enabled=!0},disable:function(){this.enabled=!1},toggleEnabled:function(){this.enabled=!this.enabled},toggle:function(){this[this.tip().hasClass("in")?"hide":"show"]()}},d.fn.tooltip=function(a){return this.each(function(){var h=d(this),g=h.data("tooltip"),b=typeof a=="object"&&a;g||h.data("tooltip",g=new c(this,b)),typeof a=="string"&&g[a]()})},d.fn.tooltip.Constructor=c,d.fn.tooltip.defaults={animation:!0,delay:0,selector:!1,placement:"top",trigger:"hover",title:"",template:'<div class="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>'}}(window.jQuery);!function(d){var c=function(f,e){this.init("popover",f,e)};c.prototype=d.extend({},d.fn.tooltip.Constructor.prototype,{constructor:c,setContent:function(){var a=this.tip(),f=this.getTitle(),e=this.getContent();a.find(".popover-title")[d.type(f)=="object"?"append":"html"](f),a.find(".popover-content > *")[d.type(e)=="object"?"append":"html"](e),a.removeClass("fade top bottom left right in")},hasContent:function(){return this.getTitle()||this.getContent()},getContent:function(){var f,e=this.$element,g=this.options;return f=e.attr("data-content")||(typeof g.content=="function"?g.content.call(e[0]):g.content),f=f.toString().replace(/(^\s*|\s*$)/,""),f},tip:function(){return this.$tip||(this.$tip=d(this.options.template)),this.$tip}}),d.fn.popover=function(a){return this.each(function(){var h=d(this),g=h.data("popover"),b=typeof a=="object"&&a;g||h.data("popover",g=new c(this,b)),typeof a=="string"&&g[a]()})},d.fn.popover.Constructor=c,d.fn.popover.defaults=d.extend({},d.fn.tooltip.defaults,{placement:"right",content:"",template:'<div class="popover"><div class="arrow"></div><div class="popover-inner"><h3 class="popover-title"></h3><div class="popover-content"><p></p></div></div></div>'})}(window.jQuery);!function(d){function c(a,j){var i=d.proxy(this.process,this),h=d(a).is("body")?d(window):d(a),g;this.options=d.extend({},d.fn.scrollspy.defaults,j),this.$scrollElement=h.on("scroll.scroll.data-api",i),this.selector=(this.options.target||(g=d(a).attr("href"))&&g.replace(/.*(?=#[^\s]+$)/,"")||"")+" .nav li > a",this.$body=d("body").on("click.scroll.data-api",this.selector,i),this.refresh(),this.process()}"use strict",c.prototype={constructor:c,refresh:function(){this.targets=this.$body.find(this.selector).map(function(){var a=d(this).attr("href");return/^#\w/.test(a)&&d(a).length?a:null}),this.offsets=d.map(this.targets,function(a){return d(a).position().top})},process:function(){var g=this.$scrollElement.scrollTop()+this.options.offset,f=this.offsets,j=this.targets,i=this.activeTarget,h;for(h=f.length;h--;){i!=j[h]&&g>=f[h]&&(!f[h+1]||g<=f[h+1])&&this.activate(j[h])}},activate:function(f){var e;this.activeTarget=f,this.$body.find(this.selector).parent(".active").removeClass("active"),e=this.$body.find(this.selector+'[href="'+f+'"]').parent("li").addClass("active"),e.parent(".dropdown-menu")&&e.closest("li.dropdown").addClass("active")}},d.fn.scrollspy=function(a){return this.each(function(){var h=d(this),g=h.data("scrollspy"),b=typeof a=="object"&&a;g||h.data("scrollspy",g=new c(this,b)),typeof a=="string"&&g[a]()})},d.fn.scrollspy.Constructor=c,d.fn.scrollspy.defaults={offset:10},d(function(){d('[data-spy="scroll"]').each(function(){var a=d(this);a.scrollspy(a.data())})})}(window.jQuery);!function(d){var c=function(a){this.element=d(a)};c.prototype={constructor:c,show:function(){var a=this.element,j=a.closest("ul:not(.dropdown-menu)"),i=a.attr("data-target"),h,g;i||(i=a.attr("href"),i=i&&i.replace(/.*(?=#[^\s]*$)/,""));if(a.parent("li").hasClass("active")){return}h=j.find(".active a").last()[0],a.trigger({type:"show",relatedTarget:h}),g=d(i),this.activate(a.parent("li"),j),this.activate(g,g.parent(),function(){a.trigger({type:"shown",relatedTarget:h})})},activate:function(a,l,k){function h(){j.removeClass("active").find("> .dropdown-menu > .active").removeClass("active"),a.addClass("active"),i?(a[0].offsetWidth,a.addClass("in")):a.removeClass("fade"),a.parent(".dropdown-menu")&&a.closest("li.dropdown").addClass("active"),k&&k()}var j=l.find("> .active"),i=k&&d.support.transition&&j.hasClass("fade");i?j.one(d.support.transition.end,h):h(),j.removeClass("in")}},d.fn.tab=function(a){return this.each(function(){var f=d(this),b=f.data("tab");b||f.data("tab",b=new c(this)),typeof a=="string"&&b[a]()})},d.fn.tab.Constructor=c,d(function(){d("body").on("click.tab.data-api",'[data-toggle="tab"], [data-toggle="pill"]',function(a){a.preventDefault(),d(this).tab("show")})})}(window.jQuery);!function(b){b(function(){"use strict",b.support.transition=function(){var a=document.body||document.documentElement,f=a.style,e=f.transition!==undefined||f.WebkitTransition!==undefined||f.MozTransition!==undefined||f.MsTransition!==undefined||f.OTransition!==undefined;return e&&{end:function(){var c="TransitionEnd";return b.browser.webkit?c="webkitTransitionEnd":b.browser.mozilla?c="transitionend":b.browser.opera&&(c="oTransitionEnd"),c}()}}()})}(window.jQuery);!function(d){var c=function(a,e){this.$element=d(a),this.options=d.extend({},d.fn.typeahead.defaults,e),this.matcher=this.options.matcher||this.matcher,this.sorter=this.options.sorter||this.sorter,this.highlighter=this.options.highlighter||this.highlighter,this.$menu=d(this.options.menu).appendTo("body"),this.source=this.options.source,this.shown=!1,this.listen()};c.prototype={constructor:c,select:function(){var b=this.$menu.find(".active").attr("data-value");return this.$element.val(b),this.$element.change(),this.hide()},show:function(){var a=d.extend({},this.$element.offset(),{height:this.$element[0].offsetHeight});return this.$menu.css({top:a.top+a.height,left:a.left}),this.$menu.show(),this.shown=!0,this},hide:function(){return this.$menu.hide(),this.shown=!1,this},lookup:function(a){var h=this,g,f;return this.query=this.$element.val(),this.query?(g=d.grep(this.source,function(b){if(h.matcher(b)){return b}}),g=this.sorter(g),g.length?this.render(g.slice(0,this.options.items)).show():this.shown?this.hide():this):this.shown?this.hide():this},matcher:function(b){return ~b.toLowerCase().indexOf(this.query.toLowerCase())},sorter:function(g){var f=[],j=[],i=[],h;while(h=g.shift()){h.toLowerCase().indexOf(this.query.toLowerCase())?~h.indexOf(this.query)?j.push(h):i.push(h):f.push(h)}return f.concat(j,i)},highlighter:function(b){return b.replace(new RegExp("("+this.query+")","ig"),function(f,e){return"<strong>"+e+"</strong>"})},render:function(a){var e=this;return a=d(a).map(function(f,g){return f=d(e.options.item).attr("data-value",g),f.find("a").html(e.highlighter(g)),f[0]}),a.first().addClass("active"),this.$menu.html(a),this},next:function(a){var f=this.$menu.find(".active").removeClass("active"),e=f.next();e.length||(e=d(this.$menu.find("li")[0])),e.addClass("active")},prev:function(f){var e=this.$menu.find(".active").removeClass("active"),g=e.prev();g.length||(g=this.$menu.find("li").last()),g.addClass("active")},listen:function(){this.$element.on("blur",d.proxy(this.blur,this)).on("keypress",d.proxy(this.keypress,this)).on("keyup",d.proxy(this.keyup,this)),(d.browser.webkit||d.browser.msie)&&this.$element.on("keydown",d.proxy(this.keypress,this)),this.$menu.on("click",d.proxy(this.click,this)).on("mouseenter","li",d.proxy(this.mouseenter,this))},keyup:function(b){switch(b.keyCode){case 40:case 38:break;case 9:case 13:if(!this.shown){return}this.select();break;case 27:if(!this.shown){return}this.hide();break;default:this.lookup()}b.stopPropagation(),b.preventDefault()},keypress:function(b){if(!this.shown){return}switch(b.keyCode){case 9:case 13:case 27:b.preventDefault();break;case 38:b.preventDefault(),this.prev();break;case 40:b.preventDefault(),this.next()}b.stopPropagation()},blur:function(f){var e=this;setTimeout(function(){e.hide()},150)},click:function(b){b.stopPropagation(),b.preventDefault(),this.select()},mouseenter:function(a){this.$menu.find(".active").removeClass("active"),d(a.currentTarget).addClass("active")}},d.fn.typeahead=function(a){return this.each(function(){var h=d(this),g=h.data("typeahead"),b=typeof a=="object"&&a;g||h.data("typeahead",g=new c(this,b)),typeof a=="string"&&g[a]()})},d.fn.typeahead.defaults={source:[],items:8,menu:'<ul class="typeahead dropdown-menu"></ul>',item:'<li><a href="#"></a></li>'},d.fn.typeahead.Constructor=c,d(function(){d("body").on("focus.typeahead.data-api",'[data-provide="typeahead"]',function(a){var e=d(this);if(e.data("typeahead")){return}a.preventDefault(),e.typeahead(e.data())})})}(window.jQuery);
/*!
 * jNotify jQuery Plug-in
 *
 * Copyright 2010 Giva, Inc. (http://www.givainc.com/labs/) 
 * 
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 * 
 * 	http://www.apache.org/licenses/LICENSE-2.0
 * 
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * Date: 2010-09-30
 * Rev:  1.1.00
 */
(function(b){b.jnotify=function(k,n,l){return new c(k,n,l)};b.jnotify.version="1.1.00";var j,d=[],e=0,h=false,i=false,g,f,a={type:"",delay:2000,sticky:false,closeLabel:"&times;",showClose:true,fadeSpeed:1000,slideSpeed:250,classContainer:"jnotify-container",classNotification:"jnotify-notification",classBackground:"jnotify-background",classClose:"jnotify-close",classMessage:"jnotify-message",init:null,create:null,beforeRemove:null,remove:null,transition:null};b.jnotify.setup=function(k){a=b.extend({},a,k)};b.jnotify.play=function(m,n){if(h&&(m!==true)||(d.length==0)){return}h=true;var l=d.shift();f=l;var k=(arguments.length>=2)?parseInt(n,10):l.options.delay;g=setTimeout(function(){g=0;l.remove(function(){if(d.length==0){h=false}else{if(!i){b.jnotify.play(true)}}})},k)};b.jnotify.pause=function(){clearTimeout(g);if(g){d.unshift(f)}i=h=true};b.jnotify.resume=function(){i=false;b.jnotify.play(true,0)};function c(p,n){var m=this,k=typeof n;if(k=="number"){n=b.extend({},a,{delay:n})}else{if(k=="boolean"){n=b.extend({},a,{sticky:true})}else{if(k=="string"){n=b.extend({},a,{type:n,delay:((arguments.length>2)&&(typeof arguments[2]=="number"))?arguments[2]:a.delay,sticky:((arguments.length>2)&&(typeof arguments[2]=="boolean"))?arguments[2]:a.sticky})}else{n=b.extend({},a,n)}}}this.options=n;if(!j){j=b('<div class="'+a.classContainer+'" />').appendTo("body");if(b.isFunction(n.init)){n.init.apply(m,[j])}}function o(s){var r='<div class="'+n.classNotification+(n.type.length?(" "+n.classNotification+"-"+n.type):"")+'"><div class="'+n.classBackground+'"></div>'+(n.sticky&&n.showClose?('<a class="'+n.classClose+'">'+n.closeLabel+"</a>"):"")+'<div class="'+n.classMessage+'"><div>'+s+"</div></div></div>";e++;var q=b(r);if(n.sticky){q.find("a."+n.classClose).bind("click.jnotify",function(){m.remove()})}if(b.isFunction(n.create)){n.create.apply(m,[q])}return q.appendTo(j)}this.remove=function(u){var q=l.find("."+n.classMessage),s=q.parent();var r=e--;if(b.isFunction(n.beforeRemove)){n.beforeRemove.apply(m,[q])}function t(){s.remove();if(b.isFunction(u)){u.apply(m,[q])}if(b.isFunction(n.remove)){n.remove.apply(m,[q])}}if(b.isFunction(n.transition)){n.transition.apply(m,[s,q,r,t,n])}else{q.fadeTo(n.fadeSpeed,0.01,function(){if(r<=1){t()}else{s.slideUp(n.slideSpeed,t)}});if(e<=0){s.fadeOut(n.fadeSpeed)}}};var l=o(p);if(!n.sticky){d.push(this);b.jnotify.play()}return this}})(jQuery);var wysihtml5={version:"0.3.0_rc2",commands:{},dom:{},quirks:{},toolbar:{},lang:{},selection:{},views:{},INVISIBLE_SPACE:"\uFEFF",EMPTY_FUNCTION:function(){},ELEMENT_NODE:1,TEXT_NODE:3,BACKSPACE_KEY:8,ENTER_KEY:13,ESCAPE_KEY:27,SPACE_KEY:32,DELETE_KEY:46};window.rangy=(function(){var j="object",g="function",B="undefined";var k=["startContainer","startOffset","endContainer","endOffset","collapsed","commonAncestorContainer","START_TO_START","START_TO_END","END_TO_START","END_TO_END"];var c=["setStart","setStartBefore","setStartAfter","setEnd","setEndBefore","setEndAfter","collapse","selectNode","selectNodeContents","compareBoundaryPoints","deleteContents","extractContents","cloneContents","insertNode","surroundContents","cloneRange","toString","detach"];var r=["boundingHeight","boundingLeft","boundingTop","boundingWidth","htmlText","text"];var o=["collapse","compareEndPoints","duplicate","getBookmark","moveToBookmark","moveToElementText","parentElement","pasteHTML","select","setEndPoint","getBoundingClientRect"];function i(E,D){var C=typeof E[D];return C==g||(!!(C==j&&E[D]))||C=="unknown"}function d(D,C){return !!(typeof D[C]==j&&D[C])}function p(D,C){return typeof D[C]!=B}function l(C){return function(F,E){var D=E.length;while(D--){if(!C(F,E[D])){return false}}return true}}var n=l(i);var q=l(d);var A=l(p);function u(C){return C&&n(C,o)&&A(C,r)}var m={version:"1.2.2",initialized:false,supported:true,util:{isHostMethod:i,isHostObject:d,isHostProperty:p,areHostMethods:n,areHostObjects:q,areHostProperties:A,isTextRange:u},features:{},modules:{},config:{alertOnWarn:false,preferTextRange:false}};function f(C){window.alert("Rangy not supported in your browser. Reason: "+C);m.initialized=true;m.supported=false}m.fail=f;function t(D){var C="Rangy warning: "+D;if(m.config.alertOnWarn){window.alert(C)}else{if(typeof window.console!=B&&typeof window.console.log!=B){window.console.log(C)}}}m.warn=t;if({}.hasOwnProperty){m.util.extend=function(E,D){for(var C in D){if(D.hasOwnProperty(C)){E[C]=D[C]}}}}else{f("hasOwnProperty not supported")}var v=[];var a=[];function s(){if(m.initialized){return}var E;var I=false,J=false;if(i(document,"createRange")){E=document.createRange();if(n(E,c)&&A(E,k)){I=true}E.detach()}var D=d(document,"body")?document.body:document.getElementsByTagName("body")[0];if(D&&i(D,"createTextRange")){E=D.createTextRange();if(u(E)){J=true}}if(!I&&!J){f("Neither Range nor TextRange are implemented")}m.initialized=true;m.features={implementsDomRange:I,implementsTextRange:J};var H=a.concat(v);for(var G=0,C=H.length;G<C;++G){try{H[G](m)}catch(F){if(d(window,"console")&&i(window.console,"log")){window.console.log("Init listener threw an exception. Continuing.",F)}}}}m.init=s;m.addInitListener=function(C){if(m.initialized){C(m)}else{v.push(C)}};var w=[];m.addCreateMissingNativeApiListener=function(C){w.push(C)};function e(E){E=E||window;s();for(var D=0,C=w.length;D<C;++D){w[D](E)}}m.createMissingNativeApi=e;function z(C){this.name=C;this.initialized=false;this.supported=false}z.prototype.fail=function(C){this.initialized=true;this.supported=false;throw new Error("Module '"+this.name+"' failed to load: "+C)};z.prototype.warn=function(C){m.warn("Module "+this.name+": "+C)};z.prototype.createError=function(C){return new Error("Error in Rangy "+this.name+" module: "+C)};m.createModule=function(C,E){var D=new z(C);m.modules[C]=D;a.push(function(F){E(F,D);D.initialized=true;D.supported=true})};m.requireModules=function(E){for(var G=0,C=E.length,F,D;G<C;++G){D=E[G];F=m.modules[D];if(!F||!(F instanceof z)){throw new Error("Module '"+D+"' not found")}if(!F.supported){throw new Error("Module '"+D+"' not supported")}}};var b=false;var h=function(C){if(!b){b=true;if(!m.initialized){s()}}};if(typeof window==B){f("No window found");return}if(typeof document==B){f("No document found");return}if(i(document,"addEventListener")){document.addEventListener("DOMContentLoaded",h,false)}if(i(window,"addEventListener")){window.addEventListener("load",h,false)}else{if(i(window,"attachEvent")){window.attachEvent("onload",h)}else{f("Window does not have required addEventListener or attachEvent method")}}return m})();rangy.createModule("DomUtil",function(p,d){var t="undefined";var b=p.util;if(!b.areHostMethods(document,["createDocumentFragment","createElement","createTextNode"])){d.fail("document missing a Node creation method")}if(!b.isHostMethod(document,"getElementsByTagName")){d.fail("document missing getElementsByTagName method")}var e=document.createElement("div");if(!b.areHostMethods(e,["insertBefore","appendChild","cloneNode"]||!b.areHostObjects(e,["previousSibling","nextSibling","childNodes","parentNode"]))){d.fail("Incomplete Element implementation")}if(!b.isHostProperty(e,"innerHTML")){d.fail("Element is missing innerHTML property")}var s=document.createTextNode("test");if(!b.areHostMethods(s,["splitText","deleteData","insertData","appendData","cloneNode"]||!b.areHostObjects(e,["previousSibling","nextSibling","childNodes","parentNode"])||!b.areHostProperties(s,["data"]))){d.fail("Incomplete Text Node implementation")}var A=function(G,I){var H=G.length;while(H--){if(G[H]===I){return true}}return false};function i(H){var G;return typeof H.namespaceURI==t||((G=H.namespaceURI)===null||G=="http://www.w3.org/1999/xhtml")}function j(H){var G=H.parentNode;return(G.nodeType==1)?G:null}function a(H){var G=0;while((H=H.previousSibling)){G++}return G}function g(G){var H;return m(G)?G.length:((H=G.childNodes)?H.length:0)}function z(H,G){var I=[],J;for(J=H;J;J=J.parentNode){I.push(J)}for(J=G;J;J=J.parentNode){if(A(I,J)){return J}}return null}function E(G,H,J){var I=J?H:H.parentNode;while(I){if(I===G){return true}else{I=I.parentNode}}return false}function B(H,G,K){var I,J=K?H:H.parentNode;while(J){I=J.parentNode;if(I===G){return J}J=I}return null}function m(H){var G=H.nodeType;return G==3||G==4||G==8}function v(J,H){var G=H.nextSibling,I=H.parentNode;if(G){I.insertBefore(J,G)}else{I.appendChild(J)}return J}function w(I,G){var H=I.cloneNode(false);H.deleteData(0,G);I.deleteData(G,I.length-G);v(H,I);return H}function q(G){if(G.nodeType==9){return G}else{if(typeof G.ownerDocument!=t){return G.ownerDocument}else{if(typeof G.document!=t){return G.document}else{if(G.parentNode){return q(G.parentNode)}else{throw new Error("getDocument: no document found for node")}}}}}function l(G){var H=q(G);if(typeof H.defaultView!=t){return H.defaultView}else{if(typeof H.parentWindow!=t){return H.parentWindow}else{throw new Error("Cannot get a window object for node")}}}function D(G){if(typeof G.contentDocument!=t){return G.contentDocument}else{if(typeof G.contentWindow!=t){return G.contentWindow.document}else{throw new Error("getIframeWindow: No Document object found for iframe element")}}}function f(G){if(typeof G.contentWindow!=t){return G.contentWindow}else{if(typeof G.contentDocument!=t){return G.contentDocument.defaultView}else{throw new Error("getIframeWindow: No Window object found for iframe element")}}}function F(G){return b.isHostObject(G,"body")?G.body:G.getElementsByTagName("body")[0]}function c(H){var G;while((G=H.parentNode)){H=G}return H}function r(J,L,I,K){var G,M,O,N,H;if(J==I){return L===K?0:(L<K)?-1:1}else{if((G=B(I,J,true))){return L<=a(G)?-1:1}else{if((G=B(J,I,true))){return a(G)<K?-1:1}else{M=z(J,I);O=(J===M)?M:B(J,M,true);N=(I===M)?M:B(I,M,true);if(O===N){throw new Error("comparePoints got to case 4 and childA and childB are the same!")}else{H=M.firstChild;while(H){if(H===O){return -1}else{if(H===N){return 1}}H=H.nextSibling}throw new Error("Should not be here!")}}}}}function C(H){var G=q(H).createDocumentFragment(),I;while((I=H.firstChild)){G.appendChild(I)}return G}function o(G){if(!G){return"[No node]"}if(m(G)){return'"'+G.data+'"'}else{if(G.nodeType==1){var H=G.id?' id="'+G.id+'"':"";return"<"+G.nodeName+H+">["+G.childNodes.length+"]"}else{return G.nodeName}}}function n(G){this.root=G;this._next=G}n.prototype={_current:null,hasNext:function(){return !!this._next},next:function(){var I=this._current=this._next;var H,G;if(this._current){H=I.firstChild;if(H){this._next=H}else{G=null;while((I!==this.root)&&!(G=I.nextSibling)){I=I.parentNode}this._next=G}}return this._current},detach:function(){this._current=this._next=this.root=null}};function h(G){return new n(G)}function k(G,H){this.node=G;this.offset=H}k.prototype={equals:function(G){return this.node===G.node&this.offset==G.offset},inspect:function(){return"[DomPosition("+o(this.node)+":"+this.offset+")]"}};function u(G){this.code=this[G];this.codeName=G;this.message="DOMException: "+this.codeName}u.prototype={INDEX_SIZE_ERR:1,HIERARCHY_REQUEST_ERR:3,WRONG_DOCUMENT_ERR:4,NO_MODIFICATION_ALLOWED_ERR:7,NOT_FOUND_ERR:8,NOT_SUPPORTED_ERR:9,INVALID_STATE_ERR:11};u.prototype.toString=function(){return this.message};p.dom={arrayContains:A,isHtmlNamespace:i,parentElement:j,getNodeIndex:a,getNodeLength:g,getCommonAncestor:z,isAncestorOf:E,getClosestAncestorIn:B,isCharacterDataNode:m,insertAfter:v,splitDataNode:w,getDocument:q,getWindow:l,getIframeWindow:f,getIframeDocument:D,getBody:F,getRootContainer:c,comparePoints:r,inspectNode:o,fragmentFromNodeChildren:C,createIterator:h,DomPosition:k};p.DOMException=u});rangy.createModule("DomRange",function(i,f){i.requireModules(["DomUtil"]);var b=i.dom;var G=b.DomPosition;var V=i.DOMException;function z(an,e){return(an.nodeType!=3)&&(b.isAncestorOf(an,e.startContainer,true)||b.isAncestorOf(an,e.endContainer,true))}function m(e){return b.getDocument(e.startContainer)}function u(an,ar,ao){var aq=an._listeners[ar];if(aq){for(var ap=0,e=aq.length;ap<e;++ap){aq[ap].call(an,{target:an,args:ao})}}}function C(e){return new G(e.parentNode,b.getNodeIndex(e))}function Y(e){return new G(e.parentNode,b.getNodeIndex(e)+1)}function j(an,ap,ao){var e=an.nodeType==11?an.firstChild:an;if(b.isCharacterDataNode(ap)){if(ao==ap.length){b.insertAfter(an,ap)}else{ap.parentNode.insertBefore(an,ao==0?ap:b.splitDataNode(ap,ao))}}else{if(ao>=ap.childNodes.length){ap.appendChild(an)}else{ap.insertBefore(an,ap.childNodes[ao])}}return e}function J(ao){var an;for(var ap,aq=m(ao.range).createDocumentFragment(),e;ap=ao.next();){an=ao.isPartiallySelectedSubtree();ap=ap.cloneNode(!an);if(an){e=ao.getSubtreeIterator();ap.appendChild(J(e));e.detach(true)}if(ap.nodeType==10){throw new V("HIERARCHY_REQUEST_ERR")}aq.appendChild(ap)}return aq}function X(an,aq,e){var ao,at;e=e||{stop:false};for(var ap,ar;ap=an.next();){if(an.isPartiallySelectedSubtree()){if(aq(ap)===false){e.stop=true;return}else{ar=an.getSubtreeIterator();X(ar,aq,e);ar.detach(true);if(e.stop){return}}}else{ao=b.createIterator(ap);while((at=ao.next())){if(aq(at)===false){e.stop=true;return}}}}}function n(an){var e;while(an.next()){if(an.isPartiallySelectedSubtree()){e=an.getSubtreeIterator();n(e);e.detach(true)}else{an.remove()}}}function S(an){for(var ao,ap=m(an.range).createDocumentFragment(),e;ao=an.next();){if(an.isPartiallySelectedSubtree()){ao=ao.cloneNode(false);e=an.getSubtreeIterator();ao.appendChild(S(e));e.detach(true)}else{an.remove()}if(ao.nodeType==10){throw new V("HIERARCHY_REQUEST_ERR")}ap.appendChild(ao)}return ap}function p(ao,e,ap){var ar=!!(e&&e.length),aq;var at=!!ap;if(ar){aq=new RegExp("^("+e.join("|")+")$")}var an=[];X(new g(ao,false),function(au){if((!ar||aq.test(au.nodeType))&&(!at||ap(au))){an.push(au)}});return an}function B(e){var an=(typeof e.getName=="undefined")?"Range":e.getName();return"["+an+"("+b.inspectNode(e.startContainer)+":"+e.startOffset+", "+b.inspectNode(e.endContainer)+":"+e.endOffset+")]"}function g(ao,an){this.range=ao;this.clonePartiallySelectedTextNodes=an;if(!ao.collapsed){this.sc=ao.startContainer;this.so=ao.startOffset;this.ec=ao.endContainer;this.eo=ao.endOffset;var e=ao.commonAncestorContainer;if(this.sc===this.ec&&b.isCharacterDataNode(this.sc)){this.isSingleCharacterDataNode=true;this._first=this._last=this._next=this.sc}else{this._first=this._next=(this.sc===e&&!b.isCharacterDataNode(this.sc))?this.sc.childNodes[this.so]:b.getClosestAncestorIn(this.sc,e,true);this._last=(this.ec===e&&!b.isCharacterDataNode(this.ec))?this.ec.childNodes[this.eo-1]:b.getClosestAncestorIn(this.ec,e,true)}}}g.prototype={_current:null,_next:null,_first:null,_last:null,isSingleCharacterDataNode:false,reset:function(){this._current=null;this._next=this._first},hasNext:function(){return !!this._next},next:function(){var e=this._current=this._next;if(e){this._next=(e!==this._last)?e.nextSibling:null;if(b.isCharacterDataNode(e)&&this.clonePartiallySelectedTextNodes){if(e===this.ec){(e=e.cloneNode(true)).deleteData(this.eo,e.length-this.eo)}if(this._current===this.sc){(e=e.cloneNode(true)).deleteData(0,this.so)}}}return e},remove:function(){var an=this._current,ao,e;if(b.isCharacterDataNode(an)&&(an===this.sc||an===this.ec)){ao=(an===this.sc)?this.so:0;e=(an===this.ec)?this.eo:an.length;if(ao!=e){an.deleteData(ao,e-ao)}}else{if(an.parentNode){an.parentNode.removeChild(an)}else{}}},isPartiallySelectedSubtree:function(){var e=this._current;return z(e,this.range)},getSubtreeIterator:function(){var an;if(this.isSingleCharacterDataNode){an=this.range.cloneRange();an.collapse()}else{an=new al(m(this.range));var ar=this._current;var ap=ar,e=0,aq=ar,ao=b.getNodeLength(ar);if(b.isAncestorOf(ar,this.sc,true)){ap=this.sc;e=this.so}if(b.isAncestorOf(ar,this.ec,true)){aq=this.ec;ao=this.eo}F(an,ap,e,aq,ao)}return new g(an,this.clonePartiallySelectedTextNodes)},detach:function(e){if(e){this.range.detach()}this.range=this._current=this._next=this._first=this._last=this.sc=this.so=this.ec=this.eo=null}};function Q(e){this.code=this[e];this.codeName=e;this.message="RangeException: "+this.codeName}Q.prototype={BAD_BOUNDARYPOINTS_ERR:1,INVALID_NODE_TYPE_ERR:2};Q.prototype.toString=function(){return this.message};function w(an,e,ao){this.nodes=p(an,e,ao);this._next=this.nodes[0];this._position=0}w.prototype={_current:null,hasNext:function(){return !!this._next},next:function(){this._current=this._next;this._next=this.nodes[++this._position];return this._current},detach:function(){this._current=this._next=this.nodes=null}};var ag=[1,3,4,5,7,8,10];var ae=[2,9,11];var D=[5,6,10,12];var O=[1,3,4,5,7,8,10,11];var H=[1,3,4,5,7,8];function aa(e){return function(ao,aq){var an,ap=aq?ao:ao.parentNode;while(ap){an=ap.nodeType;if(b.arrayContains(e,an)){return ap}ap=ap.parentNode}return null}}var t=b.getRootContainer;var K=aa([9,11]);var M=aa(D);var c=aa([6,10,12]);function r(an,e){if(c(an,e)){throw new Q("INVALID_NODE_TYPE_ERR")}}function E(e){if(!e.startContainer){throw new V("INVALID_STATE_ERR")}}function W(e,an){if(!b.arrayContains(an,e.nodeType)){throw new Q("INVALID_NODE_TYPE_ERR")}}function af(e,an){if(an<0||an>(b.isCharacterDataNode(e)?e.length:e.childNodes.length)){throw new V("INDEX_SIZE_ERR")}}function d(an,e){if(K(an,true)!==K(e,true)){throw new V("WRONG_DOCUMENT_ERR")}}function ac(e){if(M(e,true)){throw new V("NO_MODIFICATION_ALLOWED_ERR")}}function aj(an,e){if(!an){throw new V(e)}}function o(e){return !b.arrayContains(ae,e.nodeType)&&!K(e,true)}function am(e,an){return an<=(b.isCharacterDataNode(e)?e.length:e.childNodes.length)}function h(e){E(e);if(o(e.startContainer)||o(e.endContainer)||!am(e.startContainer,e.startOffset)||!am(e.endContainer,e.endOffset)){throw new Error("Range error: Range is no longer valid after DOM mutation ("+e.inspect()+")")}}var a=document.createElement("style");var R=false;try{a.innerHTML="<b>x</b>";R=(a.firstChild.nodeType==3)}catch(ai){}i.features.htmlParsingConforms=R;var T=R?function(ao){var an=this.startContainer;var ap=b.getDocument(an);if(!an){throw new V("INVALID_STATE_ERR")}var e=null;if(an.nodeType==1){e=an}else{if(b.isCharacterDataNode(an)){e=b.parentElement(an)}}if(e===null||(e.nodeName=="HTML"&&b.isHtmlNamespace(b.getDocument(e).documentElement)&&b.isHtmlNamespace(e))){e=ap.createElement("body")}else{e=e.cloneNode(false)}e.innerHTML=ao;return b.fragmentFromNodeChildren(e)}:function(an){E(this);var ao=m(this);var e=ao.createElement("body");e.innerHTML=an;return b.fragmentFromNodeChildren(e)};var N=["startContainer","startOffset","endContainer","endOffset","collapsed","commonAncestorContainer"];var l=0,A=1,ah=2,ab=3;var s=0,v=1,L=2,k=3;function ad(){}ad.prototype={attachListener:function(e,an){this._listeners[e].push(an)},compareBoundaryPoints:function(ar,ao){h(this);d(this.startContainer,ao.startContainer);var au,an,at,e;var aq=(ar==ab||ar==l)?"start":"end";var ap=(ar==A||ar==l)?"start":"end";au=this[aq+"Container"];an=this[aq+"Offset"];at=ao[ap+"Container"];e=ao[ap+"Offset"];return b.comparePoints(au,an,at,e)},insertNode:function(an){h(this);W(an,O);ac(this.startContainer);if(b.isAncestorOf(an,this.startContainer,true)){throw new V("HIERARCHY_REQUEST_ERR")}var e=j(an,this.startContainer,this.startOffset);this.setStartBefore(e)},cloneContents:function(){h(this);var ao,an;if(this.collapsed){return m(this).createDocumentFragment()}else{if(this.startContainer===this.endContainer&&b.isCharacterDataNode(this.startContainer)){ao=this.startContainer.cloneNode(true);ao.data=ao.data.slice(this.startOffset,this.endOffset);an=m(this).createDocumentFragment();an.appendChild(ao);return an}else{var e=new g(this,true);ao=J(e);e.detach()}return ao}},canSurroundContents:function(){h(this);ac(this.startContainer);ac(this.endContainer);var e=new g(this,true);var an=(e._first&&(z(e._first,this))||(e._last&&z(e._last,this)));e.detach();return !an},surroundContents:function(an){W(an,H);if(!this.canSurroundContents()){throw new Q("BAD_BOUNDARYPOINTS_ERR")}var e=this.extractContents();if(an.hasChildNodes()){while(an.lastChild){an.removeChild(an.lastChild)}}j(an,this.startContainer,this.startOffset);an.appendChild(e);this.selectNode(an)},cloneRange:function(){h(this);var e=new al(m(this));var an=N.length,ao;while(an--){ao=N[an];e[ao]=this[ao]}return e},toString:function(){h(this);var an=this.startContainer;if(an===this.endContainer&&b.isCharacterDataNode(an)){return(an.nodeType==3||an.nodeType==4)?an.data.slice(this.startOffset,this.endOffset):""}else{var ao=[],e=new g(this,true);X(e,function(ap){if(ap.nodeType==3||ap.nodeType==4){ao.push(ap.data)}});e.detach();return ao.join("")}},compareNode:function(ao){h(this);var an=ao.parentNode;var aq=b.getNodeIndex(ao);if(!an){throw new V("NOT_FOUND_ERR")}var ap=this.comparePoint(an,aq),e=this.comparePoint(an,aq+1);if(ap<0){return(e>0)?L:s}else{return(e>0)?v:k}},comparePoint:function(e,an){h(this);aj(e,"HIERARCHY_REQUEST_ERR");d(e,this.startContainer);if(b.comparePoints(e,an,this.startContainer,this.startOffset)<0){return -1}else{if(b.comparePoints(e,an,this.endContainer,this.endOffset)>0){return 1}}return 0},createContextualFragment:T,toHtml:function(){h(this);var e=m(this).createElement("div");e.appendChild(this.cloneContents());return e.innerHTML},intersectsNode:function(ap,e){h(this);aj(ap,"NOT_FOUND_ERR");if(b.getDocument(ap)!==m(this)){return false}var ao=ap.parentNode,ar=b.getNodeIndex(ap);aj(ao,"NOT_FOUND_ERR");var aq=b.comparePoints(ao,ar,this.endContainer,this.endOffset),an=b.comparePoints(ao,ar+1,this.startContainer,this.startOffset);return e?aq<=0&&an>=0:aq<0&&an>0},isPointInRange:function(e,an){h(this);aj(e,"HIERARCHY_REQUEST_ERR");d(e,this.startContainer);return(b.comparePoints(e,an,this.startContainer,this.startOffset)>=0)&&(b.comparePoints(e,an,this.endContainer,this.endOffset)<=0)},intersectsRange:function(an,e){h(this);if(m(an)!=m(this)){throw new V("WRONG_DOCUMENT_ERR")}var ap=b.comparePoints(this.startContainer,this.startOffset,an.endContainer,an.endOffset),ao=b.comparePoints(this.endContainer,this.endOffset,an.startContainer,an.startOffset);return e?ap<=0&&ao>=0:ap<0&&ao>0},intersection:function(e){if(this.intersectsRange(e)){var ap=b.comparePoints(this.startContainer,this.startOffset,e.startContainer,e.startOffset),an=b.comparePoints(this.endContainer,this.endOffset,e.endContainer,e.endOffset);var ao=this.cloneRange();if(ap==-1){ao.setStart(e.startContainer,e.startOffset)}if(an==1){ao.setEnd(e.endContainer,e.endOffset)}return ao}return null},union:function(e){if(this.intersectsRange(e,true)){var an=this.cloneRange();if(b.comparePoints(e.startContainer,e.startOffset,this.startContainer,this.startOffset)==-1){an.setStart(e.startContainer,e.startOffset)}if(b.comparePoints(e.endContainer,e.endOffset,this.endContainer,this.endOffset)==1){an.setEnd(e.endContainer,e.endOffset)}return an}else{throw new Q("Ranges do not intersect")}},containsNode:function(an,e){if(e){return this.intersectsNode(an,false)}else{return this.compareNode(an)==k}},containsNodeContents:function(e){return this.comparePoint(e,0)>=0&&this.comparePoint(e,b.getNodeLength(e))<=0},containsRange:function(e){return this.intersection(e).equals(e)},containsNodeText:function(ap){var aq=this.cloneRange();aq.selectNode(ap);var ao=aq.getNodes([3]);if(ao.length>0){aq.setStart(ao[0],0);var e=ao.pop();aq.setEnd(e,e.length);var an=this.containsRange(aq);aq.detach();return an}else{return this.containsNodeContents(ap)}},createNodeIterator:function(e,an){h(this);return new w(this,e,an)},getNodes:function(e,an){h(this);return p(this,e,an)},getDocument:function(){return m(this)},collapseBefore:function(e){E(this);this.setEndBefore(e);this.collapse(false)},collapseAfter:function(e){E(this);this.setStartAfter(e);this.collapse(true)},getName:function(){return"DomRange"},equals:function(e){return al.rangesEqual(this,e)},inspect:function(){return B(this)}};function U(e){e.START_TO_START=l;e.START_TO_END=A;e.END_TO_END=ah;e.END_TO_START=ab;e.NODE_BEFORE=s;e.NODE_AFTER=v;e.NODE_BEFORE_AND_AFTER=L;e.NODE_INSIDE=k}function I(e){U(e);U(e.prototype)}function q(e,an){return function(){h(this);var au=this.startContainer,at=this.startOffset,ao=this.commonAncestorContainer;var aq=new g(this,true);var ar,av;if(au!==ao){ar=b.getClosestAncestorIn(au,ao,true);av=Y(ar);au=av.node;at=av.offset}X(aq,ac);aq.reset();var ap=e(aq);aq.detach();an(this,au,at,au,at);return ap}}function Z(ap,at,e){function ar(av,au){return function(aw){E(this);W(aw,ag);W(t(aw),ae);var ax=(av?C:Y)(aw);(au?ao:aq)(this,ax.node,ax.offset)}}function ao(av,ax,ay){var aw=av.endContainer,au=av.endOffset;if(ax!==av.startContainer||ay!==av.startOffset){if(t(ax)!=t(aw)||b.comparePoints(ax,ay,aw,au)==1){aw=ax;au=ay}at(av,ax,ay,aw,au)}}function aq(au,av,ay){var ax=au.startContainer,aw=au.startOffset;if(av!==au.endContainer||ay!==au.endOffset){if(t(av)!=t(ax)||b.comparePoints(av,ay,ax,aw)==-1){ax=av;aw=ay}at(au,ax,aw,av,ay)}}function an(au,av,aw){if(av!==au.startContainer||aw!==au.startOffset||av!==au.endContainer||aw!==au.endOffset){at(au,av,aw,av,aw)}}ap.prototype=new ad();i.util.extend(ap.prototype,{setStart:function(au,av){E(this);r(au,true);af(au,av);ao(this,au,av)},setEnd:function(au,av){E(this);r(au,true);af(au,av);aq(this,au,av)},setStartBefore:ar(true,true),setStartAfter:ar(false,true),setEndBefore:ar(true,false),setEndAfter:ar(false,false),collapse:function(au){h(this);if(au){at(this,this.startContainer,this.startOffset,this.startContainer,this.startOffset)}else{at(this,this.endContainer,this.endOffset,this.endContainer,this.endOffset)}},selectNodeContents:function(au){E(this);r(au,true);at(this,au,0,au,b.getNodeLength(au))},selectNode:function(av){E(this);r(av,false);W(av,ag);var aw=C(av),au=Y(av);at(this,aw.node,aw.offset,au.node,au.offset)},extractContents:q(S,at),deleteContents:q(n,at),canSurroundContents:function(){h(this);ac(this.startContainer);ac(this.endContainer);var au=new g(this,true);var av=(au._first&&(z(au._first,this))||(au._last&&z(au._last,this)));au.detach();return !av},detach:function(){e(this)},splitBoundaries:function(){h(this);var ay=this.startContainer,ax=this.startOffset,av=this.endContainer,au=this.endOffset;var aw=(ay===av);if(b.isCharacterDataNode(av)&&au>0&&au<av.length){b.splitDataNode(av,au)}if(b.isCharacterDataNode(ay)&&ax>0&&ax<ay.length){ay=b.splitDataNode(ay,ax);if(aw){au-=ax;av=ay}else{if(av==ay.parentNode&&au>=b.getNodeIndex(ay)){au++}}ax=0}at(this,ay,ax,av,au)},normalizeBoundaries:function(){h(this);var aB=this.startContainer,aw=this.startOffset,aA=this.endContainer,au=this.endOffset;var ax=function(aE){var aD=aE.nextSibling;if(aD&&aD.nodeType==aE.nodeType){aA=aE;au=aE.length;aE.appendData(aD.data);aD.parentNode.removeChild(aD)}};var aC=function(aF){var aE=aF.previousSibling;if(aE&&aE.nodeType==aF.nodeType){aB=aF;var aD=aF.length;aw=aE.length;aF.insertData(0,aE.data);aE.parentNode.removeChild(aE);if(aB==aA){au+=aw;aA=aB}else{if(aA==aF.parentNode){var aG=b.getNodeIndex(aF);if(au==aG){aA=aF;au=aD}else{if(au>aG){au--}}}}}};var az=true;if(b.isCharacterDataNode(aA)){if(aA.length==au){ax(aA)}}else{if(au>0){var ay=aA.childNodes[au-1];if(ay&&b.isCharacterDataNode(ay)){ax(ay)}}az=!this.collapsed}if(az){if(b.isCharacterDataNode(aB)){if(aw==0){aC(aB)}}else{if(aw<aB.childNodes.length){var av=aB.childNodes[aw];if(av&&b.isCharacterDataNode(av)){aC(av)}}}}else{aB=aA;aw=au}at(this,aB,aw,aA,au)},collapseToPoint:function(au,av){E(this);r(au,true);af(au,av);an(this,au,av)}});I(ap)}function P(e){e.collapsed=(e.startContainer===e.endContainer&&e.startOffset===e.endOffset);e.commonAncestorContainer=e.collapsed?e.startContainer:b.getCommonAncestor(e.startContainer,e.endContainer)}function F(ao,aq,an,ar,ap){var e=(ao.startContainer!==aq||ao.startOffset!==an);var at=(ao.endContainer!==ar||ao.endOffset!==ap);ao.startContainer=aq;ao.startOffset=an;ao.endContainer=ar;ao.endOffset=ap;P(ao);u(ao,"boundarychange",{startMoved:e,endMoved:at})}function ak(e){E(e);e.startContainer=e.startOffset=e.endContainer=e.endOffset=null;e.collapsed=e.commonAncestorContainer=null;u(e,"detach",null);e._listeners=null}function al(e){this.startContainer=e;this.startOffset=0;this.endContainer=e;this.endOffset=0;this._listeners={boundarychange:[],detach:[]};P(this)}Z(al,F,ak);i.rangePrototype=ad.prototype;al.rangeProperties=N;al.RangeIterator=g;al.copyComparisonConstants=I;al.createPrototypeRange=Z;al.inspect=B;al.getRangeDocument=m;al.rangesEqual=function(an,e){return an.startContainer===e.startContainer&&an.startOffset===e.startOffset&&an.endContainer===e.endContainer&&an.endOffset===e.endOffset};i.DomRange=al;i.RangeException=Q});rangy.createModule("WrappedRange",function(i,d){i.requireModules(["DomUtil","DomRange"]);var a;var h=i.dom;var b=h.DomPosition;var j=i.DomRange;function e(q){var o=q.parentElement();var m=q.duplicate();m.collapse(true);var p=m.parentElement();m=q.duplicate();m.collapse(false);var n=m.parentElement();var l=(p==n)?p:h.getCommonAncestor(p,n);return l==o?l:h.getCommonAncestor(o,l)}function c(l){return l.compareEndPoints("StartToEnd",l)==0}function f(B,w,n,s){var C=B.duplicate();C.collapse(n);var A=C.parentElement();if(!h.isAncestorOf(w,A,true)){A=w}if(!A.canHaveHTML){return new b(A.parentNode,h.getNodeIndex(A))}var m=h.getDocument(A).createElement("span");var z,u=n?"StartToStart":"StartToEnd";var v,q,l,o;do{A.insertBefore(m,m.previousSibling);C.moveToElementText(m)}while((z=C.compareEndPoints(u,B))>0&&m.previousSibling);o=m.nextSibling;if(z==-1&&o&&h.isCharacterDataNode(o)){C.setEndPoint(n?"EndToStart":"EndToEnd",B);var r;if(/[\r\n]/.test(o.data)){var t=C.duplicate();var p=t.text.replace(/\r\n/g,"\r").length;r=t.moveStart("character",p);while((z=t.compareEndPoints("StartToEnd",t))==-1){r++;t.moveStart("character",1)}}else{r=C.text.length}l=new b(o,r)}else{v=(s||!n)&&m.previousSibling;q=(s||n)&&m.nextSibling;if(q&&h.isCharacterDataNode(q)){l=new b(q,0)}else{if(v&&h.isCharacterDataNode(v)){l=new b(v,v.length)}else{l=new b(A,h.getNodeIndex(m))}}}m.parentNode.removeChild(m);return l}function k(l,n){var o,r,p=l.offset;var s=h.getDocument(l.node);var m,t,u=s.body.createTextRange();var q=h.isCharacterDataNode(l.node);if(q){o=l.node;r=o.parentNode}else{t=l.node.childNodes;o=(p<t.length)?t[p]:null;r=l.node}m=s.createElement("span");m.innerHTML="&#feff;";if(o){r.insertBefore(m,o)}else{r.appendChild(m)}u.moveToElementText(m);u.collapse(!n);r.removeChild(m);if(q){u[n?"moveStart":"moveEnd"]("character",p)}return u}if(i.features.implementsDomRange&&(!i.features.implementsTextRange||!i.config.preferTextRange)){(function(){var n;var s=j.rangeProperties;var v;function l(w){var z=s.length,A;while(z--){A=s[z];w[A]=w.nativeRange[A]}}function o(A,C,z,D,B){var w=(A.startContainer!==C||A.startOffset!=z);var E=(A.endContainer!==D||A.endOffset!=B);if(w||E){A.setEnd(D,B);A.setStart(C,z)}}function t(w){w.nativeRange.detach();w.detached=true;var z=s.length,A;while(z--){A=s[z];w[A]=null}}var m;a=function(w){if(!w){throw new Error("Range must be specified")}this.nativeRange=w;l(this)};j.createPrototypeRange(a,o,t);n=a.prototype;n.selectNode=function(w){this.nativeRange.selectNode(w);l(this)};n.deleteContents=function(){this.nativeRange.deleteContents();l(this)};n.extractContents=function(){var w=this.nativeRange.extractContents();l(this);return w};n.cloneContents=function(){return this.nativeRange.cloneContents()};n.surroundContents=function(w){this.nativeRange.surroundContents(w);l(this)};n.collapse=function(w){this.nativeRange.collapse(w);l(this)};n.cloneRange=function(){return new a(this.nativeRange.cloneRange())};n.refresh=function(){l(this)};n.toString=function(){return this.nativeRange.toString()};var r=document.createTextNode("test");h.getBody(document).appendChild(r);var p=document.createRange();p.setStart(r,0);p.setEnd(r,0);try{p.setStart(r,1);v=true;n.setStart=function(w,z){this.nativeRange.setStart(w,z);l(this)};n.setEnd=function(w,z){this.nativeRange.setEnd(w,z);l(this)};m=function(w){return function(z){this.nativeRange[w](z);l(this)}}}catch(q){v=false;n.setStart=function(z,A){try{this.nativeRange.setStart(z,A)}catch(w){this.nativeRange.setEnd(z,A);this.nativeRange.setStart(z,A)}l(this)};n.setEnd=function(z,A){try{this.nativeRange.setEnd(z,A)}catch(w){this.nativeRange.setStart(z,A);this.nativeRange.setEnd(z,A)}l(this)};m=function(w,z){return function(B){try{this.nativeRange[w](B)}catch(A){this.nativeRange[z](B);this.nativeRange[w](B)}l(this)}}}n.setStartBefore=m("setStartBefore","setEndBefore");n.setStartAfter=m("setStartAfter","setEndAfter");n.setEndBefore=m("setEndBefore","setStartBefore");n.setEndAfter=m("setEndAfter","setStartAfter");p.selectNodeContents(r);if(p.startContainer==r&&p.endContainer==r&&p.startOffset==0&&p.endOffset==r.length){n.selectNodeContents=function(w){this.nativeRange.selectNodeContents(w);l(this)}}else{n.selectNodeContents=function(w){this.setStart(w,0);this.setEnd(w,j.getEndOffset(w))}}p.selectNodeContents(r);p.setEnd(r,3);var u=document.createRange();u.selectNodeContents(r);u.setEnd(r,4);u.setStart(r,2);if(p.compareBoundaryPoints(p.START_TO_END,u)==-1&p.compareBoundaryPoints(p.END_TO_START,u)==1){n.compareBoundaryPoints=function(z,w){w=w.nativeRange||w;if(z==w.START_TO_END){z=w.END_TO_START}else{if(z==w.END_TO_START){z=w.START_TO_END}}return this.nativeRange.compareBoundaryPoints(z,w)}}else{n.compareBoundaryPoints=function(z,w){return this.nativeRange.compareBoundaryPoints(z,w.nativeRange||w)}}if(i.util.isHostMethod(p,"createContextualFragment")){n.createContextualFragment=function(w){return this.nativeRange.createContextualFragment(w)}}h.getBody(document).removeChild(r);p.detach();u.detach()})();i.createNativeRange=function(l){l=l||document;return l.createRange()}}else{if(i.features.implementsTextRange){a=function(l){this.textRange=l;this.refresh()};a.prototype=new j(document);a.prototype.refresh=function(){var n,l;var m=e(this.textRange);if(c(this.textRange)){l=n=f(this.textRange,m,true,true)}else{n=f(this.textRange,m,true,false);l=f(this.textRange,m,false,false)}this.setStart(n.node,n.offset);this.setEnd(l.node,l.offset)};j.copyComparisonConstants(a);var g=(function(){return this})();if(typeof g.Range=="undefined"){g.Range=a}i.createNativeRange=function(l){l=l||document;return l.body.createTextRange()}}}if(i.features.implementsTextRange){a.rangeToTextRange=function(l){if(l.collapsed){var o=k(new b(l.startContainer,l.startOffset),true);return o}else{var p=k(new b(l.startContainer,l.startOffset),true);var n=k(new b(l.endContainer,l.endOffset),false);var m=h.getDocument(l.startContainer).body.createTextRange();m.setEndPoint("StartToStart",p);m.setEndPoint("EndToEnd",n);return m}}}a.prototype.getName=function(){return"WrappedRange"};i.WrappedRange=a;i.createRange=function(l){l=l||document;return new a(i.createNativeRange(l))};i.createRangyRange=function(l){l=l||document;return new j(l)};i.createIframeRange=function(l){return i.createRange(h.getIframeDocument(l))};i.createIframeRangyRange=function(l){return i.createRangyRange(h.getIframeDocument(l))};i.addCreateMissingNativeApiListener(function(m){var l=m.document;if(typeof l.createRange=="undefined"){l.createRange=function(){return i.createRange(this)}}l=m=null})});rangy.createModule("WrappedSelection",function(g,d){g.requireModules(["DomUtil","DomRange","WrappedRange"]);g.config.checkSelectionRanges=true;var F="boolean",V="_rangySelection",c=g.dom,l=g.util,S=g.DomRange,e=g.WrappedRange,P=g.DOMException,A=c.DomPosition,w,n,W="Control";function m(Y){return(Y||window).getSelection()}function q(Y){return(Y||window).document.selection}var U=g.util.isHostMethod(window,"getSelection"),O=g.util.isHostObject(document,"selection");var u=O&&(!U||g.config.preferTextRange);if(u){w=q;g.isSelectionValid=function(Z){var aa=(Z||window).document,Y=aa.selection;return(Y.type!="None"||c.getDocument(Y.createRange().parentElement())==aa)}}else{if(U){w=m;g.isSelectionValid=function(){return true}}else{d.fail("Neither document.selection or window.getSelection() detected.")}}g.getNativeSelection=w;var N=w();var D=g.createNativeRange(document);var E=c.getBody(document);var L=l.areHostObjects(N,["anchorNode","focusNode"]&&l.areHostProperties(N,["anchorOffset","focusOffset"]));g.features.selectionHasAnchorAndFocus=L;var p=l.isHostMethod(N,"extend");g.features.selectionHasExtend=p;var X=(typeof N.rangeCount=="number");g.features.selectionHasRangeCount=X;var R=false;var Q=true;if(l.areHostMethods(N,["addRange","getRangeAt","removeAllRanges"])&&typeof N.rangeCount=="number"&&g.features.implementsDomRange){(function(){var aa=document.createElement("iframe");E.appendChild(aa);var ae=c.getIframeDocument(aa);ae.open();ae.write("<html><head></head><body>12</body></html>");ae.close();var ac=c.getIframeWindow(aa).getSelection();var af=ae.documentElement;var ab=af.lastChild,ad=ab.firstChild;var Z=ae.createRange();Z.setStart(ad,1);Z.collapse(true);ac.addRange(Z);Q=(ac.rangeCount==1);ac.removeAllRanges();var Y=Z.cloneRange();Z.setStart(ad,0);Y.setEnd(ad,2);ac.addRange(Z);ac.addRange(Y);R=(ac.rangeCount==2);Z.detach();Y.detach();E.removeChild(aa)})()}g.features.selectionSupportsMultipleRanges=R;g.features.collapsedNonEditableSelectionsSupported=Q;var f=false,j;if(E&&l.isHostMethod(E,"createControlRange")){j=E.createControlRange();if(l.areHostProperties(j,["item","add"])){f=true}}g.features.implementsControlRange=f;if(L){n=function(Y){return Y.anchorNode===Y.focusNode&&Y.anchorOffset===Y.focusOffset}}else{n=function(Y){return Y.rangeCount?Y.getRangeAt(Y.rangeCount-1).collapsed:false}}function b(ab,Z,Y){var aa=Y?"end":"start",ac=Y?"start":"end";ab.anchorNode=Z[aa+"Container"];ab.anchorOffset=Z[aa+"Offset"];ab.focusNode=Z[ac+"Container"];ab.focusOffset=Z[ac+"Offset"]}function v(Z){var Y=Z.nativeSelection;Z.anchorNode=Y.anchorNode;Z.anchorOffset=Y.anchorOffset;Z.focusNode=Y.focusNode;Z.focusOffset=Y.focusOffset}function I(Y){Y.anchorNode=Y.focusNode=null;Y.anchorOffset=Y.focusOffset=0;Y.rangeCount=0;Y.isCollapsed=true;Y._ranges.length=0}function K(Y){var Z;if(Y instanceof S){Z=Y._selectionNativeRange;if(!Z){Z=g.createNativeRange(c.getDocument(Y.startContainer));Z.setEnd(Y.endContainer,Y.endOffset);Z.setStart(Y.startContainer,Y.startOffset);Y._selectionNativeRange=Z;Y.attachListener("detach",function(){this._selectionNativeRange=null})}}else{if(Y instanceof e){Z=Y.nativeRange}else{if(g.features.implementsDomRange&&(Y instanceof c.getWindow(Y.startContainer).Range)){Z=Y}}}return Z}function k(aa){if(!aa.length||aa[0].nodeType!=1){return false}for(var Z=1,Y=aa.length;Z<Y;++Z){if(!c.isAncestorOf(aa[0],aa[Z])){return false}}return true}function M(Z){var Y=Z.getNodes();if(!k(Y)){throw new Error("getSingleElementFromRange: range "+Z.inspect()+" did not consist of a single element")}return Y[0]}function H(Y){return !!Y&&typeof Y.text!="undefined"}function J(aa,Z){var Y=new e(Z);aa._ranges=[Y];b(aa,Y,false);aa.rangeCount=1;aa.isCollapsed=Y.collapsed}function t(ab){ab._ranges.length=0;if(ab.docSelection.type=="None"){I(ab)}else{var aa=ab.docSelection.createRange();if(H(aa)){J(ab,aa)}else{ab.rangeCount=aa.length;var Y,ac=c.getDocument(aa.item(0));for(var Z=0;Z<ab.rangeCount;++Z){Y=g.createRange(ac);Y.selectNode(aa.item(Z));ab._ranges.push(Y)}ab.isCollapsed=ab.rangeCount==1&&ab._ranges[0].collapsed;b(ab,ab._ranges[ab.rangeCount-1],false)}}}function z(Z,ac){var aa=Z.docSelection.createRange();var Y=M(ac);var ag=c.getDocument(aa.item(0));var ad=c.getBody(ag).createControlRange();for(var ab=0,ae=aa.length;ab<ae;++ab){ad.add(aa.item(ab))}try{ad.add(Y)}catch(af){throw new Error("addRange(): Element within the specified Range could not be added to control selection (does it have layout?)")}ad.select();t(Z)}var o;if(l.isHostMethod(N,"getRangeAt")){o=function(aa,Y){try{return aa.getRangeAt(Y)}catch(Z){return null}}}else{if(L){o=function(Z){var aa=c.getDocument(Z.anchorNode);var Y=g.createRange(aa);Y.setStart(Z.anchorNode,Z.anchorOffset);Y.setEnd(Z.focusNode,Z.focusOffset);if(Y.collapsed!==this.isCollapsed){Y.setStart(Z.focusNode,Z.focusOffset);Y.setEnd(Z.anchorNode,Z.anchorOffset)}return Y}}}function C(Y,aa,Z){this.nativeSelection=Y;this.docSelection=aa;this._ranges=[];this.win=Z;this.refresh()}g.getSelection=function(aa){aa=aa||window;var Z=aa[V];var Y=w(aa),ab=O?q(aa):null;if(Z){Z.nativeSelection=Y;Z.docSelection=ab;Z.refresh(aa)}else{Z=new C(Y,ab,aa);aa[V]=Z}return Z};g.getIframeSelection=function(Y){return g.getSelection(c.getIframeWindow(Y))};var a=C.prototype;function i(ad,Y){var ae=c.getDocument(Y[0].startContainer);var ab=c.getBody(ae).createControlRange();for(var aa=0,ac;aa<rangeCount;++aa){ac=M(Y[aa]);try{ab.add(ac)}catch(Z){throw new Error("setRanges(): Element within the one of the specified Ranges could not be added to control selection (does it have layout?)")}}ab.select();t(ad)}if(!u&&L&&l.areHostMethods(N,["removeAllRanges","addRange"])){a.removeAllRanges=function(){this.nativeSelection.removeAllRanges();I(this)};var h=function(aa,Y){var ab=S.getRangeDocument(Y);var Z=g.createRange(ab);Z.collapseToPoint(Y.endContainer,Y.endOffset);aa.nativeSelection.addRange(K(Z));aa.nativeSelection.extend(Y.startContainer,Y.startOffset);aa.refresh()};if(X){a.addRange=function(Z,Y){if(f&&O&&this.docSelection.type==W){z(this,Z)}else{if(Y&&p){h(this,Z)}else{var aa;if(R){aa=this.rangeCount}else{this.removeAllRanges();aa=0}this.nativeSelection.addRange(K(Z));this.rangeCount=this.nativeSelection.rangeCount;if(this.rangeCount==aa+1){if(g.config.checkSelectionRanges){var ab=o(this.nativeSelection,this.rangeCount-1);if(ab&&!S.rangesEqual(ab,Z)){Z=new e(ab)}}this._ranges[this.rangeCount-1]=Z;b(this,Z,r(this.nativeSelection));this.isCollapsed=n(this)}else{this.refresh()}}}}}else{a.addRange=function(Z,Y){if(Y&&p){h(this,Z)}else{this.nativeSelection.addRange(K(Z));this.refresh()}}}a.setRanges=function(Z){if(f&&Z.length>1){i(this,Z)}else{this.removeAllRanges();for(var aa=0,Y=Z.length;aa<Y;++aa){this.addRange(Z[aa])}}}}else{if(l.isHostMethod(N,"empty")&&l.isHostMethod(D,"select")&&f&&u){a.removeAllRanges=function(){try{this.docSelection.empty();if(this.docSelection.type!="None"){var ab;if(this.anchorNode){ab=c.getDocument(this.anchorNode)}else{if(this.docSelection.type==W){var Z=this.docSelection.createRange();if(Z.length){ab=c.getDocument(Z.item(0)).body.createTextRange()}}}if(ab){var aa=ab.body.createTextRange();aa.select();this.docSelection.empty()}}}catch(Y){}I(this)};a.addRange=function(Y){if(this.docSelection.type==W){z(this,Y)}else{e.rangeToTextRange(Y).select();this._ranges[0]=Y;this.rangeCount=1;this.isCollapsed=this._ranges[0].collapsed;b(this,Y,false)}};a.setRanges=function(Y){this.removeAllRanges();var Z=Y.length;if(Z>1){i(this,Y)}else{if(Z){this.addRange(Y[0])}}}}else{d.fail("No means of selecting a Range or TextRange was found");return false}}a.getRangeAt=function(Y){if(Y<0||Y>=this.rangeCount){throw new P("INDEX_SIZE_ERR")}else{return this._ranges[Y]}};var G;if(u){G=function(Z){var Y;if(g.isSelectionValid(Z.win)){Y=Z.docSelection.createRange()}else{Y=c.getBody(Z.win.document).createTextRange();Y.collapse(true)}if(Z.docSelection.type==W){t(Z)}else{if(H(Y)){J(Z,Y)}else{I(Z)}}}}else{if(l.isHostMethod(N,"getRangeAt")&&typeof N.rangeCount=="number"){G=function(aa){if(f&&O&&aa.docSelection.type==W){t(aa)}else{aa._ranges.length=aa.rangeCount=aa.nativeSelection.rangeCount;if(aa.rangeCount){for(var Z=0,Y=aa.rangeCount;Z<Y;++Z){aa._ranges[Z]=new g.WrappedRange(aa.nativeSelection.getRangeAt(Z))}b(aa,aa._ranges[aa.rangeCount-1],r(aa.nativeSelection));aa.isCollapsed=n(aa)}else{I(aa)}}}}else{if(L&&typeof N.isCollapsed==F&&typeof D.collapsed==F&&g.features.implementsDomRange){G=function(aa){var Y,Z=aa.nativeSelection;if(Z.anchorNode){Y=o(Z,0);aa._ranges=[Y];aa.rangeCount=1;v(aa);aa.isCollapsed=n(aa)}else{I(aa)}}}else{d.fail("No means of obtaining a Range or TextRange from the user's selection was found");return false}}}a.refresh=function(Z){var Y=Z?this._ranges.slice(0):null;G(this);if(Z){var aa=Y.length;if(aa!=this._ranges.length){return false}while(aa--){if(!S.rangesEqual(Y[aa],this._ranges[aa])){return false}}return true}};var B=function(ac,aa){var Z=ac.getAllRanges(),ad=false;ac.removeAllRanges();for(var ab=0,Y=Z.length;ab<Y;++ab){if(ad||aa!==Z[ab]){ac.addRange(Z[ab])}else{ad=true}}if(!ac.rangeCount){I(ac)}};if(f){a.removeRange=function(ac){if(this.docSelection.type==W){var aa=this.docSelection.createRange();var Y=M(ac);var ag=c.getDocument(aa.item(0));var ae=c.getBody(ag).createControlRange();var Z,af=false;for(var ab=0,ad=aa.length;ab<ad;++ab){Z=aa.item(ab);if(Z!==Y||af){ae.add(aa.item(ab))}else{af=true}}ae.select();t(this)}else{B(this,ac)}}}else{a.removeRange=function(Y){B(this,Y)}}var r;if(!u&&L&&g.features.implementsDomRange){r=function(Z){var Y=false;if(Z.anchorNode){Y=(c.comparePoints(Z.anchorNode,Z.anchorOffset,Z.focusNode,Z.focusOffset)==1)}return Y};a.isBackwards=function(){return r(this)}}else{r=a.isBackwards=function(){return false}}a.toString=function(){var aa=[];for(var Z=0,Y=this.rangeCount;Z<Y;++Z){aa[Z]=""+this._ranges[Z]}return aa.join("")};function T(Z,Y){if(Z.anchorNode&&(c.getDocument(Z.anchorNode)!==c.getDocument(Y))){throw new P("WRONG_DOCUMENT_ERR")}}a.collapse=function(Z,aa){T(this,Z);var Y=g.createRange(c.getDocument(Z));Y.collapseToPoint(Z,aa);this.removeAllRanges();this.addRange(Y);this.isCollapsed=true};a.collapseToStart=function(){if(this.rangeCount){var Y=this._ranges[0];this.collapse(Y.startContainer,Y.startOffset)}else{throw new P("INVALID_STATE_ERR")}};a.collapseToEnd=function(){if(this.rangeCount){var Y=this._ranges[this.rangeCount-1];this.collapse(Y.endContainer,Y.endOffset)}else{throw new P("INVALID_STATE_ERR")}};a.selectAllChildren=function(Z){T(this,Z);var Y=g.createRange(c.getDocument(Z));Y.selectNodeContents(Z);this.removeAllRanges();this.addRange(Y)};a.deleteFromDocument=function(){if(f&&O&&this.docSelection.type==W){var ac=this.docSelection.createRange();var ab;while(ac.length){ab=ac.item(0);ac.remove(ab);ab.parentNode.removeChild(ab)}this.refresh()}else{if(this.rangeCount){var Z=this.getAllRanges();this.removeAllRanges();for(var aa=0,Y=Z.length;aa<Y;++aa){Z[aa].deleteContents()}this.addRange(Z[Y-1])}}};a.getAllRanges=function(){return this._ranges.slice(0)};a.setSingleRange=function(Y){this.setRanges([Y])};a.containsNode=function(ab,Z){for(var aa=0,Y=this._ranges.length;aa<Y;++aa){if(this._ranges[aa].containsNode(ab,Z)){return true}}return false};a.toHtml=function(){var ab="";if(this.rangeCount){var Z=S.getRangeDocument(this._ranges[0]).createElement("div");for(var aa=0,Y=this._ranges.length;aa<Y;++aa){Z.appendChild(this._ranges[aa].cloneContents())}ab=Z.innerHTML}return ab};function s(ae){var ad=[];var ab=new A(ae.anchorNode,ae.anchorOffset);var Z=new A(ae.focusNode,ae.focusOffset);var aa=(typeof ae.getName=="function")?ae.getName():"Selection";if(typeof ae.rangeCount!="undefined"){for(var ac=0,Y=ae.rangeCount;ac<Y;++ac){ad[ac]=S.inspect(ae.getRangeAt(ac))}}return"["+aa+"(Ranges: "+ad.join(", ")+")(anchor: "+ab.inspect()+", focus: "+Z.inspect()+"]"}a.getName=function(){return"WrappedSelection"};a.inspect=function(){return s(this)};a.detach=function(){this.win[V]=null;this.win=this.anchorNode=this.focusNode=null};C.inspect=s;g.Selection=C;g.selectionPrototype=a;g.addCreateMissingNativeApiListener(function(Y){if(typeof Y.getSelection=="undefined"){Y.getSelection=function(){return g.getSelection(this)}}Y=null})});var Base=function(){};Base.extend=function(b,e){var f=Base.prototype.extend;Base._prototyping=true;var d=new this;f.call(d,b);d.base=function(){};delete Base._prototyping;var c=d.constructor;var a=d.constructor=function(){if(!Base._prototyping){if(this._constructing||this.constructor==a){this._constructing=true;c.apply(this,arguments);delete this._constructing}else{if(arguments[0]!=null){return(arguments[0].extend||f).call(arguments[0],d)}}}};a.ancestor=this;a.extend=this.extend;a.forEach=this.forEach;a.implement=this.implement;a.prototype=d;a.toString=this.toString;a.valueOf=function(g){return(g=="object")?a:c.valueOf()};f.call(a,e);if(typeof a.init=="function"){a.init()}return a};Base.prototype={extend:function(b,h){if(arguments.length>1){var e=this[b];if(e&&(typeof h=="function")&&(!e.valueOf||e.valueOf()!=h.valueOf())&&/\bbase\b/.test(h)){var a=h.valueOf();h=function(){var k=this.base||Base.prototype.base;this.base=e;var i=a.apply(this,arguments);this.base=k;return i};h.valueOf=function(i){return(i=="object")?h:a};h.toString=Base.toString}this[b]=h}else{if(b){var g=Base.prototype.extend;if(!Base._prototyping&&typeof this!="function"){g=this.extend||g}var d={toSource:null};var f=["constructor","toString","valueOf"];var c=Base._prototyping?0:1;while(j=f[c++]){if(b[j]!=d[j]){g.call(this,j,b[j])}}for(var j in b){if(!d[j]){g.call(this,j,b[j])}}}}return this}};Base=Base.extend({constructor:function(){this.extend(arguments[0])}},{ancestor:Object,version:"1.1",forEach:function(a,d,c){for(var b in a){if(this.prototype[b]===undefined){d.call(c,a[b],b,a)}}},implement:function(){for(var a=0;a<arguments.length;a++){if(typeof arguments[a]=="function"){arguments[a](this.prototype)}else{this.prototype.extend(arguments[a])}}return this},toString:function(){return String(this.valueOf())}});wysihtml5.browser=(function(){var f=navigator.userAgent,e=document.createElement("div"),c=f.indexOf("MSIE")!==-1&&f.indexOf("Opera")===-1,a=f.indexOf("Gecko")!==-1&&f.indexOf("KHTML")===-1,d=f.indexOf("AppleWebKit/")!==-1,g=f.indexOf("Chrome/")!==-1,b=f.indexOf("Opera/")!==-1;function h(i){return((/ipad|iphone|ipod/.test(i)&&i.match(/ os (\d+).+? like mac os x/))||[,0])[1]}return{USER_AGENT:f,supported:function(){var k=this.USER_AGENT.toLowerCase(),m="contentEditable" in e,i=document.execCommand&&document.queryCommandSupported&&document.queryCommandState,j=document.querySelector&&document.querySelectorAll,l=(this.isIos()&&h(k)<5)||k.indexOf("opera mobi")!==-1||k.indexOf("hpwos/")!==-1;return m&&i&&j&&!l},isTouchDevice:function(){return this.supportsEvent("touchmove")},isIos:function(){var i=this.USER_AGENT.toLowerCase();return i.indexOf("webkit")!==-1&&i.indexOf("mobile")!==-1},supportsSandboxedIframes:function(){return c},throwsMixedContentWarningWhenIframeSrcIsEmpty:function(){return !("querySelector" in document)},displaysCaretInEmptyContentEditableCorrectly:function(){return !a},hasCurrentStyleProperty:function(){return"currentStyle" in e},insertsLineBreaksOnReturn:function(){return a},supportsPlaceholderAttributeOn:function(i){return"placeholder" in i},supportsEvent:function(i){return"on"+i in e||(function(){e.setAttribute("on"+i,"return;");return typeof(e["on"+i])==="function"})()},supportsEventsInIframeCorrectly:function(){return !b},firesOnDropOnlyWhenOnDragOverIsCancelled:function(){return d||a},supportsDataTransfer:function(){try{return d&&(window.Clipboard||window.DataTransfer).prototype.getData}catch(i){return false}},supportsHTML5Tags:function(k){var j=k.createElement("div"),i="<article>foo</article>";j.innerHTML=i;return j.innerHTML.toLowerCase()===i},supportsCommand:(function(){var j={formatBlock:c,insertUnorderedList:c||b,insertOrderedList:c||b};var i={insertHTML:a};return function(l,n){var o=j[n];if(!o){try{return l.queryCommandSupported(n)}catch(m){}try{return l.queryCommandEnabled(n)}catch(k){return !!i[n]}}return false}})(),doesAutoLinkingInContentEditable:function(){return c},canDisableAutoLinking:function(){return this.supportsCommand(document,"AutoUrlDetect")},clearsContentEditableCorrectly:function(){return a||b||d},supportsGetAttributeCorrectly:function(){var i=document.createElement("td");return i.getAttribute("rowspan")!="1"},canSelectImagesInContentEditable:function(){return a||c||b},clearsListsInContentEditableCorrectly:function(){return a||c||d},autoScrollsToCaret:function(){return !d},autoClosesUnclosedTags:function(){var k=e.cloneNode(false),i,j;k.innerHTML="<p><div></div>";j=k.innerHTML.toLowerCase();i=j==="<p></p><div></div>"||j==="<p><div></div></p>";this.autoClosesUnclosedTags=function(){return i};return i},supportsNativeGetElementsByClassName:function(){return String(document.getElementsByClassName).indexOf("[native code]")!==-1},supportsSelectionModify:function(){return"getSelection" in window&&"modify" in window.getSelection()},supportsClassList:function(){return"classList" in e},needsSpaceAfterLineBreak:function(){return b},supportsSpeechApiOn:function(i){var j=f.match(/Chrome\/(\d+)/)||[,0];return j[1]>=11&&("onwebkitspeechchange" in i||"speech" in i)},crashesWhenDefineProperty:function(i){return c&&(i==="XMLHttpRequest"||i==="XDomainRequest")},doesAsyncFocus:function(){return c},hasProblemsSettingCaretAfterImg:function(){return c},hasUndoInContextMenu:function(){return a||g||b}}})();wysihtml5.lang.array=function(a){return{contains:function(d){if(a.indexOf){return a.indexOf(d)!==-1}else{for(var b=0,c=a.length;b<c;b++){if(a[b]===d){return true}}return false}},without:function(b){b=wysihtml5.lang.array(b);var d=[],c=0,e=a.length;for(;c<e;c++){if(!b.contains(a[c])){d.push(a[c])}}return d},get:function(){var c=0,d=a.length,b=[];for(;c<d;c++){b.push(a[c])}return b}}};wysihtml5.lang.Dispatcher=Base.extend({observe:function(a,b){this.events=this.events||{};this.events[a]=this.events[a]||[];this.events[a].push(b);return this},on:function(){return this.observe.apply(this,wysihtml5.lang.array(arguments).get())},fire:function(b,d){this.events=this.events||{};var a=this.events[b]||[],c=0;for(;c<a.length;c++){a[c].call(this,d)}return this},stopObserving:function(b,d){this.events=this.events||{};var c=0,a,e;if(b){a=this.events[b]||[],e=[];for(;c<a.length;c++){if(a[c]!==d&&d){e.push(a[c])}}this.events[b]=e}else{this.events={}}return this}});wysihtml5.lang.object=function(a){return{merge:function(b){for(var c in b){a[c]=b[c]}return this},get:function(){return a},clone:function(){var b={},c;for(c in a){b[c]=a[c]}return b},isArray:function(){return Object.prototype.toString.call(a)==="[object Array]"}}};(function(){var b=/^\s+/,a=/\s+$/;wysihtml5.lang.string=function(c){c=String(c);return{trim:function(){return c.replace(b,"").replace(a,"")},interpolate:function(e){for(var d in e){c=this.replace("#{"+d+"}").by(e[d])}return c},replace:function(d){return{by:function(e){return c.split(d).join(e)}}}}}})();(function(l){var j=l.lang.array(["CODE","PRE","A","SCRIPT","HEAD","TITLE","STYLE"]),k=/((https?:\/\/|www\.)[^\s<]{3,})/gi,e=/([^\w\/\-](,?))$/i,c=100,f={")":"(","]":"[","}":"{"};function b(m){if(i(m)){return m}if(m===m.ownerDocument.documentElement){m=m.ownerDocument.body}return a(m)}function g(m){return m.replace(k,function(p,o){var r=(o.match(e)||[])[1]||"",n=f[r];o=o.replace(e,"");if(o.split(n).length>o.split(r).length){o=o+r;r=""}var q=o,s=o;if(o.length>c){s=s.substr(0,c)+"..."}if(q.substr(0,4)==="www."){q="http://"+q}return'<a href="'+q+'">'+s+"</a>"+r})}function d(n){var m=n._wysihtml5_tempElement;if(!m){m=n._wysihtml5_tempElement=n.createElement("div")}return m}function h(o){var n=o.parentNode,m=d(n.ownerDocument);m.innerHTML="<span></span>"+g(o.data);m.removeChild(m.firstChild);while(m.firstChild){n.insertBefore(m.firstChild,o)}n.removeChild(o)}function i(m){var n;while(m.parentNode){m=m.parentNode;n=m.nodeName;if(j.contains(n)){return true}else{if(n==="body"){return false}}}return false}function a(n){if(j.contains(n.nodeName)){return}if(n.nodeType===l.TEXT_NODE&&n.data.match(k)){h(n);return}var p=l.lang.array(n.childNodes).get(),o=p.length,m=0;for(;m<o;m++){a(p[m])}return n}l.dom.autoLink=b;l.dom.autoLink.URL_REG_EXP=k})(wysihtml5);(function(c){var b=c.browser.supportsClassList(),a=c.dom;a.addClass=function(d,e){if(b){return d.classList.add(e)}if(a.hasClass(d,e)){return}d.className+=" "+e};a.removeClass=function(d,e){if(b){return d.classList.remove(e)}d.className=d.className.replace(new RegExp("(^|\\s+)"+e+"(\\s+|$)")," ")};a.hasClass=function(d,e){if(b){return d.classList.contains(e)}var f=d.className;return(f.length>0&&(f==e||new RegExp("(^|\\s)"+e+"(\\s|$)").test(f)))}})(wysihtml5);wysihtml5.dom.contains=(function(){var a=document.documentElement;if(a.contains){return function(b,c){if(c.nodeType!==wysihtml5.ELEMENT_NODE){c=c.parentNode}return b!==c&&b.contains(c)}}else{if(a.compareDocumentPosition){return function(b,c){return !!(b.compareDocumentPosition(c)&16)}}}})();wysihtml5.dom.convertToList=(function(){function b(f,e){var d=f.createElement("li");e.appendChild(d);return d}function c(e,d){return e.createElement(d)}function a(f,j){if(f.nodeName==="UL"||f.nodeName==="OL"||f.nodeName==="MENU"){return f}var l=f.ownerDocument,h=c(l,j),n=wysihtml5.lang.array(f.childNodes).get(),m=n.length,d,o,g,k,e=0;for(;e<m;e++){k=k||b(l,h);d=n[e];o=wysihtml5.dom.getStyle("display").from(d)==="block";g=d.nodeName==="BR";if(o){k=k.firstChild?b(l,h):k;k.appendChild(d);k=null;continue}if(g){k=k.firstChild?null:k;continue}k.appendChild(d)}f.parentNode.replaceChild(h,f);return h}return a})();wysihtml5.dom.copyAttributes=function(a){return{from:function(b){return{to:function(c){var f,d=0,e=a.length;for(;d<e;d++){f=a[d];if(b[f]){c[f]=b[f]}}return{andTo:arguments.callee}}}}}};(function(b){var d=["-webkit-box-sizing","-moz-box-sizing","-ms-box-sizing","box-sizing"];var c=function(e){if(a(e)){return parseInt(b.getStyle("width").from(e),10)<e.offsetWidth}return false};var a=function(f){var e=0,g=d.length;for(;e<g;e++){if(b.getStyle(d[e]).from(f)==="border-box"){return d[e]}}};b.copyStyles=function(e){return{from:function(g){if(c(g)){e=wysihtml5.lang.array(e).without(d)}var h="",j=e.length,f=0,k;for(;f<j;f++){k=e[f];h+=k+":"+b.getStyle(k).from(g)+";"}return{to:function(i){b.setStyles(h).on(i);return{andTo:arguments.callee}}}}}}})(wysihtml5.dom);(function(a){a.dom.delegate=function(c,b,d,e){return a.dom.observe(c,d,function(g){var h=g.target,f=a.lang.array(c.querySelectorAll(b));while(h&&h!==c){if(f.contains(h)){e.call(h,g);break}h=h.parentNode}})}})(wysihtml5);wysihtml5.dom.getAsDom=(function(){var a=function(g,f){var d=f.createElement("div");d.style.display="none";f.body.appendChild(d);try{d.innerHTML=g}catch(h){}f.body.removeChild(d);return d};var c=function(e){if(e._wysihtml5_supportsHTML5Tags){return}for(var d=0,f=b.length;d<f;d++){e.createElement(b[d])}e._wysihtml5_supportsHTML5Tags=true};var b=["abbr","article","aside","audio","bdi","canvas","command","datalist","details","figcaption","figure","footer","header","hgroup","keygen","mark","meter","nav","output","progress","rp","rt","ruby","svg","section","source","summary","time","track","video","wbr"];return function(f,e){e=e||document;var d;if(typeof(f)==="object"&&f.nodeType){d=e.createElement("div");d.appendChild(f)}else{if(wysihtml5.browser.supportsHTML5Tags(e)){d=e.createElement("div");d.innerHTML=f}else{c(e);d=a(f,e)}}return d}})();wysihtml5.dom.getParentElement=(function(){function a(g,f){if(!f||!f.length){return true}if(typeof(f)==="string"){return g===f}else{return wysihtml5.lang.array(f).contains(g)}}function c(f){return f.nodeType===wysihtml5.ELEMENT_NODE}function b(f,g,h){var i=(f.className||"").match(h)||[];if(!g){return !!i.length}return i[i.length-1]===g}function e(f,h,g){while(g--&&f&&f.nodeName!=="BODY"){if(a(f.nodeName,h)){return f}f=f.parentNode}return null}function d(g,j,f,i,h){while(h--&&g&&g.nodeName!=="BODY"){if(c(g)&&a(g.nodeName,j)&&b(g,f,i)){return g}g=g.parentNode}return null}return function(g,f,h){h=h||50;if(f.className||f.classRegExp){return d(g,f.nodeName,f.className,f.classRegExp,h)}else{return e(g,f.nodeName,h)}}})();wysihtml5.dom.getStyle=(function(){var b={"float":("styleFloat" in document.createElement("div").style)?"styleFloat":"cssFloat"},c=/\-[a-z]/g;function a(d){return d.replace(c,function(e){return e.charAt(1).toUpperCase()})}return function(d){return{from:function(j){if(j.nodeType!==wysihtml5.ELEMENT_NODE){return}var o=j.ownerDocument,k=b[d]||a(d),g=j.style,h=j.currentStyle,p=g[k];if(p){return p}if(h){try{return h[k]}catch(m){}}var l=o.defaultView||o.parentWindow,n=(d==="height"||d==="width")&&j.nodeName==="TEXTAREA",i,f;if(l.getComputedStyle){if(n){i=g.overflow;g.overflow="hidden"}f=l.getComputedStyle(j,null).getPropertyValue(d);if(n){g.overflow=i||""}return f}}}}})();wysihtml5.dom.hasElementWithTagName=(function(){var c={},b=1;function a(d){return d._wysihtml5_identifier||(d._wysihtml5_identifier=b++)}return function(f,e){var d=a(f)+":"+e,g=c[d];if(!g){g=c[d]=f.getElementsByTagName(e)}return g.length>0}})();(function(d){var c={},b=1;function a(e){return e._wysihtml5_identifier||(e._wysihtml5_identifier=b++)}d.dom.hasElementWithClassName=function(g,f){if(!d.browser.supportsNativeGetElementsByClassName()){return !!g.querySelector("."+f)}var e=a(g)+":"+f,h=c[e];if(!h){h=c[e]=g.getElementsByClassName(f)}return h.length>0}})(wysihtml5);wysihtml5.dom.insert=function(a){return{after:function(b){b.parentNode.insertBefore(a,b.nextSibling)},before:function(b){b.parentNode.insertBefore(a,b)},into:function(b){b.appendChild(a)}}};wysihtml5.dom.insertCSS=function(a){a=a.join("\n");return{into:function(d){var c=d.head||d.getElementsByTagName("head")[0],b=d.createElement("style");b.type="text/css";if(b.styleSheet){b.styleSheet.cssText=a}else{b.appendChild(d.createTextNode(a))}if(c){c.appendChild(b)}}}};wysihtml5.dom.observe=function(c,g,d){g=typeof(g)==="string"?[g]:g;var f,a,b=0,e=g.length;for(;b<e;b++){a=g[b];if(c.addEventListener){c.addEventListener(a,d,false)}else{f=function(h){if(!("target" in h)){h.target=h.srcElement}h.preventDefault=h.preventDefault||function(){this.returnValue=false};h.stopPropagation=h.stopPropagation||function(){this.cancelBubble=true};d.call(c,h)};c.attachEvent("on"+a,f)}}return{stop:function(){var h,j=0,k=g.length;for(;j<k;j++){h=g[j];if(c.removeEventListener){c.removeEventListener(h,d,false)}else{c.detachEvent("on"+h,f)}}}}};wysihtml5.dom.parse=(function(){var a={"1":e,"3":l},o="span",g=/\s+/,j={tags:{},classes:{}},n={};function d(u,z,p,r){wysihtml5.lang.object(n).merge(j).merge(z).get();p=p||u.ownerDocument||document;var t=p.createDocumentFragment(),q=typeof(u)==="string",s,w,v;if(q){s=wysihtml5.dom.getAsDom(u,p)}else{s=u}while(s.firstChild){v=s.firstChild;s.removeChild(v);w=f(v,r);if(w){t.appendChild(w)}}s.innerHTML="";s.appendChild(t);return q?wysihtml5.quirks.getCorrectInnerHTML(s):s}function f(v,u){var t=v.nodeType,s=v.childNodes,r=s.length,q,w=a[t],p=0;q=w&&w(v);if(!q){return null}for(p=0;p<r;p++){newChild=f(s[p],u);if(newChild){q.appendChild(newChild)}}if(u&&q.childNodes.length<=1&&q.nodeName.toLowerCase()===o&&!q.attributes.length){return q.firstChild}return q}function e(u){var t,s,r,q=n.tags,v=u.nodeName.toLowerCase(),p=u.scopeName;if(u._wysihtml5){return null}u._wysihtml5=1;if(u.className==="wysihtml5-temp"){return null}if(p&&p!="HTML"){v=p+":"+v}if("outerHTML" in u){if(!wysihtml5.browser.autoClosesUnclosedTags()&&u.nodeName==="P"&&u.outerHTML.slice(-4).toLowerCase()!=="</p>"){v="div"}}if(v in q){t=q[v];if(!t||t.remove){return null}t=typeof(t)==="string"?{rename_tag:t}:t}else{if(u.firstChild){t={rename_tag:o}}else{return null}}s=u.ownerDocument.createElement(t.rename_tag||v);b(u,s,t);u=null;return s}function b(E,p,v){var A={},L=v.set_class,C=v.add_class,H=v.set_attributes,u=v.check_attributes,t=n.classes,G=0,J=[],M=[],s=[],F=[],w,B,r,z,D,K,q;if(H){A=wysihtml5.lang.object(H).clone()}if(u){for(D in u){q=h[u[D]];if(!q){continue}K=q(i(E,D));if(typeof(K)==="string"){A[D]=K}}}if(L){J.push(L)}if(C){for(D in C){q=k[C[D]];if(!q){continue}z=q(i(E,D));if(typeof(z)==="string"){J.push(z)}}}t["_wysihtml5-temp-placeholder"]=1;F=E.getAttribute("class");if(F){J=J.concat(F.split(g))}w=J.length;for(;G<w;G++){r=J[G];if(t[r]){M.push(r)}}B=M.length;while(B--){r=M[B];if(!wysihtml5.lang.array(s).contains(r)){s.unshift(r)}}if(s.length){A["class"]=s.join(" ")}for(D in A){try{p.setAttribute(D,A[D])}catch(I){}}if(A.src){if(typeof(A.width)!=="undefined"){p.setAttribute("width",A.width)}if(typeof(A.height)!=="undefined"){p.setAttribute("height",A.height)}}}var m=!wysihtml5.browser.supportsGetAttributeCorrectly();function i(r,q){q=q.toLowerCase();var t=r.nodeName;if(t=="IMG"&&q=="src"&&c(r)===true){return r.src}else{if(m&&"outerHTML" in r){var s=r.outerHTML.toLowerCase(),p=s.indexOf(" "+q+"=")!=-1;return p?r.getAttribute(q):null}else{return r.getAttribute(q)}}}function c(p){try{return p.complete&&!p.mozMatchesSelector(":-moz-broken")}catch(q){if(p.complete&&p.readyState==="complete"){return true}}}function l(p){return p.ownerDocument.createTextNode(p.data)}var h={url:(function(){var p=/^((https?:\/\/)|(mailto:))/i;return function(q){if(!q||!q.match(p)){return null}return q.replace(p,function(r){return r.toLowerCase()})}})(),alt:(function(){var p=/[^ a-z0-9_\-]/gi;return function(q){if(!q){return""}return q.replace(p,"")}})(),numbers:(function(){var p=/\D/g;return function(q){q=(q||"").replace(p,"");return q||null}})()};var k={align_img:(function(){var p={left:"wysiwyg-float-left",right:"wysiwyg-float-right"};return function(q){return p[String(q).toLowerCase()]}})(),align_text:(function(){var p={left:"wysiwyg-text-align-left",right:"wysiwyg-text-align-right",center:"wysiwyg-text-align-center",justify:"wysiwyg-text-align-justify"};return function(q){return p[String(q).toLowerCase()]}})(),clear_br:(function(){var p={left:"wysiwyg-clear-left",right:"wysiwyg-clear-right",both:"wysiwyg-clear-both",all:"wysiwyg-clear-both"};return function(q){return p[String(q).toLowerCase()]}})(),size_font:(function(){var p={"1":"wysiwyg-font-size-xx-small","2":"wysiwyg-font-size-small","3":"wysiwyg-font-size-medium","4":"wysiwyg-font-size-large","5":"wysiwyg-font-size-x-large","6":"wysiwyg-font-size-xx-large","7":"wysiwyg-font-size-xx-large","-":"wysiwyg-font-size-smaller","+":"wysiwyg-font-size-larger"};return function(q){return p[String(q).charAt(0)]}})()};return d})();wysihtml5.dom.removeEmptyTextNodes=function(c){var b,e=wysihtml5.lang.array(c.childNodes).get(),d=e.length,a=0;for(;a<d;a++){b=e[a];if(b.nodeType===wysihtml5.TEXT_NODE&&b.data===""){b.parentNode.removeChild(b)}}};wysihtml5.dom.renameElement=function(a,b){var d=a.ownerDocument.createElement(b),c;while(c=a.firstChild){d.appendChild(c)}wysihtml5.dom.copyAttributes(["align","className"]).from(a).to(d);a.parentNode.replaceChild(d,a);return d};wysihtml5.dom.replaceWithChildNodes=function(b){if(!b.parentNode){return}if(!b.firstChild){b.parentNode.removeChild(b);return}var a=b.ownerDocument.createDocumentFragment();while(b.firstChild){a.appendChild(b.firstChild)}b.parentNode.replaceChild(a,b);b=a=null};(function(e){function c(f){return e.getStyle("display").from(f)==="block"}function d(f){return f.nodeName==="BR"}function b(g){var f=g.ownerDocument.createElement("br");g.appendChild(f)}function a(k){if(k.nodeName!=="MENU"&&k.nodeName!=="UL"&&k.nodeName!=="OL"){return}var n=k.ownerDocument,l=n.createDocumentFragment(),g=k.previousSibling,m,h,i,j,f;if(g&&!c(g)){b(l)}while(f=k.firstChild){h=f.lastChild;while(m=f.firstChild){i=m===h;j=i&&!c(m)&&!d(m);l.appendChild(m);if(j){b(l)}}f.parentNode.removeChild(f)}k.parentNode.replaceChild(l,k)}e.resolveList=a})(wysihtml5.dom);(function(e){var d=document,c=["parent","top","opener","frameElement","frames","localStorage","globalStorage","sessionStorage","indexedDB"],b=["open","close","openDialog","showModalDialog","alert","confirm","prompt","openDatabase","postMessage","XMLHttpRequest","XDomainRequest"],a=["referrer","write","open","close"];e.dom.Sandbox=Base.extend({constructor:function(g,f){this.callback=g||e.EMPTY_FUNCTION;this.config=e.lang.object({}).merge(f).get();this.iframe=this._createIframe()},insertInto:function(f){if(typeof(f)==="string"){f=d.getElementById(f)}f.appendChild(this.iframe)},getIframe:function(){return this.iframe},getWindow:function(){this._readyError()},getDocument:function(){this._readyError()},destroy:function(){var f=this.getIframe();f.parentNode.removeChild(f)},_readyError:function(){throw new Error("wysihtml5.Sandbox: Sandbox iframe isn't loaded yet")},_createIframe:function(){var g=this,f=d.createElement("iframe");f.className="wysihtml5-sandbox";e.dom.setAttributes({security:"restricted",allowtransparency:"true",frameborder:0,width:0,height:0,marginwidth:0,marginheight:0}).on(f);if(e.browser.throwsMixedContentWarningWhenIframeSrcIsEmpty()){f.src="javascript:'<html></html>'"}f.onload=function(){f.onreadystatechange=f.onload=null;g._onLoadIframe(f)};f.onreadystatechange=function(){if(/loaded|complete/.test(f.readyState)){f.onreadystatechange=f.onload=null;g._onLoadIframe(f)}};return f},_onLoadIframe:function(h){if(!e.dom.contains(d.documentElement,h)){return}var l=this,f=h.contentWindow,m=h.contentWindow.document,n=d.characterSet||d.charset||"utf-8",k=this._getHtml({charset:n,stylesheets:this.config.stylesheets});m.open("text/html","replace");m.write(k);m.close();this.getWindow=function(){return h.contentWindow};this.getDocument=function(){return h.contentWindow.document};f.onerror=function(o,p,i){throw new Error("wysihtml5.Sandbox: "+o,p,i)};if(!e.browser.supportsSandboxedIframes()){var g,j;for(g=0,j=c.length;g<j;g++){this._unset(f,c[g])}for(g=0,j=b.length;g<j;g++){this._unset(f,b[g],e.EMPTY_FUNCTION)}for(g=0,j=a.length;g<j;g++){this._unset(m,a[g])}this._unset(m,"cookie","",true)}this.loaded=true;setTimeout(function(){l.callback(l)},0)},_getHtml:function(j){var k=j.stylesheets,g="",f=0,h;k=typeof(k)==="string"?[k]:k;if(k){h=k.length;for(;f<h;f++){g+='<link rel="stylesheet" href="'+k[f]+'">'}}j.stylesheets=g;return e.lang.string('<!DOCTYPE html><html><head><meta charset="#{charset}">#{stylesheets}</head><body></body></html>').interpolate(j)},_unset:function(g,i,h,k){try{g[i]=h}catch(j){}try{g.__defineGetter__(i,function(){return h})}catch(j){}if(k){try{g.__defineSetter__(i,function(){})}catch(j){}}if(!e.browser.crashesWhenDefineProperty(i)){try{var f={get:function(){return h}};if(k){f.set=function(){}}Object.defineProperty(g,i,f)}catch(j){}}}})})(wysihtml5);(function(){var a={className:"class"};wysihtml5.dom.setAttributes=function(b){return{on:function(d){for(var c in b){d.setAttribute(a[c]||c,b[c])}}}}})();wysihtml5.dom.setStyles=function(a){return{on:function(c){var d=c.style;if(typeof(a)==="string"){d.cssText+=";"+a;return}for(var b in a){if(b==="float"){d.cssFloat=a[b];d.styleFloat=a[b]}else{d[b]=a[b]}}}}};(function(a){a.simulatePlaceholder=function(d,b,c){var e="placeholder",f=function(){if(b.hasPlaceholderSet()){b.clear()}a.removeClass(b.element,e)},g=function(){if(b.isEmpty()){b.setValue(c);a.addClass(b.element,e)}};d.observe("set_placeholder",g).observe("unset_placeholder",f).observe("focus:composer",f).observe("paste:composer",f).observe("blur:composer",g);g()}})(wysihtml5.dom);(function(b){var a=document.documentElement;if("textContent" in a){b.setTextContent=function(c,d){c.textContent=d};b.getTextContent=function(c){return c.textContent}}else{if("innerText" in a){b.setTextContent=function(c,d){c.innerText=d};b.getTextContent=function(c){return c.innerText}}else{b.setTextContent=function(c,d){c.nodeValue=d};b.getTextContent=function(c){return c.nodeValue}}}})(wysihtml5.dom);wysihtml5.quirks.cleanPastedHTML=(function(){var a={"a u":wysihtml5.dom.replaceWithChildNodes};function b(l,m,d){m=m||a;d=d||l.ownerDocument||document;var h,e=typeof(l)==="string",c,k,n,g,f=0;if(e){h=wysihtml5.dom.getAsDom(l,d)}else{h=l}for(g in m){k=h.querySelectorAll(g);c=m[g];n=k.length;for(;f<n;f++){c(k[f])}}k=l=m=null;return e?h.innerHTML:h}return b})();(function(b){var a=b.dom;b.quirks.ensureProperClearing=(function(){var c=function(e){var d=this;setTimeout(function(){var f=d.innerHTML.toLowerCase();if(f=="<p>&nbsp;</p>"||f=="<p>&nbsp;</p><p>&nbsp;</p>"){d.innerHTML=""}},0)};return function(d){a.observe(d.element,["cut","keydown"],c)}})();b.quirks.ensureProperClearingOfLists=(function(){var d=["OL","UL","MENU"];var c=function(g,e){if(!e.firstChild||!b.lang.array(d).contains(e.firstChild.nodeName)){return}var i=a.getParentElement(g,{nodeName:d});if(!i){return}var h=i==e.firstChild;if(!h){return}var j=i.childNodes.length<=1;if(!j){return}var f=i.firstChild?i.firstChild.innerHTML==="":true;if(!f){return}i.parentNode.removeChild(i)};return function(e){a.observe(e.element,"keydown",function(g){if(g.keyCode!==b.BACKSPACE_KEY){return}var f=e.selection.getSelectedNode();c(f,e.element)})}})()})(wysihtml5);(function(b){var a="%7E";b.quirks.getCorrectInnerHTML=function(e){var j=e.innerHTML;if(j.indexOf(a)===-1){return j}var g=e.querySelectorAll("[href*='~'], [src*='~']"),c,h,f,d;for(d=0,f=g.length;d<f;d++){c=g[d].href||g[d].src;h=b.lang.string(c).replace("~").by(a);j=b.lang.string(j).replace(h).by(c)}return j}})(wysihtml5);(function(d){var c=d.dom,b=["LI","P","H1","H2","H3","H4","H5","H6"],a=["UL","OL","MENU"];d.quirks.insertLineBreakOnReturn=function(g){function e(j){var h=c.getParentElement(j,{nodeName:["P","DIV"]},2);if(!h){return}var i=document.createTextNode(d.INVISIBLE_SPACE);c.insert(i).before(h);c.replaceWithChildNodes(h);g.selection.selectNode(i)}function f(i){var k=i.keyCode;if(i.shiftKey||(k!==d.ENTER_KEY&&k!==d.BACKSPACE_KEY)){return}var h=i.target,j=g.selection.getSelectedNode(),l=c.getParentElement(j,{nodeName:b},4);if(l){if(l.nodeName==="LI"&&(k===d.ENTER_KEY||k===d.BACKSPACE_KEY)){setTimeout(function(){var n=g.selection.getSelectedNode(),m,o;if(!n){return}m=c.getParentElement(n,{nodeName:a},2);if(m){return}e(n)},0)}else{if(l.nodeName.match(/H[1-6]/)&&k===d.ENTER_KEY){setTimeout(function(){e(g.selection.getSelectedNode())},0)}}return}if(k===d.ENTER_KEY&&!d.browser.insertsLineBreaksOnReturn()){g.commands.exec("insertLineBreak");i.preventDefault()}}c.observe(g.element.ownerDocument,"keydown",f)}})(wysihtml5);(function(b){var a="wysihtml5-quirks-redraw";b.quirks.redraw=function(c){b.dom.addClass(c,a);b.dom.removeClass(c,a);try{var f=c.ownerDocument;f.execCommand("italic",false,null);f.execCommand("italic",false,null)}catch(d){}}})(wysihtml5);(function(c){var b=c.dom;function a(d){var e=0;if(d.parentNode){do{e+=d.offsetTop||0;d=d.offsetParent}while(d)}return e}c.Selection=Base.extend({constructor:function(d){window.rangy.init();this.editor=d;this.composer=d.composer;this.doc=this.composer.doc},getBookmark:function(){var d=this.getRange();return d&&d.cloneRange()},setBookmark:function(d){if(!d){return}this.setSelection(d)},setBefore:function(e){var d=rangy.createRange(this.doc);d.setStartBefore(e);d.setEndBefore(e);return this.setSelection(d)},setAfter:function(e){var d=rangy.createRange(this.doc);d.setStartAfter(e);d.setEndAfter(e);return this.setSelection(d)},selectNode:function(d){var g=rangy.createRange(this.doc),j=d.nodeType===c.ELEMENT_NODE,l="canHaveHTML" in d?d.canHaveHTML:(d.nodeName!=="IMG"),i=j?d.innerHTML:d.data,f=(i===""||i===c.INVISIBLE_SPACE),k=b.getStyle("display").from(d),m=(k==="block"||k==="list-item");if(f&&j&&l){try{d.innerHTML=c.INVISIBLE_SPACE}catch(h){}}if(l){g.selectNodeContents(d)}else{g.selectNode(d)}if(l&&f&&j){g.collapse(m)}else{if(l&&f){g.setStartAfter(d);g.setEndAfter(d)}}this.setSelection(g)},getSelectedNode:function(e){var f,d;if(e&&this.doc.selection&&this.doc.selection.type==="Control"){d=this.doc.selection.createRange();if(d&&d.length){return d.item(0)}}f=this.getSelection(this.doc);if(f.focusNode===f.anchorNode){return f.focusNode}else{d=this.getRange(this.doc);return d?d.commonAncestorContainer:this.doc.body}},executeAndRestore:function(d,n){var h=this.doc.body,f=n&&h.scrollTop,i=n&&h.scrollLeft,l="_wysihtml5-temp-placeholder",o='<span class="'+l+'">'+c.INVISIBLE_SPACE+"</span>",g=this.getRange(this.doc),m;if(!g){d(h,h);return}var e=g.createContextualFragment(o);g.insertNode(e);try{d(g.startContainer,g.endContainer)}catch(k){setTimeout(function(){throw k},0)}caretPlaceholder=this.doc.querySelector("."+l);if(caretPlaceholder){m=rangy.createRange(this.doc);m.selectNode(caretPlaceholder);m.deleteContents();this.setSelection(m)}else{h.focus()}if(n){h.scrollTop=f;h.scrollLeft=i}try{caretPlaceholder.parentNode.removeChild(caretPlaceholder)}catch(j){}},executeAndRestoreSimple:function(d){var h=this.getRange(),i=this.doc.body,p,f,g,l,j;if(!h){d(i,i);return}l=h.getNodes([3]);f=l[0]||h.startContainer;g=l[l.length-1]||h.endContainer;j={collapsed:h.collapsed,startContainer:f,startOffset:f===h.startContainer?h.startOffset:0,endContainer:g,endOffset:g===h.endContainer?h.endOffset:g.length};try{d(h.startContainer,h.endContainer)}catch(k){setTimeout(function(){throw k},0)}p=rangy.createRange(this.doc);try{p.setStart(j.startContainer,j.startOffset)}catch(o){}try{p.setEnd(j.endContainer,j.endOffset)}catch(n){}try{this.setSelection(p)}catch(m){}},insertHTML:function(e){var d=rangy.createRange(this.doc),g=d.createContextualFragment(e),f=g.lastChild;this.insertNode(g);if(f){this.setAfter(f)}},insertNode:function(e){var d=this.getRange();if(d){d.insertNode(e)}},surround:function(f){var d=this.getRange();if(!d){return}try{d.surroundContents(f);this.selectNode(f)}catch(g){f.appendChild(d.extractContents());d.insertNode(f)}},scrollIntoView:function(){var g=this.doc,f=g.documentElement.scrollHeight>g.documentElement.offsetHeight,d=g._wysihtml5ScrollIntoViewElement=g._wysihtml5ScrollIntoViewElement||(function(){var h=g.createElement("span");h.innerHTML=c.INVISIBLE_SPACE;return h})(),e;if(f){this.insertNode(d);e=a(d);d.parentNode.removeChild(d);if(e>g.body.scrollTop){g.body.scrollTop=e}}},selectLine:function(){if(c.browser.supportsSelectionModify()){this._selectLine_W3C()}else{if(this.doc.selection){this._selectLine_MSIE()}}},_selectLine_W3C:function(){var e=this.doc.defaultView,d=e.getSelection();d.modify("extend","left","lineboundary");d.modify("extend","right","lineboundary")},_selectLine_MSIE:function(){var l=this.doc.selection.createRange(),h=l.boundingTop,p=l.boundingHeight,k=this.doc.body.scrollWidth,e,d,m,g,f;if(!l.moveToPoint){return}if(h===0){m=this.doc.createElement("span");this.insertNode(m);h=m.offsetTop;m.parentNode.removeChild(m)}h+=1;for(g=-10;g<k;g+=2){try{l.moveToPoint(g,h);break}catch(o){}}e=h;d=this.doc.selection.createRange();for(f=k;f>=0;f--){try{d.moveToPoint(f,e);break}catch(n){}}l.setEndPoint("EndToEnd",d);l.select()},getText:function(){var d=this.getSelection();return d?d.toString():""},getNodes:function(d,f){var e=this.getRange();if(e){return e.getNodes([d],f)}else{return[]}},getRange:function(){var d=this.getSelection();return d&&d.rangeCount&&d.getRangeAt(0)},getSelection:function(){return rangy.getSelection(this.doc.defaultView||this.doc.parentWindow)},setSelection:function(d){var f=this.doc.defaultView||this.doc.parentWindow,e=rangy.getSelection(f);return e.setSingleRange(d)}})})(wysihtml5);(function(n,j){var h="span";var f=/\s+/g;function d(q,o,p){if(!q.className){return false}var r=q.className.match(p)||[];return r[r.length-1]===o}function i(q,o,p){if(q.className){l(q,p);q.className+=" "+o}else{q.className=o}}function l(p,o){if(p.className){p.className=p.className.replace(o,"")}}function m(p,o){return p.className.replace(f," ")==o.className.replace(f," ")}function a(p){var o=p.parentNode;while(p.firstChild){o.insertBefore(p.firstChild,p)}o.removeChild(p)}function e(u,s){if(u.attributes.length!=s.attributes.length){return false}for(var t=0,o=u.attributes.length,r,p,q;t<o;++t){r=u.attributes[t];q=r.name;if(q!="class"){p=s.attributes.getNamedItem(q);if(r.specified!=p.specified){return false}if(r.specified&&r.nodeValue!==p.nodeValue){return false}}}return true}function c(o,p){if(j.dom.isCharacterDataNode(o)){if(p==0){return !!o.previousSibling}else{if(p==o.length){return !!o.nextSibling}else{return true}}}return p>0&&p<o.childNodes.length}function b(r,p,q){var o;if(j.dom.isCharacterDataNode(p)){if(q==0){q=j.dom.getNodeIndex(p);p=p.parentNode}else{if(q==p.length){q=j.dom.getNodeIndex(p)+1;p=p.parentNode}else{o=j.dom.splitDataNode(p,q)}}}if(!o){o=p.cloneNode(false);if(o.id){o.removeAttribute("id")}var s;while((s=p.childNodes[q])){o.appendChild(s)}j.dom.insertAfter(o,p)}return(p==r)?o:b(r,o.parentNode,j.dom.getNodeIndex(o))}function g(o){this.isElementMerge=(o.nodeType==n.ELEMENT_NODE);this.firstTextNode=this.isElementMerge?o.lastChild:o;this.textNodes=[this.firstTextNode]}g.prototype={doMerge:function(){var t=[],s,q,r;for(var p=0,o=this.textNodes.length;p<o;++p){s=this.textNodes[p];q=s.parentNode;t[p]=s.data;if(p){q.removeChild(s);if(!q.hasChildNodes()){q.parentNode.removeChild(q)}}}this.firstTextNode.data=r=t.join("");return r},getLength:function(){var p=this.textNodes.length,o=0;while(p--){o+=this.textNodes[p].length}return o},toString:function(){var q=[];for(var p=0,o=this.textNodes.length;p<o;++p){q[p]="'"+this.textNodes[p].data+"'"}return"[Merge("+q.join(",")+")]"}};function k(o,q,p,r){this.tagNames=o||[h];this.cssClass=q||"";this.similarClassRegExp=p;this.normalize=r;this.applyToAnyTagName=false}k.prototype={getAncestorWithClass:function(p){var o;while(p){o=this.cssClass?d(p,this.cssClass,this.similarClassRegExp):true;if(p.nodeType==n.ELEMENT_NODE&&j.dom.arrayContains(this.tagNames,p.tagName.toLowerCase())&&o){return p}p=p.parentNode}return false},postApply:function(C,w){var o=C[0],p=C[C.length-1];var r=[],D;var t=o,q=p;var A=0,E=p.length;var s,v;for(var u=0,z=C.length;u<z;++u){s=C[u];v=this.getAdjacentMergeableTextNode(s.parentNode,false);if(v){if(!D){D=new g(v);r.push(D)}D.textNodes.push(s);if(s===o){t=D.firstTextNode;A=t.length}if(s===p){q=D.firstTextNode;E=D.getLength()}}else{D=null}}var B=this.getAdjacentMergeableTextNode(p.parentNode,true);if(B){if(!D){D=new g(p);r.push(D)}D.textNodes.push(B)}if(r.length){for(u=0,z=r.length;u<z;++u){r[u].doMerge()}w.setStart(t,A);w.setEnd(q,E)}},getAdjacentMergeableTextNode:function(q,o){var s=(q.nodeType==n.TEXT_NODE);var p=s?q.parentNode:q;var t;var r=o?"nextSibling":"previousSibling";if(s){t=q[r];if(t&&t.nodeType==n.TEXT_NODE){return t}}else{t=p[r];if(t&&this.areElementsMergeable(q,t)){return t[o?"firstChild":"lastChild"]}}return null},areElementsMergeable:function(p,o){return j.dom.arrayContains(this.tagNames,(p.tagName||"").toLowerCase())&&j.dom.arrayContains(this.tagNames,(o.tagName||"").toLowerCase())&&m(p,o)&&e(p,o)},createContainer:function(p){var o=p.createElement(this.tagNames[0]);if(this.cssClass){o.className=this.cssClass}return o},applyToTextNode:function(q){var p=q.parentNode;if(p.childNodes.length==1&&j.dom.arrayContains(this.tagNames,p.tagName.toLowerCase())){if(this.cssClass){i(p,this.cssClass,this.similarClassRegExp)}}else{var o=this.createContainer(j.dom.getDocument(q));q.parentNode.insertBefore(o,q);o.appendChild(q)}},isRemovable:function(o){return j.dom.arrayContains(this.tagNames,o.tagName.toLowerCase())&&n.lang.string(o.className).trim()==this.cssClass},undoToTextNode:function(r,p,q){if(!p.containsNode(q)){var o=p.cloneRange();o.selectNode(q);if(o.isPointInRange(p.endContainer,p.endOffset)&&c(p.endContainer,p.endOffset)){b(q,p.endContainer,p.endOffset);p.setEndAfter(q)}if(o.isPointInRange(p.startContainer,p.startOffset)&&c(p.startContainer,p.startOffset)){q=b(q,p.startContainer,p.startOffset)}}if(this.similarClassRegExp){l(q,this.similarClassRegExp)}if(this.isRemovable(q)){a(q)}},applyToRange:function(p){var s=p.getNodes([n.TEXT_NODE]);if(!s.length){try{var r=this.createContainer(p.endContainer.ownerDocument);p.surroundContents(r);this.selectNode(p,r);return}catch(t){}}p.splitBoundaries();s=p.getNodes([n.TEXT_NODE]);if(s.length){var u;for(var q=0,o=s.length;q<o;++q){u=s[q];if(!this.getAncestorWithClass(u)){this.applyToTextNode(u)}}p.setStart(s[0],0);u=s[s.length-1];p.setEnd(u,u.length);if(this.normalize){this.postApply(s,p)}}},undoToRange:function(p){var s=p.getNodes([n.TEXT_NODE]),v,t;if(s.length){p.splitBoundaries();s=p.getNodes([n.TEXT_NODE])}else{var u=p.endContainer.ownerDocument,r=u.createTextNode(n.INVISIBLE_SPACE);p.insertNode(r);p.selectNode(r);s=[r]}for(var q=0,o=s.length;q<o;++q){v=s[q];t=this.getAncestorWithClass(v);if(t){this.undoToTextNode(v,p,t)}}if(o==1){this.selectNode(p,s[0])}else{p.setStart(s[0],0);v=s[s.length-1];p.setEnd(v,v.length);if(this.normalize){this.postApply(s,p)}}},selectNode:function(p,s){var r=s.nodeType===n.ELEMENT_NODE,o="canHaveHTML" in s?s.canHaveHTML:true,q=r?s.innerHTML:s.data,u=(q===""||q===n.INVISIBLE_SPACE);if(u&&r&&o){try{s.innerHTML=n.INVISIBLE_SPACE}catch(t){}}p.selectNodeContents(s);if(u&&r){p.collapse(false)}else{if(u){p.setStartAfter(s);p.setEndAfter(s)}}},getTextSelectedByRange:function(s,o){var p=o.cloneRange();p.selectNodeContents(s);var q=p.intersection(o);var r=q?q.toString():"";p.detach();return r},isAppliedToRange:function(p){var s=[],r,t=p.getNodes([n.TEXT_NODE]);if(!t.length){r=this.getAncestorWithClass(p.startContainer);return r?[r]:false}for(var q=0,o=t.length,u;q<o;++q){u=this.getTextSelectedByRange(t[q],p);r=this.getAncestorWithClass(t[q]);if(u!=""&&!r){return false}else{s.push(r)}}return s},toggleRange:function(o){if(this.isAppliedToRange(o)){this.undoToRange(o)}else{this.applyToRange(o)}}};n.selection.HTMLApplier=k})(wysihtml5,rangy);wysihtml5.Commands=Base.extend({constructor:function(a){this.editor=a;this.composer=a.composer;this.doc=this.composer.doc},support:function(a){return wysihtml5.browser.supportsCommand(this.doc,a)},exec:function(d,a){var c=wysihtml5.commands[d],f=c&&c.exec;this.editor.fire("beforecommand:composer");if(f){return f.call(c,this.composer,d,a)}else{try{return this.doc.execCommand(d,false,a)}catch(b){}}this.editor.fire("aftercommand:composer")},state:function(d,a){var c=wysihtml5.commands[d],f=c&&c.state;if(f){return f.call(c,this.composer,d,a)}else{try{return this.doc.queryCommandState(d)}catch(b){return false}}},value:function(c){var b=wysihtml5.commands[c],d=b&&b.value;if(d){return d.call(b,this.composer,c)}else{try{return this.doc.queryCommandValue(c)}catch(a){return null}}}});(function(b){var a;b.commands.bold={exec:function(c,d){return b.commands.formatInline.exec(c,d,"b")},state:function(d,e,c){return b.commands.formatInline.state(d,e,"b")},value:function(){return a}}})(wysihtml5);(function(f){var d,c="A",e=f.dom;function a(h,n){var m=n.length,j=0,g,l,k;for(;j<m;j++){g=n[j];l=e.getParentElement(g,{nodeName:"code"});k=e.getTextContent(g);if(k.match(e.autoLink.URL_REG_EXP)&&!l){l=e.renameElement(g,"code")}else{e.replaceWithChildNodes(g)}}}function b(g,m){var u=g.doc,r="_wysihtml5-temp-"+(+new Date()),z=/non-matching-class/g,q=0,k,h,p,t,o,n,s,v,w=m&&m.text?m.text:false,l;f.commands.formatInline.exec(g,d,c,r,z);h=u.querySelectorAll(c+"."+r);k=h.length;for(;q<k;q++){p=h[q];p.removeAttribute("class");for(l in m){p.setAttribute(l,m[l])}}n=p;if(k===1){s=e.getTextContent(p);t=!!p.querySelector("*");o=s===""||s===f.INVISIBLE_SPACE;if(!t&&o){e.setTextContent(p,w||p.href);v=u.createTextNode(" ");g.selection.setAfter(p);g.selection.insertNode(v);n=v}}g.selection.setAfter(n)}f.commands.createLink={exec:function(g,j,i){var h=this.state(g,j);if(h){g.selection.executeAndRestore(function(){a(g,h)})}else{i=typeof(i)==="object"?i:{href:i};b(g,i)}},state:function(g,h){return f.commands.formatInline.state(g,h,"A")},value:function(){return d}}})(wysihtml5);(function(c){var b,a=/wysiwyg-font-size-[a-z]+/g;c.commands.fontSize={exec:function(d,f,e){return c.commands.formatInline.exec(d,f,"span","wysiwyg-font-size-"+e,a)},state:function(d,f,e){return c.commands.formatInline.state(d,f,"span","wysiwyg-font-size-"+e,a)},value:function(){return b}}})(wysihtml5);(function(c){var b,a=/wysiwyg-color-[a-z]+/g;c.commands.foreColor={exec:function(e,f,d){return c.commands.formatInline.exec(e,f,"span","wysiwyg-color-"+d,a)},state:function(e,f,d){return c.commands.formatInline.state(e,f,"span","wysiwyg-color-"+d,a)},value:function(){return b}}})(wysihtml5);(function(h){var b,o=h.dom,a="DIV",p=["H1","H2","H3","H4","H5","H6","P","BLOCKQUOTE",a];function m(s,t,u){if(s.className){g(s,u);s.className+=" "+t}else{s.className=t}}function g(s,t){s.className=s.className.replace(t,"")}function i(s){return s.nodeType===h.TEXT_NODE&&!h.lang.string(s.data).trim()}function j(t){var s=t.previousSibling;while(s&&i(s)){s=s.previousSibling}return s}function k(s){var t=s.nextSibling;while(t&&i(t)){t=t.nextSibling}return t}function f(t){var v=t.ownerDocument,u=k(t),s=j(t);if(u&&!e(u)){t.parentNode.insertBefore(v.createElement("br"),u)}if(s&&!e(s)){t.parentNode.insertBefore(v.createElement("br"),t)}}function c(t){var u=k(t),s=j(t);if(u&&l(u)){u.parentNode.removeChild(u)}if(s&&l(s)){s.parentNode.removeChild(s)}}function n(t){var s=t.lastChild;if(s&&l(s)){s.parentNode.removeChild(s)}}function l(s){return s.nodeName==="BR"}function e(s){if(l(s)){return true}if(o.getStyle("display").from(s)==="block"){return true}return false}function d(u,v,w,t){if(t){var s=o.observe(u,"DOMNodeInserted",function(A){var B=A.target,z;if(B.nodeType!==h.ELEMENT_NODE){return}z=o.getStyle("display").from(B);if(z.substr(0,6)!=="inline"){B.className+=" "+t}})}u.execCommand(v,false,w);if(s){s.stop()}}function q(s,t){s.selection.selectLine();s.selection.surround(t);c(t);n(t);s.selection.selectNode(t)}function r(s){return !!h.lang.string(s.className).trim()}h.commands.formatBlock={exec:function(s,A,B,t,v){var w=s.doc,z=this.state(s,A,B,t,v),u;B=typeof(B)==="string"?B.toUpperCase():B;if(z){s.selection.executeAndRestoreSimple(function(){if(v){g(z,v)}var C=r(z);if(!C&&z.nodeName===(B||a)){f(z);o.replaceWithChildNodes(z)}else{if(C){o.renameElement(z,a)}}});return}if(B===null||h.lang.array(p).contains(B)){u=s.selection.getSelectedNode();z=o.getParentElement(u,{nodeName:p});if(z){s.selection.executeAndRestoreSimple(function(){if(B){z=o.renameElement(z,B)}if(t){m(z,t,v)}});return}}if(s.commands.support(A)){d(w,A,B||a,t);return}z=w.createElement(B||a);if(t){z.className=t}q(s,z)},state:function(s,w,z,t,v){z=typeof(z)==="string"?z.toUpperCase():z;var u=s.selection.getSelectedNode();return o.getParentElement(u,{nodeName:z,className:t,classRegExp:v})},value:function(){return b}}})(wysihtml5);(function(f){var c,d={strong:"b",em:"i",b:"strong",i:"em"},e={};function b(h){var g=d[h];return g?[h.toLowerCase(),g.toLowerCase()]:[h.toLowerCase()]}function a(h,i,j){var g=h+":"+i;if(!e[g]){e[g]=new f.selection.HTMLApplier(b(h),i,j,true)}return e[g]}f.commands.formatInline={exec:function(h,l,i,j,k){var g=h.selection.getRange();if(!g){return false}a(i,j,k).toggleRange(g);h.selection.setSelection(g)},state:function(h,m,i,j,k){var l=h.doc,n=d[i]||i,g;if(!f.dom.hasElementWithTagName(l,i)&&!f.dom.hasElementWithTagName(l,n)){return false}if(j&&!f.dom.hasElementWithClassName(l,j)){return false}g=h.selection.getRange();if(!g){return false}return a(i,j,k).isAppliedToRange(g)},value:function(){return c}}})(wysihtml5);(function(b){var a;b.commands.insertHTML={exec:function(c,e,d){if(c.commands.support(e)){c.doc.execCommand(e,false,d)}else{c.selection.insertHTML(d)}},state:function(){return false},value:function(){return a}}})(wysihtml5);(function(b){var a="IMG";b.commands.insertImage={exec:function(c,k,f){f=typeof(f)==="object"?f:{src:f};var h=c.doc,g=this.state(c),j,d,e;if(g){c.selection.setBefore(g);e=g.parentNode;e.removeChild(g);b.dom.removeEmptyTextNodes(e);if(e.nodeName==="A"&&!e.firstChild){c.selection.setAfter(e);e.parentNode.removeChild(e)}b.quirks.redraw(c.element);return}g=h.createElement(a);for(d in f){g[d]=f[d]}c.selection.insertNode(g);if(b.browser.hasProblemsSettingCaretAfterImg()){j=h.createTextNode(b.INVISIBLE_SPACE);c.selection.insertNode(j);c.selection.setAfter(j)}else{c.selection.setAfter(g)}},state:function(d){var f=d.doc,e,g,c;if(!b.dom.hasElementWithTagName(f,a)){return false}e=d.selection.getSelectedNode();if(!e){return false}if(e.nodeName===a){return e}if(e.nodeType!==b.ELEMENT_NODE){return false}g=d.selection.getText();g=b.lang.string(g).trim();if(g){return false}c=d.selection.getNodes(b.ELEMENT_NODE,function(h){return h.nodeName==="IMG"});if(c.length!==1){return false}return c[0]},value:function(c){var d=this.state(c);return d&&d.src}}})(wysihtml5);(function(c){var b,a="<br>"+(c.browser.needsSpaceAfterLineBreak()?" ":"");c.commands.insertLineBreak={exec:function(d,e){if(d.commands.support(e)){d.doc.execCommand(e,false,null);if(!c.browser.autoScrollsToCaret()){d.selection.scrollIntoView()}}else{d.commands.exec("insertHTML",a)}},state:function(){return false},value:function(){return b}}})(wysihtml5);(function(b){var a;b.commands.insertOrderedList={exec:function(d,i){var g=d.doc,f,h,c,e;if(d.commands.support(i)){g.execCommand(i,false,null)}else{f=d.selection.getSelectedNode();e=b.dom.getParentElement(f,{nodeName:["UL","OL"]},4);if(!e){c=g.createElement("span");d.selection.surround(c);h=c.innerHTML===""||c.innerHTML===b.INVISIBLE_SPACE;d.selection.executeAndRestoreSimple(function(){e=b.dom.convertToList(c,"ol")});if(h){d.selection.selectNode(e.querySelector("li"))}return}d.selection.executeAndRestoreSimple(function(){if(e.nodeName==="OL"){b.dom.resolveList(e)}else{if(e.nodeName==="UL"||e.nodeName==="MENU"){b.dom.renameElement(e,"ol")}}})}},state:function(c,f){try{return c.doc.queryCommandState(f)}catch(d){return false}},value:function(){return a}}})(wysihtml5);(function(b){var a;b.commands.insertUnorderedList={exec:function(d,i){var g=d.doc,f,h,c,e;if(d.commands.support(i)){g.execCommand(i,false,null)}else{f=d.selection.getSelectedNode();e=b.dom.getParentElement(f,{nodeName:["UL","OL"]});if(!e){c=g.createElement("span");d.selection.surround(c);h=c.innerHTML===""||c.innerHTML===b.INVISIBLE_SPACE;d.selection.executeAndRestoreSimple(function(){e=b.dom.convertToList(c,"ul")});if(h){d.selection.selectNode(e.querySelector("li"))}return}d.selection.executeAndRestoreSimple(function(){if(e.nodeName==="UL"){b.dom.resolveList(e)}else{if(e.nodeName==="OL"||e.nodeName==="MENU"){b.dom.renameElement(e,"ul")}}})}},state:function(c,f){try{return c.doc.queryCommandState(f)}catch(d){return false}},value:function(){return a}}})(wysihtml5);(function(b){var a;b.commands.italic={exec:function(c,d){return b.commands.formatInline.exec(c,d,"i")},state:function(d,e,c){return b.commands.formatInline.state(d,e,"i")},value:function(){return a}}})(wysihtml5);(function(d){var b,c="wysiwyg-text-align-center",a=/wysiwyg-text-align-[a-z]+/g;d.commands.justifyCenter={exec:function(e,f){return d.commands.formatBlock.exec(e,"formatBlock",null,c,a)},state:function(e,f){return d.commands.formatBlock.state(e,"formatBlock",null,c,a)},value:function(){return b}}})(wysihtml5);(function(d){var b,c="wysiwyg-text-align-left",a=/wysiwyg-text-align-[a-z]+/g;d.commands.justifyLeft={exec:function(e,f){return d.commands.formatBlock.exec(e,"formatBlock",null,c,a)},state:function(e,f){return d.commands.formatBlock.state(e,"formatBlock",null,c,a)},value:function(){return b}}})(wysihtml5);(function(d){var b,c="wysiwyg-text-align-right",a=/wysiwyg-text-align-[a-z]+/g;d.commands.justifyRight={exec:function(e,f){return d.commands.formatBlock.exec(e,"formatBlock",null,c,a)},state:function(e,f){return d.commands.formatBlock.state(e,"formatBlock",null,c,a)},value:function(){return b}}})(wysihtml5);(function(d){var b,a=/wysiwyg-text-decoration-underline/g,c="wysiwyg-text-decoration-underline";d.commands.underline={exec:function(e,f){return d.commands.formatInline.exec(e,f,"span",c,a)},state:function(e,f){return d.commands.formatInline.state(e,f,"span",c,a)},value:function(){return b}}})(wysihtml5);(function(j){var f=90,h=89,i=8,b=46,a=40,g='<span id="_wysihtml5-undo" class="_wysihtml5-temp">'+j.INVISIBLE_SPACE+"</span>",e='<span id="_wysihtml5-redo" class="_wysihtml5-temp">'+j.INVISIBLE_SPACE+"</span>",d=j.dom;function c(l){var k;while(k=l.querySelector("._wysihtml5-temp")){k.parentNode.removeChild(k)}}j.UndoManager=j.lang.Dispatcher.extend({constructor:function(k){this.editor=k;this.composer=k.composer;this.element=this.composer.element;this.history=[this.composer.getValue()];this.position=1;if(this.composer.commands.support("insertHTML")){this._observe()}},_observe:function(){var n=this,p=this.composer.sandbox.getDocument(),k;d.observe(this.element,"keydown",function(s){if(s.altKey||(!s.ctrlKey&&!s.metaKey)){return}var t=s.keyCode,q=t===f&&!s.shiftKey,r=(t===f&&s.shiftKey)||(t===h);if(q){n.undo();s.preventDefault()}else{if(r){n.redo();s.preventDefault()}}});d.observe(this.element,"keydown",function(q){var r=q.keyCode;if(r===k){return}k=r;if(r===i||r===b){n.transact()}});if(j.browser.hasUndoInContextMenu()){var l,m,o=function(){c(p);clearInterval(l)};d.observe(this.element,"contextmenu",function(){o();n.composer.selection.executeAndRestoreSimple(function(){if(n.element.lastChild){n.composer.selection.setAfter(n.element.lastChild)}p.execCommand("insertHTML",false,g);p.execCommand("insertHTML",false,e);p.execCommand("undo",false,null)});l=setInterval(function(){if(p.getElementById("_wysihtml5-redo")){o();n.redo()}else{if(!p.getElementById("_wysihtml5-undo")){o();n.undo()}}},400);if(!m){m=true;d.observe(document,"mousedown",o);d.observe(p,["mousedown","paste","cut","copy"],o)}})}this.editor.observe("newword:composer",function(){n.transact()}).observe("beforecommand:composer",function(){n.transact()})},transact:function(){var m=this.history[this.position-1],k=this.composer.getValue();if(k==m){return}var l=this.history.length=this.position;if(l>a){this.history.shift();this.position--}this.position++;this.history.push(k)},undo:function(){this.transact();if(this.position<=1){return}this.set(this.history[--this.position-1]);this.editor.fire("undo:composer")},redo:function(){if(this.position>=this.history.length){return}this.set(this.history[++this.position-1]);this.editor.fire("redo:composer")},set:function(k){this.composer.setValue(k);this.editor.focus(true)}})})(wysihtml5);wysihtml5.views.View=Base.extend({constructor:function(b,c,a){this.parent=b;this.element=c;this.config=a;this._observeViewChange()},_observeViewChange:function(){var a=this;this.parent.observe("beforeload",function(){a.parent.observe("change_view",function(b){if(b===a.name){a.parent.currentView=a;a.show();setTimeout(function(){a.focus()},0)}else{a.hide()}})})},focus:function(){if(this.element.ownerDocument.querySelector(":focus")===this.element){return}try{this.element.focus()}catch(a){}},hide:function(){this.element.style.display="none"},show:function(){this.element.style.display=""},disable:function(){this.element.setAttribute("disabled","disabled")},enable:function(){this.element.removeAttribute("disabled")}});(function(c){var b=c.dom,a=c.browser;c.views.Composer=c.views.View.extend({name:"composer",CARET_HACK:"<br>",constructor:function(e,f,d){this.base(e,f,d);this.textarea=this.parent.textarea;this._initSandbox()},clear:function(){this.element.innerHTML=a.displaysCaretInEmptyContentEditableCorrectly()?"":this.CARET_HACK},getValue:function(e){var d=this.isEmpty()?"":c.quirks.getCorrectInnerHTML(this.element);if(e){d=this.parent.parse(d)}d=c.lang.string(d).replace(c.INVISIBLE_SPACE).by("");return d},setValue:function(d,e){if(e){d=this.parent.parse(d)}this.element.innerHTML=d},show:function(){this.iframe.style.display=this._displayStyle||"";this.disable();this.enable()},hide:function(){this._displayStyle=b.getStyle("display").from(this.iframe);if(this._displayStyle==="none"){this._displayStyle=null}this.iframe.style.display="none"},disable:function(){this.element.removeAttribute("contentEditable");this.base()},enable:function(){this.element.setAttribute("contentEditable","true");this.base()},focus:function(e){if(c.browser.doesAsyncFocus()&&this.hasPlaceholderSet()){this.clear()}this.base();var d=this.element.lastChild;if(e&&d){if(d.nodeName==="BR"){this.selection.setBefore(this.element.lastChild)}else{this.selection.setAfter(this.element.lastChild)}}},getTextContent:function(){return b.getTextContent(this.element)},hasPlaceholderSet:function(){return this.getTextContent()==this.textarea.element.getAttribute("placeholder")},isEmpty:function(){var e=this.element.innerHTML,d="blockquote, ul, ol, img, embed, object, table, iframe, svg, video, audio, button, input, select, textarea";return e===""||e===this.CARET_HACK||this.hasPlaceholderSet()||(this.getTextContent()===""&&!this.element.querySelector(d))},_initSandbox:function(){var e=this;this.sandbox=new b.Sandbox(function(){e._create()},{stylesheets:this.config.stylesheets});this.iframe=this.sandbox.getIframe();var d=document.createElement("input");d.type="hidden";d.name="_wysihtml5_mode";d.value=1;var f=this.textarea.element;b.insert(this.iframe).after(f);b.insert(d).after(f)},_create:function(){var f=this;this.doc=this.sandbox.getDocument();this.element=this.doc.body;this.textarea=this.parent.textarea;this.element.innerHTML=this.textarea.getValue(true);this.enable();this.selection=new c.Selection(this.parent);this.commands=new c.Commands(this.parent);b.copyAttributes(["className","spellcheck","title","lang","dir","accessKey"]).from(this.textarea.element).to(this.element);b.addClass(this.element,this.config.composerClassName);if(this.config.style){this.style()}this.observe();var e=this.config.name;if(e){b.addClass(this.element,e);b.addClass(this.iframe,e)}var d=typeof(this.config.placeholder)==="string"?this.config.placeholder:this.textarea.element.getAttribute("placeholder");if(d){b.simulatePlaceholder(this.parent,this,d)}this.commands.exec("styleWithCSS",false);this._initAutoLinking();this._initObjectResizing();this._initUndoManager();if(this.textarea.element.hasAttribute("autofocus")||document.querySelector(":focus")==this.textarea.element){setTimeout(function(){f.focus()},100)}c.quirks.insertLineBreakOnReturn(this);if(!a.clearsContentEditableCorrectly()){c.quirks.ensureProperClearing(this)}if(!a.clearsListsInContentEditableCorrectly()){c.quirks.ensureProperClearingOfLists(this)}if(this.initSync&&this.config.sync){this.initSync()}this.textarea.hide();this.parent.fire("beforeload").fire("load")},_initAutoLinking:function(){var h=this,e=a.canDisableAutoLinking(),f=a.doesAutoLinkingInContentEditable();if(e){this.commands.exec("autoUrlDetect",false)}if(!this.config.autoLink){return}if(!f||(f&&e)){this.parent.observe("newword:composer",function(){h.selection.executeAndRestore(function(j,k){b.autoLink(k.parentNode)})})}var d=this.sandbox.getDocument().getElementsByTagName("a"),i=b.autoLink.URL_REG_EXP,g=function(j){var k=c.lang.string(b.getTextContent(j)).trim();if(k.substr(0,4)==="www."){k="http://"+k}return k};b.observe(this.element,"keydown",function(l){if(!d.length){return}var m=h.selection.getSelectedNode(l.target.ownerDocument),k=b.getParentElement(m,{nodeName:"A"},4),j;if(!k){return}j=g(k);setTimeout(function(){var n=g(k);if(n===j){return}if(n.match(i)){k.setAttribute("href",n)}},0)})},_initObjectResizing:function(){var f=["width","height"],e=f.length,d=this.element;this.commands.exec("enableObjectResizing",this.config.allowObjectResizing);if(this.config.allowObjectResizing){if(a.supportsEvent("resizeend")){b.observe(d,"resizeend",function(j){var l=j.target||j.srcElement,h=l.style,g=0,k;for(;g<e;g++){k=f[g];if(h[k]){l.setAttribute(k,parseInt(h[k],10));h[k]=""}}c.quirks.redraw(d)})}}else{if(a.supportsEvent("resizestart")){b.observe(d,"resizestart",function(g){g.preventDefault()})}}},_initUndoManager:function(){new c.UndoManager(this.parent)}})})(wysihtml5);(function(j){var a=j.dom,g=document,d=window,e=g.createElement("div"),b=["background-color","color","cursor","font-family","font-size","font-style","font-variant","font-weight","line-height","letter-spacing","text-align","text-decoration","text-indent","text-rendering","word-break","word-wrap","word-spacing"],h=["background-color","border-collapse","border-bottom-color","border-bottom-style","border-bottom-width","border-left-color","border-left-style","border-left-width","border-right-color","border-right-style","border-right-width","border-top-color","border-top-style","border-top-width","clear","display","float","margin-bottom","margin-left","margin-right","margin-top","outline-color","outline-offset","outline-width","outline-style","padding-left","padding-right","padding-top","padding-bottom","position","top","left","right","bottom","z-index","vertical-align","text-align","-webkit-box-sizing","-moz-box-sizing","-ms-box-sizing","box-sizing","-webkit-box-shadow","-moz-box-shadow","-ms-box-shadow","box-shadow","-webkit-border-top-right-radius","-moz-border-radius-topright","border-top-right-radius","-webkit-border-bottom-right-radius","-moz-border-radius-bottomright","border-bottom-right-radius","-webkit-border-bottom-left-radius","-moz-border-radius-bottomleft","border-bottom-left-radius","-webkit-border-top-left-radius","-moz-border-radius-topleft","border-top-left-radius","width","height"],c=["width","height","top","left","right","bottom"],f=["html             { height: 100%; }","body             { min-height: 100%; padding: 0; margin: 0; margin-top: -1px; padding-top: 1px; }","._wysihtml5-temp { display: none; }",j.browser.isGecko?"body.placeholder { color: graytext !important; }":"body.placeholder { color: #a9a9a9 !important; }","body[disabled]   { background-color: #eee !important; color: #999 !important; cursor: default !important; }","img:-moz-broken  { -moz-force-broken-image-icon: 1; height: 24px; width: 24px; }"];var i=function(m){if(m.setActive){try{m.setActive()}catch(o){}}else{var n=m.style,p=g.documentElement.scrollTop||g.body.scrollTop,l=g.documentElement.scrollLeft||g.body.scrollLeft,k={position:n.position,top:n.top,left:n.left,WebkitUserSelect:n.WebkitUserSelect};a.setStyles({position:"absolute",top:"-99999px",left:"-99999px",WebkitUserSelect:"none"}).on(m);m.focus();a.setStyles(k).on(m);if(d.scrollTo){d.scrollTo(l,p)}}};j.views.Composer.prototype.style=function(){var n=this,m=g.querySelector(":focus"),p=this.textarea.element,k=p.hasAttribute("placeholder"),o=k&&p.getAttribute("placeholder");this.focusStylesHost=this.focusStylesHost||e.cloneNode(false);this.blurStylesHost=this.blurStylesHost||e.cloneNode(false);if(k){p.removeAttribute("placeholder")}if(p===m){p.blur()}a.copyStyles(h).from(p).to(this.iframe).andTo(this.blurStylesHost);a.copyStyles(b).from(p).to(this.element).andTo(this.blurStylesHost);a.insertCSS(f).into(this.element.ownerDocument);i(p);a.copyStyles(h).from(p).to(this.focusStylesHost);a.copyStyles(b).from(p).to(this.focusStylesHost);var l=j.lang.array(h).without(["display"]);if(m){m.focus()}else{p.blur()}if(k){p.setAttribute("placeholder",o)}if(!j.browser.hasCurrentStyleProperty()){a.observe(d,"resize",function(){var q=a.getStyle("display").from(p);p.style.display="";a.copyStyles(c).from(p).to(n.iframe).andTo(n.focusStylesHost).andTo(n.blurStylesHost);p.style.display=q})}this.parent.observe("focus:composer",function(){a.copyStyles(l).from(n.focusStylesHost).to(n.iframe);a.copyStyles(b).from(n.focusStylesHost).to(n.element)});this.parent.observe("blur:composer",function(){a.copyStyles(l).from(n.blurStylesHost).to(n.iframe);a.copyStyles(b).from(n.blurStylesHost).to(n.element)});return this}})(wysihtml5);(function(d){var c=d.dom,b=d.browser,a={"66":"bold","73":"italic","85":"underline"};d.views.Composer.prototype.observe=function(){var i=this,k=this.getValue(),h=this.sandbox.getIframe(),g=this.element,f=b.supportsEventsInIframeCorrectly()?g:this.sandbox.getWindow(),e=b.supportsEvent("drop")?["drop","paste"]:["dragdrop","paste"];c.observe(h,"DOMNodeRemoved",function(){clearInterval(j);i.parent.fire("destroy:composer")});var j=setInterval(function(){if(!c.contains(document.documentElement,h)){clearInterval(j);i.parent.fire("destroy:composer")}},250);c.observe(f,"focus",function(){i.parent.fire("focus").fire("focus:composer");setTimeout(function(){k=i.getValue()},0)});c.observe(f,"blur",function(){if(k!==i.getValue()){i.parent.fire("change").fire("change:composer")}i.parent.fire("blur").fire("blur:composer")});if(d.browser.isIos()){c.observe(g,"blur",function(){var n=g.ownerDocument.createElement("input"),p=document.documentElement.scrollTop||document.body.scrollTop,m=document.documentElement.scrollLeft||document.body.scrollLeft;try{i.selection.insertNode(n)}catch(o){g.appendChild(n)}n.focus();n.parentNode.removeChild(n);window.scrollTo(m,p)})}c.observe(g,"dragenter",function(){i.parent.fire("unset_placeholder")});if(b.firesOnDropOnlyWhenOnDragOverIsCancelled()){c.observe(g,["dragover","dragenter"],function(m){m.preventDefault()})}c.observe(g,e,function(m){var o=m.dataTransfer,n;if(o&&b.supportsDataTransfer()){n=o.getData("text/html")||o.getData("text/plain")}if(n){g.focus();i.commands.exec("insertHTML",n);i.parent.fire("paste").fire("paste:composer");m.stopPropagation();m.preventDefault()}else{setTimeout(function(){i.parent.fire("paste").fire("paste:composer")},0)}});c.observe(g,"keyup",function(m){var n=m.keyCode;if(n===d.SPACE_KEY||n===d.ENTER_KEY){i.parent.fire("newword:composer")}});this.parent.observe("paste:composer",function(){setTimeout(function(){i.parent.fire("newword:composer")},0)});if(!b.canSelectImagesInContentEditable()){c.observe(g,"mousedown",function(m){var n=m.target;if(n.nodeName==="IMG"){i.selection.selectNode(n);m.preventDefault()}})}c.observe(g,"keydown",function(m){var n=m.keyCode,o=a[n];if((m.ctrlKey||m.metaKey)&&o){i.commands.exec(o);m.preventDefault()}});c.observe(g,"keydown",function(n){var p=i.selection.getSelectedNode(true),o=n.keyCode,m;if(p&&p.nodeName==="IMG"&&(o===d.BACKSPACE_KEY||o===d.DELETE_KEY)){m=p.parentNode;m.removeChild(p);if(m.nodeName==="A"&&!m.firstChild){m.parentNode.removeChild(m)}setTimeout(function(){d.quirks.redraw(g)},0);n.preventDefault()}});var l={IMG:"Image: ",A:"Link: "};c.observe(g,"mouseover",function(m){var n=m.target,p=n.nodeName,o;if(p!=="A"&&p!=="IMG"){return}o=l[p]+(n.getAttribute("href")||n.getAttribute("src"));n.setAttribute("title",o)})}})(wysihtml5);(function(b){var a=400;b.views.Synchronizer=Base.extend({constructor:function(e,c,d){this.editor=e;this.textarea=c;this.composer=d;this._observe()},fromComposerToTextarea:function(c){this.textarea.setValue(b.lang.string(this.composer.getValue()).trim(),c)},fromTextareaToComposer:function(d){var c=this.textarea.getValue();if(c){this.composer.setValue(c,d)}else{this.composer.clear();this.editor.fire("set_placeholder")}},sync:function(c){if(this.editor.currentView.name==="textarea"){this.fromTextareaToComposer(c)}else{this.fromComposerToTextarea(c)}},_observe:function(){var c,e=this,d=this.textarea.element.form,g=function(){c=setInterval(function(){e.fromComposerToTextarea()},a)},f=function(){clearInterval(c);c=null};g();if(d){b.dom.observe(d,"submit",function(){e.sync(true)});b.dom.observe(d,"reset",function(){setTimeout(function(){e.fromTextareaToComposer()},0)})}this.editor.observe("change_view",function(h){if(h==="composer"&&!c){e.fromTextareaToComposer(true);g()}else{if(h==="textarea"){e.fromComposerToTextarea(true);f()}}});this.editor.observe("destroy:composer",f)}})})(wysihtml5);wysihtml5.views.Textarea=wysihtml5.views.View.extend({name:"textarea",constructor:function(b,c,a){this.base(b,c,a);this._observe()},clear:function(){this.element.value=""},getValue:function(b){var a=this.isEmpty()?"":this.element.value;if(b){a=this.parent.parse(a)}return a},setValue:function(a,b){if(b){a=this.parent.parse(a)}this.element.value=a},hasPlaceholderSet:function(){var d=wysihtml5.browser.supportsPlaceholderAttributeOn(this.element),a=this.element.getAttribute("placeholder")||null,b=this.element.value,c=!b;return(d&&c)||(b===a)},isEmpty:function(){return !wysihtml5.lang.string(this.element.value).trim()||this.hasPlaceholderSet()},_observe:function(){var c=this.element,d=this.parent,a={focusin:"focus",focusout:"blur"},b=wysihtml5.browser.supportsEvent("focusin")?["focusin","focusout","change"]:["focus","blur","change"];d.observe("beforeload",function(){wysihtml5.dom.observe(c,b,function(f){var e=a[f.type]||f.type;d.fire(e).fire(e+":textarea")});wysihtml5.dom.observe(c,["paste","drop"],function(){setTimeout(function(){d.fire("paste").fire("paste:textarea")},0)})})}});(function(f){var e=f.dom,a="wysihtml5-command-dialog-opened",d="input, select, textarea",b="[data-wysihtml5-dialog-field]",c="data-wysihtml5-dialog-field";f.toolbar.Dialog=f.lang.Dispatcher.extend({constructor:function(h,g){this.link=h;this.container=g},_observe:function(){if(this._observed){return}var k=this,l=function(n){var i=k._serialize();if(i==k.elementToChange){k.fire("edit",i)}else{k.fire("save",i)}k.hide();n.preventDefault();n.stopPropagation()};e.observe(k.link,"click",function(i){if(e.hasClass(k.link,a)){setTimeout(function(){k.hide()},0)}});e.observe(this.container,"keydown",function(i){var n=i.keyCode;if(n===f.ENTER_KEY){l(i)}if(n===f.ESCAPE_KEY){k.hide()}});e.delegate(this.container,"[data-wysihtml5-dialog-action=save]","click",l);e.delegate(this.container,"[data-wysihtml5-dialog-action=cancel]","click",function(i){k.fire("cancel");k.hide();i.preventDefault();i.stopPropagation()});var h=this.container.querySelectorAll(d),g=0,j=h.length,m=function(){clearInterval(k.interval)};for(;g<j;g++){e.observe(h[g],"change",m)}this._observed=true},_serialize:function(){var k=this.elementToChange||{},g=this.container.querySelectorAll(b),j=g.length,h=0;for(;h<j;h++){k[g[h].getAttribute(c)]=g[h].value}return k},_interpolate:function(m){var l,o,k,n=document.querySelector(":focus"),g=this.container.querySelectorAll(b),j=g.length,h=0;for(;h<j;h++){l=g[h];if(l===n){continue}if(m&&l.type==="hidden"){continue}o=l.getAttribute(c);k=this.elementToChange?(this.elementToChange[o]||""):l.defaultValue;l.value=k}},show:function(j){var h=this,g=this.container.querySelector(d);this.elementToChange=j;this._observe();this._interpolate();if(j){this.interval=setInterval(function(){h._interpolate(true)},500)}e.addClass(this.link,a);this.container.style.display="";this.fire("show");if(g&&!j){try{g.focus()}catch(i){}}},hide:function(){clearInterval(this.interval);this.elementToChange=null;e.removeClass(this.link,a);this.container.style.display="none";this.fire("hide")}})})(wysihtml5);(function(f){var e=f.dom;var d={position:"relative"};var c={left:0,margin:0,opacity:0,overflow:"hidden",padding:0,position:"absolute",top:0,zIndex:1};var b={cursor:"inherit",fontSize:"50px",height:"50px",marginTop:"-25px",outline:0,padding:0,position:"absolute",right:"-4px",top:"50%"};var a={"x-webkit-speech":"",speech:""};f.toolbar.Speech=function(i,j){var h=document.createElement("input");if(!f.browser.supportsSpeechApiOn(h)){j.style.display="none";return}var k=document.createElement("div");f.lang.object(c).merge({width:j.offsetWidth+"px",height:j.offsetHeight+"px"});e.insert(h).into(k);e.insert(k).into(j);e.setStyles(b).on(h);e.setAttributes(a).on(h);e.setStyles(c).on(k);e.setStyles(d).on(j);var g="onwebkitspeechchange" in h?"webkitspeechchange":"speechchange";e.observe(h,g,function(){i.execCommand("insertText",h.value);h.value=""});e.observe(h,"click",function(l){if(e.hasClass(j,"wysihtml5-command-disabled")){l.preventDefault()}l.stopPropagation()})}})(wysihtml5);(function(e){var a="wysihtml5-command-disabled",b="wysihtml5-commands-disabled",c="wysihtml5-command-active",d=e.dom;e.toolbar.Toolbar=Base.extend({constructor:function(j,f){this.editor=j;this.container=typeof(f)==="string"?document.getElementById(f):f;this.composer=j.composer;this._getLinks("command");this._getLinks("action");this._observe();this.show();var g=this.container.querySelectorAll("[data-wysihtml5-command=insertSpeech]"),k=g.length,h=0;for(;h<k;h++){new e.toolbar.Speech(this,g[h])}},_getLinks:function(l){var o=this[l+"Links"]=e.lang.array(this.container.querySelectorAll("a[data-wysihtml5-"+l+"]")).get(),h=o.length,j=0,f=this[l+"Mapping"]={},m,g,n,k;for(;j<h;j++){m=o[j];g=m.getAttribute("data-wysihtml5-"+l);n=m.getAttribute("data-wysihtml5-"+l+"-value");k=this._getDialog(m,g);f[g+":"+n]={link:m,name:g,value:n,dialog:k,state:false}}},_getDialog:function(j,k){var i=this,h=this.container.querySelector("[data-wysihtml5-dialog='"+k+"']"),g,f;if(h){g=new e.toolbar.Dialog(j,h);g.observe("show",function(){f=i.composer.selection.getBookmark();i.editor.fire("show:dialog",{command:k,dialogContainer:h,commandLink:j})});g.observe("save",function(l){if(f){i.composer.selection.setBookmark(f)}i._execCommand(k,l);i.editor.fire("save:dialog",{command:k,dialogContainer:h,commandLink:j})});g.observe("cancel",function(){i.editor.focus(false);i.editor.fire("cancel:dialog",{command:k,dialogContainer:h,commandLink:j})})}return g},execCommand:function(h,f){if(this.commandsDisabled){return}var g=this.commandMapping[h+":"+f];if(g&&g.dialog&&!g.state){g.dialog.show()}else{this._execCommand(h,f)}},_execCommand:function(g,f){this.editor.focus(false);this.composer.commands.exec(g,f);this._updateLinkStates()},execAction:function(g){var f=this.editor;switch(g){case"change_view":if(f.currentView===f.textarea){f.fire("change_view","composer")}else{f.fire("change_view","textarea")}break}},_observe:function(){var l=this,j=this.editor,f=this.container,g=this.commandLinks.concat(this.actionLinks),k=g.length,h=0;for(;h<k;h++){d.setAttributes({href:"javascript:;",unselectable:"on"}).on(g[h])}d.delegate(f,"[data-wysihtml5-command]","mousedown",function(i){i.preventDefault()});d.delegate(f,"[data-wysihtml5-command]","click",function(n){var m=this,o=m.getAttribute("data-wysihtml5-command"),i=m.getAttribute("data-wysihtml5-command-value");l.execCommand(o,i);n.preventDefault()});d.delegate(f,"[data-wysihtml5-action]","click",function(i){var m=this.getAttribute("data-wysihtml5-action");l.execAction(m);i.preventDefault()});j.observe("focus:composer",function(){l.bookmark=null;clearInterval(l.interval);l.interval=setInterval(function(){l._updateLinkStates()},500)});j.observe("blur:composer",function(){clearInterval(l.interval)});j.observe("destroy:composer",function(){clearInterval(l.interval)});j.observe("change_view",function(i){setTimeout(function(){l.commandsDisabled=(i!=="composer");l._updateLinkStates();if(l.commandsDisabled){d.addClass(f,b)}else{d.removeClass(f,b)}},0)})},_updateLinkStates:function(){var h=this.composer.element,g=this.commandMapping,f,j,k;for(f in g){k=g[f];if(this.commandsDisabled){j=false;d.removeClass(k.link,c);if(k.dialog){k.dialog.hide()}}else{j=this.composer.commands.state(k.name,k.value);if(e.lang.object(j).isArray()){j=j.length===1?j[0]:true}d.removeClass(k.link,a)}if(k.state===j){continue}k.state=j;if(j){d.addClass(k.link,c);if(k.dialog){if(typeof(j)==="object"){k.dialog.show(j)}else{k.dialog.hide()}}}else{d.removeClass(k.link,c);if(k.dialog){k.dialog.hide()}}}},show:function(){this.container.style.display=""},hide:function(){this.container.style.display="none"}})})(wysihtml5);(function(c){var b;var a={name:b,style:true,toolbar:b,autoLink:true,parserRules:{tags:{br:{},span:{},div:{},p:{}},classes:{}},parser:c.dom.parse,composerClassName:"wysihtml5-editor",bodyClassName:"wysihtml5-supported",stylesheets:[],placeholderText:b,allowObjectResizing:true,supportTouchDevices:true};c.Editor=c.lang.Dispatcher.extend({constructor:function(f,d){this.textareaElement=typeof(f)==="string"?document.getElementById(f):f;this.config=c.lang.object({}).merge(a).merge(d).get();this.textarea=new c.views.Textarea(this,this.textareaElement,this.config);this.currentView=this.textarea;this._isCompatible=c.browser.supported();if(!this._isCompatible||(!this.config.supportTouchDevices&&c.browser.isTouchDevice())){var e=this;setTimeout(function(){e.fire("beforeload").fire("load")},0);return}c.dom.addClass(document.body,this.config.bodyClassName);this.composer=new c.views.Composer(this,this.textareaElement,this.config);this.currentView=this.composer;if(typeof(this.config.parser)==="function"){this._initParser()}this.observe("beforeload",function(){this.synchronizer=new c.views.Synchronizer(this,this.textarea,this.composer);if(this.config.toolbar){this.toolbar=new c.toolbar.Toolbar(this,this.config.toolbar)}})},isCompatible:function(){return this._isCompatible},clear:function(){this.currentView.clear();return this},getValue:function(d){return this.currentView.getValue(d)},setValue:function(d,e){if(!d){return this.clear()}this.currentView.setValue(d,e);return this},focus:function(d){this.currentView.focus(d);return this},disable:function(){this.currentView.disable();return this},enable:function(){this.currentView.enable();return this},isEmpty:function(){return this.currentView.isEmpty()},hasPlaceholderSet:function(){return this.currentView.hasPlaceholderSet()},parse:function(d){var e=this.config.parser(d,this.config.parserRules,this.composer.sandbox.getDocument(),true);if(typeof(d)==="object"){c.quirks.redraw(d)}return e},_initParser:function(){this.observe("paste:composer",function(){var d=true,e=this;e.composer.selection.executeAndRestore(function(){c.quirks.cleanPastedHTML(e.composer.element);e.parse(e.composer.element)},d)});this.observe("paste:textarea",function(){var d=this.textarea.getValue(),e;e=this.parse(d);this.textarea.setValue(e)})}})})(wysihtml5);(function(h,V,l,m){var j=function(e){function o(a,b){var c=j.defaults.columns,d=a.aoColumns.length,c=h.extend({},j.models.oColumn,c,{sSortingClass:a.oClasses.sSortable,sSortingClassJUI:a.oClasses.sSortJUI,nTh:b?b:l.createElement("th"),sTitle:c.sTitle?c.sTitle:b?b.innerHTML:"",aDataSort:c.aDataSort?c.aDataSort:[d],mDataProp:c.mDataProp?c.oDefaults:d});a.aoColumns.push(c);if(a.aoPreSearchCols[d]===m||null===a.aoPreSearchCols[d]){a.aoPreSearchCols[d]=h.extend({},j.models.oSearch)}else{c=a.aoPreSearchCols[d];if(c.bRegex===m){c.bRegex=!0}if(c.bSmart===m){c.bSmart=!0}if(c.bCaseInsensitive===m){c.bCaseInsensitive=!0}}s(a,d,null)}function s(a,b,c){b=a.aoColumns[b];if(c!==m&&null!==c){if(c.sType!==m){b.sType=c.sType,b._bAutoType=!1}h.extend(b,c);p(b,c,"sWidth","sWidthOrig");if(c.iDataSort!==m){b.aDataSort=[c.iDataSort]}p(b,c,"aDataSort")}b.fnGetData=W(b.mDataProp);b.fnSetData=ta(b.mDataProp);if(!a.oFeatures.bSort){b.bSortable=!1}if(!b.bSortable||-1==h.inArray("asc",b.asSorting)&&-1==h.inArray("desc",b.asSorting)){b.sSortingClass=a.oClasses.sSortableNone,b.sSortingClassJUI=""}else{if(b.bSortable||-1==h.inArray("asc",b.asSorting)&&-1==h.inArray("desc",b.asSorting)){b.sSortingClass=a.oClasses.sSortable,b.sSortingClassJUI=a.oClasses.sSortJUI}else{if(-1!=h.inArray("asc",b.asSorting)&&-1==h.inArray("desc",b.asSorting)){b.sSortingClass=a.oClasses.sSortableAsc,b.sSortingClassJUI=a.oClasses.sSortJUIAscAllowed}else{if(-1==h.inArray("asc",b.asSorting)&&-1!=h.inArray("desc",b.asSorting)){b.sSortingClass=a.oClasses.sSortableDesc,b.sSortingClassJUI=a.oClasses.sSortJUIDescAllowed}}}}}function k(a){if(!1===a.oFeatures.bAutoWidth){return !1}ba(a);for(var b=0,c=a.aoColumns.length;b<c;b++){a.aoColumns[b].nTh.style.width=a.aoColumns[b].sWidth}}function x(a,b){for(var c=-1,d=0;d<a.aoColumns.length;d++){if(!0===a.aoColumns[d].bVisible&&c++,c==b){return d}}return null}function r(a,b){for(var c=-1,d=0;d<a.aoColumns.length;d++){if(!0===a.aoColumns[d].bVisible&&c++,d==b){return !0===a.aoColumns[d].bVisible?c:null}}return null}function v(a){for(var b=0,c=0;c<a.aoColumns.length;c++){!0===a.aoColumns[c].bVisible&&b++}return b}function A(a){for(var b=j.ext.aTypes,c=b.length,d=0;d<c;d++){var f=b[d](a);if(null!==f){return f}}return"string"}function E(a,b){for(var c=b.split(","),d=[],f=0,g=a.aoColumns.length;f<g;f++){for(var i=0;i<g;i++){if(a.aoColumns[f].sName==c[i]){d.push(i);break}}}return d}function y(a){for(var b="",c=0,d=a.aoColumns.length;c<d;c++){b+=a.aoColumns[c].sName+","}return b.length==d?"":b.slice(0,-1)}function J(a,b,c,d){var f,g,i,e,u;if(b){for(f=b.length-1;0<=f;f--){var n=b[f].aTargets;h.isArray(n)||F(a,1,"aTargets must be an array of targets, not a "+typeof n);for(g=0,i=n.length;g<i;g++){if("number"===typeof n[g]&&0<=n[g]){for(;a.aoColumns.length<=n[g];){o(a)}d(n[g],b[f])}else{if("number"===typeof n[g]&&0>n[g]){d(a.aoColumns.length+n[g],b[f])}else{if("string"===typeof n[g]){for(e=0,u=a.aoColumns.length;e<u;e++){("_all"==n[g]||h(a.aoColumns[e].nTh).hasClass(n[g]))&&d(e,b[f])}}}}}}}if(c){for(f=0,a=c.length;f<a;f++){d(f,c[f])}}}function H(a,b){var c;c=h.isArray(b)?b.slice():h.extend(!0,{},b);var d=a.aoData.length,f=h.extend(!0,{},j.models.oRow);f._aData=c;a.aoData.push(f);for(var g,f=0,i=a.aoColumns.length;f<i;f++){if(c=a.aoColumns[f],"function"===typeof c.fnRender&&c.bUseRendered&&null!==c.mDataProp?I(a,d,f,R(a,d,f)):I(a,d,f,w(a,d,f)),c._bAutoType&&"string"!=c.sType&&(g=w(a,d,f,"type"),null!==g&&""!==g)){if(g=A(g),null===c.sType){c.sType=g}else{if(c.sType!=g&&"html"!=c.sType){c.sType="string"}}}}a.aiDisplayMaster.push(d);a.oFeatures.bDeferRender||ca(a,d);return d}function ua(a){var b,c,d,f,g,i,e,u,n;if(a.bDeferLoading||null===a.sAjaxSource){e=a.nTBody.childNodes;for(b=0,c=e.length;b<c;b++){if("TR"==e[b].nodeName.toUpperCase()){u=a.aoData.length;e[b]._DT_RowIndex=u;a.aoData.push(h.extend(!0,{},j.models.oRow,{nTr:e[b]}));a.aiDisplayMaster.push(u);i=e[b].childNodes;g=0;for(d=0,f=i.length;d<f;d++){if(n=i[d].nodeName.toUpperCase(),"TD"==n||"TH"==n){I(a,u,g,h.trim(i[d].innerHTML)),g++}}}}}e=S(a);i=[];for(b=0,c=e.length;b<c;b++){for(d=0,f=e[b].childNodes.length;d<f;d++){g=e[b].childNodes[d],n=g.nodeName.toUpperCase(),("TD"==n||"TH"==n)&&i.push(g)}}for(f=0,e=a.aoColumns.length;f<e;f++){n=a.aoColumns[f];if(null===n.sTitle){n.sTitle=n.nTh.innerHTML}g=n._bAutoType;u="function"===typeof n.fnRender;var o=null!==n.sClass,k=n.bVisible,m,s;if(g||u||o||!k){for(b=0,c=a.aoData.length;b<c;b++){d=a.aoData[b];m=i[b*e+f];if(g&&"string"!=n.sType&&(s=w(a,b,f,"type"),""!==s)){if(s=A(s),null===n.sType){n.sType=s}else{if(n.sType!=s&&"html"!=n.sType){n.sType="string"}}}if("function"===typeof n.mDataProp){m.innerHTML=w(a,b,f,"display")}if(u){s=R(a,b,f),m.innerHTML=s,n.bUseRendered&&I(a,b,f,s)}o&&(m.className+=" "+n.sClass);k?d._anHidden[f]=null:(d._anHidden[f]=m,m.parentNode.removeChild(m));n.fnCreatedCell&&n.fnCreatedCell.call(a.oInstance,m,w(a,b,f,"display"),d._aData,b,f)}}}if(0!==a.aoRowCreatedCallback.length){for(b=0,c=a.aoData.length;b<c;b++){d=a.aoData[b],D(a,"aoRowCreatedCallback",null,[d.nTr,d._aData,b])}}}function K(a,b){return b._DT_RowIndex!==m?b._DT_RowIndex:null}function da(a,b,c){for(var b=L(a,b),d=0,a=a.aoColumns.length;d<a;d++){if(b[d]===c){return d}}return -1}function X(a,b,c){for(var d=[],f=0,g=a.aoColumns.length;f<g;f++){d.push(w(a,b,f,c))}return d}function w(a,b,c,d){var f=a.aoColumns[c];if((c=f.fnGetData(a.aoData[b]._aData,d))===m){if(a.iDrawError!=a.iDraw&&null===f.sDefaultContent){F(a,0,"Requested unknown parameter "+("function"==typeof f.mDataProp?"{mDataprop function}":"'"+f.mDataProp+"'")+" from the data source for row "+b),a.iDrawError=a.iDraw}return f.sDefaultContent}if(null===c&&null!==f.sDefaultContent){c=f.sDefaultContent}else{if("function"===typeof c){return c()}}return"display"==d&&null===c?"":c}function I(a,b,c,d){a.aoColumns[c].fnSetData(a.aoData[b]._aData,d)}function W(a){if(null===a){return function(){return null}}if("function"===typeof a){return function(b,d){return a(b,d)}}if("string"===typeof a&&-1!=a.indexOf(".")){var b=a.split(".");return function(a){for(var d=0,f=b.length;d<f;d++){if(a=a[b[d]],a===m){return m}}return a}}return function(b){return b[a]}}function ta(a){if(null===a){return function(){}}if("function"===typeof a){return function(b,d){a(b,"set",d)}}if("string"===typeof a&&-1!=a.indexOf(".")){var b=a.split(".");return function(a,d){for(var f=0,g=b.length-1;f<g;f++){if(a=a[b[f]],a===m){return}}a[b[b.length-1]]=d}}return function(b,d){b[a]=d}}function Y(a){for(var b=[],c=a.aoData.length,d=0;d<c;d++){b.push(a.aoData[d]._aData)}return b}function ea(a){a.aoData.splice(0,a.aoData.length);a.aiDisplayMaster.splice(0,a.aiDisplayMaster.length);a.aiDisplay.splice(0,a.aiDisplay.length);B(a)}function fa(a,b){for(var c=-1,d=0,f=a.length;d<f;d++){a[d]==b?c=d:a[d]>b&&a[d]--}-1!=c&&a.splice(c,1)}function R(a,b,c){var d=a.aoColumns[c];return d.fnRender({iDataRow:b,iDataColumn:c,oSettings:a,aData:a.aoData[b]._aData,mDataProp:d.mDataProp},w(a,b,c,"display"))}function ca(a,b){var c=a.aoData[b],d;if(null===c.nTr){c.nTr=l.createElement("tr");c.nTr._DT_RowIndex=b;if(c._aData.DT_RowId){c.nTr.id=c._aData.DT_RowId}c._aData.DT_RowClass&&h(c.nTr).addClass(c._aData.DT_RowClass);for(var f=0,g=a.aoColumns.length;f<g;f++){var i=a.aoColumns[f];d=l.createElement(i.sCellType);d.innerHTML="function"===typeof i.fnRender&&(!i.bUseRendered||null===i.mDataProp)?R(a,b,f):w(a,b,f,"display");if(null!==i.sClass){d.className=i.sClass}i.bVisible?(c.nTr.appendChild(d),c._anHidden[f]=null):c._anHidden[f]=d;i.fnCreatedCell&&i.fnCreatedCell.call(a.oInstance,d,w(a,b,f,"display"),c._aData,b,f)}D(a,"aoRowCreatedCallback",null,[c.nTr,c._aData,b])}}function va(a){var b,c,d;if(0!==a.nTHead.getElementsByTagName("th").length){for(b=0,d=a.aoColumns.length;b<d;b++){if(c=a.aoColumns[b].nTh,c.setAttribute("role","columnheader"),a.aoColumns[b].bSortable&&(c.setAttribute("tabindex",a.iTabIndex),c.setAttribute("aria-controls",a.sTableId)),null!==a.aoColumns[b].sClass&&h(c).addClass(a.aoColumns[b].sClass),a.aoColumns[b].sTitle!=c.innerHTML){c.innerHTML=a.aoColumns[b].sTitle}}}else{var f=l.createElement("tr");for(b=0,d=a.aoColumns.length;b<d;b++){c=a.aoColumns[b].nTh,c.innerHTML=a.aoColumns[b].sTitle,c.setAttribute("tabindex","0"),null!==a.aoColumns[b].sClass&&h(c).addClass(a.aoColumns[b].sClass),f.appendChild(c)}h(a.nTHead).html("")[0].appendChild(f);T(a.aoHeader,a.nTHead)}h(a.nTHead).children("tr").attr("role","row");if(a.bJUI){for(b=0,d=a.aoColumns.length;b<d;b++){c=a.aoColumns[b].nTh;f=l.createElement("div");f.className=a.oClasses.sSortJUIWrapper;h(c).contents().appendTo(f);var g=l.createElement("span");g.className=a.oClasses.sSortIcon;f.appendChild(g);c.appendChild(f)}}if(a.oFeatures.bSort){for(b=0;b<a.aoColumns.length;b++){!1!==a.aoColumns[b].bSortable?ga(a,a.aoColumns[b].nTh,b):h(a.aoColumns[b].nTh).addClass(a.oClasses.sSortableNone)}}""!==a.oClasses.sFooterTH&&h(a.nTFoot).children("tr").children("th").addClass(a.oClasses.sFooterTH);if(null!==a.nTFoot){c=O(a,null,a.aoFooter);for(b=0,d=a.aoColumns.length;b<d;b++){if(c[b]){a.aoColumns[b].nTf=c[b],a.aoColumns[b].sClass&&h(c[b]).addClass(a.aoColumns[b].sClass)}}}}function U(a,b,c){var d,f,g,i=[],e=[],h=a.aoColumns.length,n;c===m&&(c=!1);for(d=0,f=b.length;d<f;d++){i[d]=b[d].slice();i[d].nTr=b[d].nTr;for(g=h-1;0<=g;g--){!a.aoColumns[g].bVisible&&!c&&i[d].splice(g,1)}e.push([])}for(d=0,f=i.length;d<f;d++){if(a=i[d].nTr){for(;g=a.firstChild;){a.removeChild(g)}}for(g=0,b=i[d].length;g<b;g++){if(n=h=1,e[d][g]===m){a.appendChild(i[d][g].cell);for(e[d][g]=1;i[d+h]!==m&&i[d][g].cell==i[d+h][g].cell;){e[d+h][g]=1,h++}for(;i[d][g+n]!==m&&i[d][g].cell==i[d][g+n].cell;){for(c=0;c<h;c++){e[d+c][g+n]=1}n++}i[d][g].cell.rowSpan=h;i[d][g].cell.colSpan=n}}}}function z(a){var b,c,d=[],f=0,g=a.asStripeClasses.length;b=a.aoOpenRows.length;c=D(a,"aoPreDrawCallback","preDraw",[a]);if(-1!==h.inArray(!1,c)){G(a,!1)}else{a.bDrawing=!0;if(a.iInitDisplayStart!==m&&-1!=a.iInitDisplayStart){a._iDisplayStart=a.oFeatures.bServerSide?a.iInitDisplayStart:a.iInitDisplayStart>=a.fnRecordsDisplay()?0:a.iInitDisplayStart,a.iInitDisplayStart=-1,B(a)}if(a.bDeferLoading){a.bDeferLoading=!1,a.iDraw++}else{if(a.oFeatures.bServerSide){if(!a.bDestroying&&!wa(a)){return}}else{a.iDraw++}}if(0!==a.aiDisplay.length){var i=a._iDisplayStart;c=a._iDisplayEnd;if(a.oFeatures.bServerSide){i=0,c=a.aoData.length}for(;i<c;i++){var e=a.aoData[a.aiDisplay[i]];null===e.nTr&&ca(a,a.aiDisplay[i]);var j=e.nTr;if(0!==g){var n=a.asStripeClasses[f%g];if(e._sRowStripe!=n){h(j).removeClass(e._sRowStripe).addClass(n),e._sRowStripe=n}}D(a,"aoRowCallback",null,[j,a.aoData[a.aiDisplay[i]]._aData,f,i]);d.push(j);f++;if(0!==b){for(e=0;e<b;e++){if(j==a.aoOpenRows[e].nParent){d.push(a.aoOpenRows[e].nTr);break}}}}}else{d[0]=l.createElement("tr");if(a.asStripeClasses[0]){d[0].className=a.asStripeClasses[0]}b=a.oLanguage;g=b.sZeroRecords;if(1==a.iDraw&&null!==a.sAjaxSource&&!a.oFeatures.bServerSide){g=b.sLoadingRecords}else{if(b.sEmptyTable&&0===a.fnRecordsTotal()){g=b.sEmptyTable}}b=l.createElement("td");b.setAttribute("valign","top");b.colSpan=v(a);b.className=a.oClasses.sRowEmpty;b.innerHTML=ha(a,g);d[f].appendChild(b)}D(a,"aoHeaderCallback","header",[h(a.nTHead).children("tr")[0],Y(a),a._iDisplayStart,a.fnDisplayEnd(),a.aiDisplay]);D(a,"aoFooterCallback","footer",[h(a.nTFoot).children("tr")[0],Y(a),a._iDisplayStart,a.fnDisplayEnd(),a.aiDisplay]);f=l.createDocumentFragment();b=l.createDocumentFragment();if(a.nTBody){g=a.nTBody.parentNode;b.appendChild(a.nTBody);if(!a.oScroll.bInfinite||!a._bInitComplete||a.bSorted||a.bFiltered){for(;b=a.nTBody.firstChild;){a.nTBody.removeChild(b)}}for(b=0,c=d.length;b<c;b++){f.appendChild(d[b])}a.nTBody.appendChild(f);null!==g&&g.appendChild(a.nTBody)}D(a,"aoDrawCallback","draw",[a]);a.bSorted=!1;a.bFiltered=!1;a.bDrawing=!1;a.oFeatures.bServerSide&&(G(a,!1),a._bInitComplete||Z(a))}}function $(a){a.oFeatures.bSort?P(a,a.oPreviousSearch):a.oFeatures.bFilter?M(a,a.oPreviousSearch):(B(a),z(a))}function xa(a){var b=h("<div></div>")[0];a.nTable.parentNode.insertBefore(b,a.nTable);a.nTableWrapper=h('<div id="'+a.sTableId+'_wrapper" class="'+a.oClasses.sWrapper+'" role="grid"></div>')[0];a.nTableReinsertBefore=a.nTable.nextSibling;for(var c=a.nTableWrapper,d=a.sDom.split(""),f,g,i,e,u,n,o,k=0;k<d.length;k++){g=0;i=d[k];if("<"==i){e=h("<div></div>")[0];u=d[k+1];if("'"==u||'"'==u){n="";for(o=2;d[k+o]!=u;){n+=d[k+o],o++}"H"==n?n="fg-toolbar ui-toolbar ui-widget-header ui-corner-tl ui-corner-tr ui-helper-clearfix":"F"==n&&(n="fg-toolbar ui-toolbar ui-widget-header ui-corner-bl ui-corner-br ui-helper-clearfix");-1!=n.indexOf(".")?(u=n.split("."),e.id=u[0].substr(1,u[0].length-1),e.className=u[1]):"#"==n.charAt(0)?e.id=n.substr(1,n.length-1):e.className=n;k+=o}c.appendChild(e);c=e}else{if(">"==i){c=c.parentNode}else{if("l"==i&&a.oFeatures.bPaginate&&a.oFeatures.bLengthChange){f=ya(a),g=1}else{if("f"==i&&a.oFeatures.bFilter){f=za(a),g=1}else{if("r"==i&&a.oFeatures.bProcessing){f=Aa(a),g=1}else{if("t"==i){f=Ba(a),g=1}else{if("i"==i&&a.oFeatures.bInfo){f=Ca(a),g=1}else{if("p"==i&&a.oFeatures.bPaginate){f=Da(a),g=1}else{if(0!==j.ext.aoFeatures.length){e=j.ext.aoFeatures;o=0;for(u=e.length;o<u;o++){if(i==e[o].cFeature){(f=e[o].fnInit(a))&&(g=1);break}}}}}}}}}}}1==g&&null!==f&&("object"!==typeof a.aanFeatures[i]&&(a.aanFeatures[i]=[]),a.aanFeatures[i].push(f),c.appendChild(f))}b.parentNode.replaceChild(a.nTableWrapper,b)}function T(a,b){var c=h(b).children("tr"),d,f,g,i,e,j,n,o;a.splice(0,a.length);for(f=0,j=c.length;f<j;f++){a.push([])}for(f=0,j=c.length;f<j;f++){for(g=0,n=c[f].childNodes.length;g<n;g++){if(d=c[f].childNodes[g],"TD"==d.nodeName.toUpperCase()||"TH"==d.nodeName.toUpperCase()){var k=1*d.getAttribute("colspan"),m=1*d.getAttribute("rowspan"),k=!k||0===k||1===k?1:k,m=!m||0===m||1===m?1:m;for(i=0;a[f][i];){i++}o=i;for(e=0;e<k;e++){for(i=0;i<m;i++){a[f+i][o+e]={cell:d,unique:1==k?!0:!1},a[f+i].nTr=c[f]}}}}}}function O(a,b,c){var d=[];if(!c){c=a.aoHeader,b&&(c=[],T(c,b))}for(var b=0,f=c.length;b<f;b++){for(var g=0,i=c[b].length;g<i;g++){if(c[b][g].unique&&(!d[g]||!a.bSortCellsTop)){d[g]=c[b][g].cell}}}return d}function wa(a){if(a.bAjaxDataGet){a.iDraw++;G(a,!0);var b=Ea(a);ia(a,b);a.fnServerData.call(a.oInstance,a.sAjaxSource,b,function(b){Fa(a,b)},a);return !1}return !0}function Ea(a){var b=a.aoColumns.length,c=[],d,f,g,i;c.push({name:"sEcho",value:a.iDraw});c.push({name:"iColumns",value:b});c.push({name:"sColumns",value:y(a)});c.push({name:"iDisplayStart",value:a._iDisplayStart});c.push({name:"iDisplayLength",value:!1!==a.oFeatures.bPaginate?a._iDisplayLength:-1});for(g=0;g<b;g++){d=a.aoColumns[g].mDataProp,c.push({name:"mDataProp_"+g,value:"function"===typeof d?"function":d})}if(!1!==a.oFeatures.bFilter){c.push({name:"sSearch",value:a.oPreviousSearch.sSearch});c.push({name:"bRegex",value:a.oPreviousSearch.bRegex});for(g=0;g<b;g++){c.push({name:"sSearch_"+g,value:a.aoPreSearchCols[g].sSearch}),c.push({name:"bRegex_"+g,value:a.aoPreSearchCols[g].bRegex}),c.push({name:"bSearchable_"+g,value:a.aoColumns[g].bSearchable})}}if(!1!==a.oFeatures.bSort){var e=0;d=null!==a.aaSortingFixed?a.aaSortingFixed.concat(a.aaSorting):a.aaSorting.slice();for(g=0;g<d.length;g++){f=a.aoColumns[d[g][0]].aDataSort;for(i=0;i<f.length;i++){c.push({name:"iSortCol_"+e,value:f[i]}),c.push({name:"sSortDir_"+e,value:d[g][1]}),e++}}c.push({name:"iSortingCols",value:e});for(g=0;g<b;g++){c.push({name:"bSortable_"+g,value:a.aoColumns[g].bSortable})}}return c}function ia(a,b){D(a,"aoServerParams","serverParams",[b])}function Fa(a,b){if(b.sEcho!==m){if(1*b.sEcho<a.iDraw){return}a.iDraw=1*b.sEcho}(!a.oScroll.bInfinite||a.oScroll.bInfinite&&(a.bSorted||a.bFiltered))&&ea(a);a._iRecordsTotal=parseInt(b.iTotalRecords,10);a._iRecordsDisplay=parseInt(b.iTotalDisplayRecords,10);var c=y(a),c=b.sColumns!==m&&""!==c&&b.sColumns!=c,d;c&&(d=E(a,b.sColumns));for(var f=W(a.sAjaxDataProp)(b),g=0,i=f.length;g<i;g++){if(c){for(var e=[],h=0,n=a.aoColumns.length;h<n;h++){e.push(f[g][d[h]])}H(a,e)}else{H(a,f[g])}}a.aiDisplay=a.aiDisplayMaster.slice();a.bAjaxDataGet=!1;z(a);a.bAjaxDataGet=!0;G(a,!1)}function za(a){var b=a.oPreviousSearch,c=a.oLanguage.sSearch,c=-1!==c.indexOf("_INPUT_")?c.replace("_INPUT_",'<input type="text" />'):""===c?'<input type="text" />':c+' <input type="text" />',d=l.createElement("div");d.className=a.oClasses.sFilter;d.innerHTML="<label>"+c+"</label>";if(!a.aanFeatures.f){d.id=a.sTableId+"_filter"}c=h('input[type="text"]',d);d._DT_Input=c[0];c.val(b.sSearch.replace('"',"&quot;"));c.bind("keyup.DT",function(){for(var c=a.aanFeatures.f,d=""===this.value?"":this.value,i=0,e=c.length;i<e;i++){c[i]!=h(this).parents("div.dataTables_filter")[0]&&h(c[i]._DT_Input).val(d)}d!=b.sSearch&&M(a,{sSearch:d,bRegex:b.bRegex,bSmart:b.bSmart,bCaseInsensitive:b.bCaseInsensitive})});c.attr("aria-controls",a.sTableId).bind("keypress.DT",function(a){if(13==a.keyCode){return !1}});return d}function M(a,b,c){var d=a.oPreviousSearch,f=a.aoPreSearchCols,g=function(a){d.sSearch=a.sSearch;d.bRegex=a.bRegex;d.bSmart=a.bSmart;d.bCaseInsensitive=a.bCaseInsensitive};if(a.oFeatures.bServerSide){g(b)}else{Ga(a,b.sSearch,c,b.bRegex,b.bSmart,b.bCaseInsensitive);g(b);for(b=0;b<a.aoPreSearchCols.length;b++){Ha(a,f[b].sSearch,b,f[b].bRegex,f[b].bSmart,f[b].bCaseInsensitive)}Ia(a)}a.bFiltered=!0;h(a.oInstance).trigger("filter",a);a._iDisplayStart=0;B(a);z(a);ja(a,0)}function Ia(a){for(var b=j.ext.afnFiltering,c=0,d=b.length;c<d;c++){for(var f=0,g=0,i=a.aiDisplay.length;g<i;g++){var e=a.aiDisplay[g-f];b[c](a,X(a,e,"filter"),e)||(a.aiDisplay.splice(g-f,1),f++)}}}function Ha(a,b,c,d,f,g){if(""!==b){for(var i=0,b=ka(b,d,f,g),d=a.aiDisplay.length-1;0<=d;d--){f=la(w(a,a.aiDisplay[d],c,"filter"),a.aoColumns[c].sType),b.test(f)||(a.aiDisplay.splice(d,1),i++)}}}function Ga(a,b,c,d,f,g){d=ka(b,d,f,g);f=a.oPreviousSearch;c||(c=0);0!==j.ext.afnFiltering.length&&(c=1);if(0>=b.length){a.aiDisplay.splice(0,a.aiDisplay.length),a.aiDisplay=a.aiDisplayMaster.slice()}else{if(a.aiDisplay.length==a.aiDisplayMaster.length||f.sSearch.length>b.length||1==c||0!==b.indexOf(f.sSearch)){a.aiDisplay.splice(0,a.aiDisplay.length);ja(a,1);for(b=0;b<a.aiDisplayMaster.length;b++){d.test(a.asDataSearch[b])&&a.aiDisplay.push(a.aiDisplayMaster[b])}}else{for(b=c=0;b<a.asDataSearch.length;b++){d.test(a.asDataSearch[b])||(a.aiDisplay.splice(b-c,1),c++)}}}}function ja(a,b){if(!a.oFeatures.bServerSide){a.asDataSearch.splice(0,a.asDataSearch.length);for(var c=b&&1===b?a.aiDisplayMaster:a.aiDisplay,d=0,f=c.length;d<f;d++){a.asDataSearch[d]=ma(a,X(a,c[d],"filter"))}}}function ma(a,b){var c="";if(a.__nTmpFilter===m){a.__nTmpFilter=l.createElement("div")}for(var d=a.__nTmpFilter,f=0,g=a.aoColumns.length;f<g;f++){a.aoColumns[f].bSearchable&&(c+=la(b[f],a.aoColumns[f].sType)+"  ")}if(-1!==c.indexOf("&")){d.innerHTML=c,c=d.textContent?d.textContent:d.innerText,c=c.replace(/\n/g," ").replace(/\r/g,"")}return c}function ka(a,b,c,d){if(c){return a=b?a.split(" "):na(a).split(" "),a="^(?=.*?"+a.join(")(?=.*?")+").*$",RegExp(a,d?"i":"")}a=b?a:na(a);return RegExp(a,d?"i":"")}function la(a,b){return"function"===typeof j.ext.ofnSearch[b]?j.ext.ofnSearch[b](a):null===a?"":"html"==b?a.replace(/[\r\n]/g," ").replace(/<.*?>/g,""):"string"===typeof a?a.replace(/[\r\n]/g," "):a}function na(a){return a.replace(RegExp("(\\/|\\.|\\*|\\+|\\?|\\||\\(|\\)|\\[|\\]|\\{|\\}|\\\\|\\$|\\^)","g"),"\\$1")}function Ca(a){var b=l.createElement("div");b.className=a.oClasses.sInfo;if(!a.aanFeatures.i){a.aoDrawCallback.push({fn:Ja,sName:"information"}),b.id=a.sTableId+"_info"}a.nTable.setAttribute("aria-describedby",a.sTableId+"_info");return b}function Ja(a){if(a.oFeatures.bInfo&&0!==a.aanFeatures.i.length){var b=a.oLanguage,c=a._iDisplayStart+1,d=a.fnDisplayEnd(),f=a.fnRecordsTotal(),g=a.fnRecordsDisplay(),i;i=0===g&&g==f?b.sInfoEmpty:0===g?b.sInfoEmpty+" "+b.sInfoFiltered:g==f?b.sInfo:b.sInfo+" "+b.sInfoFiltered;i+=b.sInfoPostFix;i=ha(a,i);null!==b.fnInfoCallback&&(i=b.fnInfoCallback.call(a.oInstance,a,c,d,f,g,i));a=a.aanFeatures.i;b=0;for(c=a.length;b<c;b++){h(a[b]).html(i)}}}function ha(a,b){var c=a.fnFormatNumber(a._iDisplayStart+1),d=a.fnDisplayEnd(),d=a.fnFormatNumber(d),f=a.fnRecordsDisplay(),f=a.fnFormatNumber(f),g=a.fnRecordsTotal(),g=a.fnFormatNumber(g);a.oScroll.bInfinite&&(c=a.fnFormatNumber(1));return b.replace("_START_",c).replace("_END_",d).replace("_TOTAL_",f).replace("_MAX_",g)}function aa(a){var b,c,d=a.iInitDisplayStart;if(!1===a.bInitialised){setTimeout(function(){aa(a)},200)}else{xa(a);va(a);U(a,a.aoHeader);a.nTFoot&&U(a,a.aoFooter);G(a,!0);a.oFeatures.bAutoWidth&&ba(a);for(b=0,c=a.aoColumns.length;b<c;b++){if(null!==a.aoColumns[b].sWidth){a.aoColumns[b].nTh.style.width=q(a.aoColumns[b].sWidth)}}a.oFeatures.bSort?P(a):a.oFeatures.bFilter?M(a,a.oPreviousSearch):(a.aiDisplay=a.aiDisplayMaster.slice(),B(a),z(a));null!==a.sAjaxSource&&!a.oFeatures.bServerSide?(c=[],ia(a,c),a.fnServerData.call(a.oInstance,a.sAjaxSource,c,function(c){var g=""!==a.sAjaxDataProp?W(a.sAjaxDataProp)(c):c;for(b=0;b<g.length;b++){H(a,g[b])}a.iInitDisplayStart=d;a.oFeatures.bSort?P(a):(a.aiDisplay=a.aiDisplayMaster.slice(),B(a),z(a));G(a,!1);Z(a,c)},a)):a.oFeatures.bServerSide||(G(a,!1),Z(a))}}function Z(a,b){a._bInitComplete=!0;D(a,"aoInitComplete","init",[a,b])}function oa(a){var b=j.defaults.oLanguage;!a.sEmptyTable&&a.sZeroRecords&&"No data available in table"===b.sEmptyTable&&p(a,a,"sZeroRecords","sEmptyTable");!a.sLoadingRecords&&a.sZeroRecords&&"Loading..."===b.sLoadingRecords&&p(a,a,"sZeroRecords","sLoadingRecords")}function ya(a){if(a.oScroll.bInfinite){return null}var b='<select size="1" '+('name="'+a.sTableId+'_length"')+">",c,d,f=a.aLengthMenu;if(2==f.length&&"object"===typeof f[0]&&"object"===typeof f[1]){for(c=0,d=f[0].length;c<d;c++){b+='<option value="'+f[0][c]+'">'+f[1][c]+"</option>"}}else{for(c=0,d=f.length;c<d;c++){b+='<option value="'+f[c]+'">'+f[c]+"</option>"}}b+="</select>";f=l.createElement("div");if(!a.aanFeatures.l){f.id=a.sTableId+"_length"}f.className=a.oClasses.sLength;f.innerHTML="<label>"+a.oLanguage.sLengthMenu.replace("_MENU_",b)+"</label>";h('select option[value="'+a._iDisplayLength+'"]',f).attr("selected",!0);h("select",f).bind("change.DT",function(){var b=h(this).val(),f=a.aanFeatures.l;for(c=0,d=f.length;c<d;c++){f[c]!=this.parentNode&&h("select",f[c]).val(b)}a._iDisplayLength=parseInt(b,10);B(a);if(a.fnDisplayEnd()==a.fnRecordsDisplay()&&(a._iDisplayStart=a.fnDisplayEnd()-a._iDisplayLength,0>a._iDisplayStart)){a._iDisplayStart=0}if(-1==a._iDisplayLength){a._iDisplayStart=0}z(a)});h("select",f).attr("aria-controls",a.sTableId);return f}function B(a){a._iDisplayEnd=!1===a.oFeatures.bPaginate?a.aiDisplay.length:a._iDisplayStart+a._iDisplayLength>a.aiDisplay.length||-1==a._iDisplayLength?a.aiDisplay.length:a._iDisplayStart+a._iDisplayLength}function Da(a){if(a.oScroll.bInfinite){return null}var b=l.createElement("div");b.className=a.oClasses.sPaging+a.sPaginationType;j.ext.oPagination[a.sPaginationType].fnInit(a,b,function(a){B(a);z(a)});a.aanFeatures.p||a.aoDrawCallback.push({fn:function(a){j.ext.oPagination[a.sPaginationType].fnUpdate(a,function(a){B(a);z(a)})},sName:"pagination"});return b}function pa(a,b){var c=a._iDisplayStart;if("number"===typeof b){if(a._iDisplayStart=b*a._iDisplayLength,a._iDisplayStart>a.fnRecordsDisplay()){a._iDisplayStart=0}}else{if("first"==b){a._iDisplayStart=0}else{if("previous"==b){if(a._iDisplayStart=0<=a._iDisplayLength?a._iDisplayStart-a._iDisplayLength:0,0>a._iDisplayStart){a._iDisplayStart=0}}else{if("next"==b){0<=a._iDisplayLength?a._iDisplayStart+a._iDisplayLength<a.fnRecordsDisplay()&&(a._iDisplayStart+=a._iDisplayLength):a._iDisplayStart=0}else{if("last"==b){if(0<=a._iDisplayLength){var d=parseInt((a.fnRecordsDisplay()-1)/a._iDisplayLength,10)+1;a._iDisplayStart=(d-1)*a._iDisplayLength}else{a._iDisplayStart=0}}else{F(a,0,"Unknown paging action: "+b)}}}}}h(a.oInstance).trigger("page",a);return c!=a._iDisplayStart}function Aa(a){var b=l.createElement("div");if(!a.aanFeatures.r){b.id=a.sTableId+"_processing"}b.innerHTML=a.oLanguage.sProcessing;b.className=a.oClasses.sProcessing;a.nTable.parentNode.insertBefore(b,a.nTable);return b}function G(a,b){if(a.oFeatures.bProcessing){for(var c=a.aanFeatures.r,d=0,f=c.length;d<f;d++){c[d].style.visibility=b?"visible":"hidden"}}h(a.oInstance).trigger("processing",[a,b])}function Ba(a){if(""===a.oScroll.sX&&""===a.oScroll.sY){return a.nTable}var b=l.createElement("div"),c=l.createElement("div"),d=l.createElement("div"),f=l.createElement("div"),g=l.createElement("div"),i=l.createElement("div"),e=a.nTable.cloneNode(!1),j=a.nTable.cloneNode(!1),n=a.nTable.getElementsByTagName("thead")[0],o=0===a.nTable.getElementsByTagName("tfoot").length?null:a.nTable.getElementsByTagName("tfoot")[0],k=a.oClasses;c.appendChild(d);g.appendChild(i);f.appendChild(a.nTable);b.appendChild(c);b.appendChild(f);d.appendChild(e);e.appendChild(n);null!==o&&(b.appendChild(g),i.appendChild(j),j.appendChild(o));b.className=k.sScrollWrapper;c.className=k.sScrollHead;d.className=k.sScrollHeadInner;f.className=k.sScrollBody;g.className=k.sScrollFoot;i.className=k.sScrollFootInner;if(a.oScroll.bAutoCss){c.style.overflow="hidden",c.style.position="relative",g.style.overflow="hidden",f.style.overflow="auto"}c.style.border="0";c.style.width="100%";g.style.border="0";d.style.width=""!==a.oScroll.sXInner?a.oScroll.sXInner:"100%";e.removeAttribute("id");e.style.marginLeft="0";a.nTable.style.marginLeft="0";if(null!==o){j.removeAttribute("id"),j.style.marginLeft="0"}d=h(a.nTable).children("caption");0<d.length&&(d=d[0],"top"===d._captionSide?e.appendChild(d):"bottom"===d._captionSide&&o&&j.appendChild(d));if(""!==a.oScroll.sX){c.style.width=q(a.oScroll.sX);f.style.width=q(a.oScroll.sX);if(null!==o){g.style.width=q(a.oScroll.sX)}h(f).scroll(function(){c.scrollLeft=this.scrollLeft;if(null!==o){g.scrollLeft=this.scrollLeft}})}if(""!==a.oScroll.sY){f.style.height=q(a.oScroll.sY)}a.aoDrawCallback.push({fn:Ka,sName:"scrolling"});a.oScroll.bInfinite&&h(f).scroll(function(){!a.bDrawing&&0!==h(this).scrollTop()&&h(this).scrollTop()+h(this).height()>h(a.nTable).height()-a.oScroll.iLoadGap&&a.fnDisplayEnd()<a.fnRecordsDisplay()&&(pa(a,"next"),B(a),z(a))});a.nScrollHead=c;a.nScrollFoot=g;return b}function Ka(a){var b=a.nScrollHead.getElementsByTagName("div")[0],c=b.getElementsByTagName("table")[0],d=a.nTable.parentNode,f,g,i,e,j,n,o,k,m=[],s=null!==a.nTFoot?a.nScrollFoot.getElementsByTagName("div")[0]:null,p=null!==a.nTFoot?s.getElementsByTagName("table")[0]:null,l=h.browser.msie&&7>=h.browser.version;h(a.nTable).children("thead, tfoot").remove();i=h(a.nTHead).clone()[0];a.nTable.insertBefore(i,a.nTable.childNodes[0]);null!==a.nTFoot&&(j=h(a.nTFoot).clone()[0],a.nTable.insertBefore(j,a.nTable.childNodes[1]));if(""===a.oScroll.sX){d.style.width="100%",b.parentNode.style.width="100%"}var r=O(a,i);for(f=0,g=r.length;f<g;f++){o=x(a,f),r[f].style.width=a.aoColumns[o].sWidth}null!==a.nTFoot&&N(function(a){a.style.width=""},j.getElementsByTagName("tr"));if(a.oScroll.bCollapse&&""!==a.oScroll.sY){d.style.height=d.offsetHeight+a.nTHead.offsetHeight+"px"}f=h(a.nTable).outerWidth();if(""===a.oScroll.sX){if(a.nTable.style.width="100%",l&&(h("tbody",d).height()>d.offsetHeight||"scroll"==h(d).css("overflow-y"))){a.nTable.style.width=q(h(a.nTable).outerWidth()-a.oScroll.iBarWidth)}}else{if(""!==a.oScroll.sXInner){a.nTable.style.width=q(a.oScroll.sXInner)}else{if(f==h(d).width()&&h(d).height()<h(a.nTable).height()){if(a.nTable.style.width=q(f-a.oScroll.iBarWidth),h(a.nTable).outerWidth()>f-a.oScroll.iBarWidth){a.nTable.style.width=q(f)}}else{a.nTable.style.width=q(f)}}}f=h(a.nTable).outerWidth();g=a.nTHead.getElementsByTagName("tr");i=i.getElementsByTagName("tr");N(function(a,b){n=a.style;n.paddingTop="0";n.paddingBottom="0";n.borderTopWidth="0";n.borderBottomWidth="0";n.height=0;k=h(a).width();b.style.width=q(k);m.push(k)},i,g);h(i).height(0);null!==a.nTFoot&&(e=j.getElementsByTagName("tr"),j=a.nTFoot.getElementsByTagName("tr"),N(function(a,b){n=a.style;n.paddingTop="0";n.paddingBottom="0";n.borderTopWidth="0";n.borderBottomWidth="0";n.height=0;k=h(a).width();b.style.width=q(k);m.push(k)},e,j),h(e).height(0));N(function(a){a.innerHTML="";a.style.width=q(m.shift())},i);null!==a.nTFoot&&N(function(a){a.innerHTML="";a.style.width=q(m.shift())},e);if(h(a.nTable).outerWidth()<f){e=d.scrollHeight>d.offsetHeight||"scroll"==h(d).css("overflow-y")?f+a.oScroll.iBarWidth:f;if(l&&(d.scrollHeight>d.offsetHeight||"scroll"==h(d).css("overflow-y"))){a.nTable.style.width=q(e-a.oScroll.iBarWidth)}d.style.width=q(e);b.parentNode.style.width=q(e);if(null!==a.nTFoot){s.parentNode.style.width=q(e)}""===a.oScroll.sX?F(a,1,"The table cannot fit into the current element which will cause column misalignment. The table has been drawn at its minimum possible width."):""!==a.oScroll.sXInner&&F(a,1,"The table cannot fit into the current element which will cause column misalignment. Increase the sScrollXInner value or remove it to allow automatic calculation")}else{if(d.style.width=q("100%"),b.parentNode.style.width=q("100%"),null!==a.nTFoot){s.parentNode.style.width=q("100%")}}if(""===a.oScroll.sY&&l){d.style.height=q(a.nTable.offsetHeight+a.oScroll.iBarWidth)}if(""!==a.oScroll.sY&&a.oScroll.bCollapse&&(d.style.height=q(a.oScroll.sY),l=""!==a.oScroll.sX&&a.nTable.offsetWidth>d.offsetWidth?a.oScroll.iBarWidth:0,a.nTable.offsetHeight<d.offsetHeight)){d.style.height=q(a.nTable.offsetHeight+l)}l=h(a.nTable).outerWidth();c.style.width=q(l);b.style.width=q(l);c=h(a.nTable).height()>d.clientHeight||"scroll"==h(d).css("overflow-y");b.style.paddingRight=c?a.oScroll.iBarWidth+"px":"0px";if(null!==a.nTFoot){p.style.width=q(l),s.style.width=q(l),s.style.paddingRight=c?a.oScroll.iBarWidth+"px":"0px"}h(d).scroll();if(a.bSorted||a.bFiltered){d.scrollTop=0}}function N(a,b,c){for(var d=0,f=b.length;d<f;d++){for(var g=0,i=b[d].childNodes.length;g<i;g++){1==b[d].childNodes[g].nodeType&&(c?a(b[d].childNodes[g],c[d].childNodes[g]):a(b[d].childNodes[g]))}}}function La(a,b){if(!a||null===a||""===a){return 0}b||(b=l.getElementsByTagName("body")[0]);var c,d=l.createElement("div");d.style.width=q(a);b.appendChild(d);c=d.offsetWidth;b.removeChild(d);return c}function ba(a){var b=0,c,d=0,f=a.aoColumns.length,g,i=h("th",a.nTHead),e=a.nTable.getAttribute("width");for(g=0;g<f;g++){if(a.aoColumns[g].bVisible&&(d++,null!==a.aoColumns[g].sWidth)){c=La(a.aoColumns[g].sWidthOrig,a.nTable.parentNode);if(null!==c){a.aoColumns[g].sWidth=q(c)}b++}}if(f==i.length&&0===b&&d==f&&""===a.oScroll.sX&&""===a.oScroll.sY){for(g=0;g<a.aoColumns.length;g++){if(c=h(i[g]).width(),null!==c){a.aoColumns[g].sWidth=q(c)}}}else{b=a.nTable.cloneNode(!1);g=a.nTHead.cloneNode(!0);d=l.createElement("tbody");c=l.createElement("tr");b.removeAttribute("id");b.appendChild(g);null!==a.nTFoot&&(b.appendChild(a.nTFoot.cloneNode(!0)),N(function(a){a.style.width=""},b.getElementsByTagName("tr")));b.appendChild(d);d.appendChild(c);d=h("thead th",b);0===d.length&&(d=h("tbody tr:eq(0)>td",b));i=O(a,g);for(g=d=0;g<f;g++){var j=a.aoColumns[g];j.bVisible&&null!==j.sWidthOrig&&""!==j.sWidthOrig?i[g-d].style.width=q(j.sWidthOrig):j.bVisible?i[g-d].style.width="":d++}for(g=0;g<f;g++){a.aoColumns[g].bVisible&&(d=Ma(a,g),null!==d&&(d=d.cloneNode(!0),""!==a.aoColumns[g].sContentPadding&&(d.innerHTML+=a.aoColumns[g].sContentPadding),c.appendChild(d)))}f=a.nTable.parentNode;f.appendChild(b);if(""!==a.oScroll.sX&&""!==a.oScroll.sXInner){b.style.width=q(a.oScroll.sXInner)}else{if(""!==a.oScroll.sX){if(b.style.width="",h(b).width()<f.offsetWidth){b.style.width=q(f.offsetWidth)}}else{if(""!==a.oScroll.sY){b.style.width=q(f.offsetWidth)}else{if(e){b.style.width=q(e)}}}}b.style.visibility="hidden";Na(a,b);f=h("tbody tr:eq(0)",b).children();0===f.length&&(f=O(a,h("thead",b)[0]));if(""!==a.oScroll.sX){for(g=d=c=0;g<a.aoColumns.length;g++){a.aoColumns[g].bVisible&&(c=null===a.aoColumns[g].sWidthOrig?c+h(f[d]).outerWidth():c+(parseInt(a.aoColumns[g].sWidth.replace("px",""),10)+(h(f[d]).outerWidth()-h(f[d]).width())),d++)}b.style.width=q(c);a.nTable.style.width=q(c)}for(g=d=0;g<a.aoColumns.length;g++){if(a.aoColumns[g].bVisible){c=h(f[d]).width();if(null!==c&&0<c){a.aoColumns[g].sWidth=q(c)}d++}}f=h(b).css("width");a.nTable.style.width=-1!==f.indexOf("%")?f:q(h(b).outerWidth());b.parentNode.removeChild(b)}if(e){a.nTable.style.width=q(e)}}function Na(a,b){if(""===a.oScroll.sX&&""!==a.oScroll.sY){h(b).width(),b.style.width=q(h(b).outerWidth()-a.oScroll.iBarWidth)}else{if(""!==a.oScroll.sX){b.style.width=q(h(b).outerWidth())}}}function Ma(a,b){var c=Oa(a,b);if(0>c){return null}if(null===a.aoData[c].nTr){var d=l.createElement("td");d.innerHTML=w(a,c,b,"");return d}return L(a,c)[b]}function Oa(a,b){for(var c=-1,d=-1,f=0;f<a.aoData.length;f++){var g=w(a,f,b,"display")+"",g=g.replace(/<.*?>/g,"");if(g.length>c){c=g.length,d=f}}return d}function q(a){if(null===a){return"0px"}if("number"==typeof a){return 0>a?"0px":a+"px"}var b=a.charCodeAt(a.length-1);return 48>b||57<b?a:a+"px"}function Pa(){var a=l.createElement("p"),b=a.style;b.width="100%";b.height="200px";b.padding="0px";var c=l.createElement("div"),b=c.style;b.position="absolute";b.top="0px";b.left="0px";b.visibility="hidden";b.width="200px";b.height="150px";b.padding="0px";b.overflow="hidden";c.appendChild(a);l.body.appendChild(c);b=a.offsetWidth;c.style.overflow="scroll";a=a.offsetWidth;if(b==a){a=c.clientWidth}l.body.removeChild(c);return b-a}function P(a,b){var c,d,f,g,i,e,o=[],n=[],k=j.ext.oSort,s=a.aoData,l=a.aoColumns,p=a.oLanguage.oAria;if(!a.oFeatures.bServerSide&&(0!==a.aaSorting.length||null!==a.aaSortingFixed)){o=null!==a.aaSortingFixed?a.aaSortingFixed.concat(a.aaSorting):a.aaSorting.slice();for(c=0;c<o.length;c++){if(d=o[c][0],f=r(a,d),g=a.aoColumns[d].sSortDataType,j.ext.afnSortData[g]){if(i=j.ext.afnSortData[g].call(a.oInstance,a,d,f),i.length===s.length){for(f=0,g=s.length;f<g;f++){I(a,f,d,i[f])}}else{F(a,0,"Returned data sort array (col "+d+") is the wrong length")}}}for(c=0,d=a.aiDisplayMaster.length;c<d;c++){n[a.aiDisplayMaster[c]]=c}var q=o.length,x;for(c=0,d=s.length;c<d;c++){for(f=0;f<q;f++){x=l[o[f][0]].aDataSort;for(i=0,e=x.length;i<e;i++){g=l[x[i]].sType,g=k[(g?g:"string")+"-pre"],s[c]._aSortData[x[i]]=g?g(w(a,c,x[i],"sort")):w(a,c,x[i],"sort")}}}a.aiDisplayMaster.sort(function(a,b){var c,d,f,g,i;for(c=0;c<q;c++){i=l[o[c][0]].aDataSort;for(d=0,f=i.length;d<f;d++){if(g=l[i[d]].sType,g=k[(g?g:"string")+"-"+o[c][1]](s[a]._aSortData[i[d]],s[b]._aSortData[i[d]]),0!==g){return g}}}return k["numeric-asc"](n[a],n[b])})}(b===m||b)&&!a.oFeatures.bDeferRender&&Q(a);for(c=0,d=a.aoColumns.length;c<d;c++){g=l[c].sTitle.replace(/<.*?>/g,""),f=l[c].nTh,f.removeAttribute("aria-sort"),f.removeAttribute("aria-label"),l[c].bSortable?0<o.length&&o[0][0]==c?(f.setAttribute("aria-sort","asc"==o[0][1]?"ascending":"descending"),f.setAttribute("aria-label",g+("asc"==(l[c].asSorting[o[0][2]+1]?l[c].asSorting[o[0][2]+1]:l[c].asSorting[0])?p.sSortAscending:p.sSortDescending))):f.setAttribute("aria-label",g+("asc"==l[c].asSorting[0]?p.sSortAscending:p.sSortDescending)):f.setAttribute("aria-label",g)}a.bSorted=!0;h(a.oInstance).trigger("sort",a);a.oFeatures.bFilter?M(a,a.oPreviousSearch,1):(a.aiDisplay=a.aiDisplayMaster.slice(),a._iDisplayStart=0,B(a),z(a))}function ga(a,b,c,d){Qa(b,{},function(b){if(!1!==a.aoColumns[c].bSortable){var g=function(){var d,g;if(b.shiftKey){for(var e=!1,h=0;h<a.aaSorting.length;h++){if(a.aaSorting[h][0]==c){e=!0;d=a.aaSorting[h][0];g=a.aaSorting[h][2]+1;a.aoColumns[d].asSorting[g]?(a.aaSorting[h][1]=a.aoColumns[d].asSorting[g],a.aaSorting[h][2]=g):a.aaSorting.splice(h,1);break}}!1===e&&a.aaSorting.push([c,a.aoColumns[c].asSorting[0],0])}else{1==a.aaSorting.length&&a.aaSorting[0][0]==c?(d=a.aaSorting[0][0],g=a.aaSorting[0][2]+1,a.aoColumns[d].asSorting[g]||(g=0),a.aaSorting[0][1]=a.aoColumns[d].asSorting[g],a.aaSorting[0][2]=g):(a.aaSorting.splice(0,a.aaSorting.length),a.aaSorting.push([c,a.aoColumns[c].asSorting[0],0]))}P(a)};a.oFeatures.bProcessing?(G(a,!0),setTimeout(function(){g();a.oFeatures.bServerSide||G(a,!1)},0)):g();"function"==typeof d&&d(a)}})}function Q(a){var b,c,d,f,g,e=a.aoColumns.length,j=a.oClasses;for(b=0;b<e;b++){a.aoColumns[b].bSortable&&h(a.aoColumns[b].nTh).removeClass(j.sSortAsc+" "+j.sSortDesc+" "+a.aoColumns[b].sSortingClass)}f=null!==a.aaSortingFixed?a.aaSortingFixed.concat(a.aaSorting):a.aaSorting.slice();for(b=0;b<a.aoColumns.length;b++){if(a.aoColumns[b].bSortable){g=a.aoColumns[b].sSortingClass;d=-1;for(c=0;c<f.length;c++){if(f[c][0]==b){g="asc"==f[c][1]?j.sSortAsc:j.sSortDesc;d=c;break}}h(a.aoColumns[b].nTh).addClass(g);a.bJUI&&(c=h("span."+j.sSortIcon,a.aoColumns[b].nTh),c.removeClass(j.sSortJUIAsc+" "+j.sSortJUIDesc+" "+j.sSortJUI+" "+j.sSortJUIAscAllowed+" "+j.sSortJUIDescAllowed),c.addClass(-1==d?a.aoColumns[b].sSortingClassJUI:"asc"==f[d][1]?j.sSortJUIAsc:j.sSortJUIDesc))}else{h(a.aoColumns[b].nTh).addClass(a.aoColumns[b].sSortingClass)}}g=j.sSortColumn;if(a.oFeatures.bSort&&a.oFeatures.bSortClasses){d=L(a);if(a.oFeatures.bDeferRender){h(d).removeClass(g+"1 "+g+"2 "+g+"3")}else{if(d.length>=e){for(b=0;b<e;b++){if(-1!=d[b].className.indexOf(g+"1")){for(c=0,a=d.length/e;c<a;c++){d[e*c+b].className=h.trim(d[e*c+b].className.replace(g+"1",""))}}else{if(-1!=d[b].className.indexOf(g+"2")){for(c=0,a=d.length/e;c<a;c++){d[e*c+b].className=h.trim(d[e*c+b].className.replace(g+"2",""))}}else{if(-1!=d[b].className.indexOf(g+"3")){for(c=0,a=d.length/e;c<a;c++){d[e*c+b].className=h.trim(d[e*c+b].className.replace(" "+g+"3",""))}}}}}}}var j=1,o;for(b=0;b<f.length;b++){o=parseInt(f[b][0],10);for(c=0,a=d.length/e;c<a;c++){d[e*c+o].className+=" "+g+j}3>j&&j++}}}function qa(a){if(a.oFeatures.bStateSave&&!a.bDestroying){var b,c;b=a.oScroll.bInfinite;var d={iCreate:(new Date).getTime(),iStart:b?0:a._iDisplayStart,iEnd:b?a._iDisplayLength:a._iDisplayEnd,iLength:a._iDisplayLength,aaSorting:h.extend(!0,[],a.aaSorting),oSearch:h.extend(!0,{},a.oPreviousSearch),aoSearchCols:h.extend(!0,[],a.aoPreSearchCols),abVisCols:[]};for(b=0,c=a.aoColumns.length;b<c;b++){d.abVisCols.push(a.aoColumns[b].bVisible)}D(a,"aoStateSaveParams","stateSaveParams",[a,d]);a.fnStateSave.call(a.oInstance,a,d)}}function Ra(a,b){if(a.oFeatures.bStateSave){var c=a.fnStateLoad.call(a.oInstance,a);if(c){var d=D(a,"aoStateLoadParams","stateLoadParams",[a,c]);if(-1===h.inArray(!1,d)){a.oLoadedState=h.extend(!0,{},c);a._iDisplayStart=c.iStart;a.iInitDisplayStart=c.iStart;a._iDisplayEnd=c.iEnd;a._iDisplayLength=c.iLength;a.aaSorting=c.aaSorting.slice();a.saved_aaSorting=c.aaSorting.slice();h.extend(a.oPreviousSearch,c.oSearch);h.extend(!0,a.aoPreSearchCols,c.aoSearchCols);b.saved_aoColumns=[];for(d=0;d<c.abVisCols.length;d++){b.saved_aoColumns[d]={},b.saved_aoColumns[d].bVisible=c.abVisCols[d]}D(a,"aoStateLoaded","stateLoaded",[a,c])}}}}function Sa(a){for(var b=V.location.pathname.split("/"),a=a+"_"+b[b.length-1].replace(/[\/:]/g,"").toLowerCase()+"=",b=l.cookie.split(";"),c=0;c<b.length;c++){for(var d=b[c];" "==d.charAt(0);){d=d.substring(1,d.length)}if(0===d.indexOf(a)){return decodeURIComponent(d.substring(a.length,d.length))}}return null}function t(a){for(var b=0;b<j.settings.length;b++){if(j.settings[b].nTable===a){return j.settings[b]}}return null}function S(a){for(var b=[],a=a.aoData,c=0,d=a.length;c<d;c++){null!==a[c].nTr&&b.push(a[c].nTr)}return b}function L(a,b){var c=[],d,f,g,e,h,j;f=0;var o=a.aoData.length;b!==m&&(f=b,o=b+1);for(g=f;g<o;g++){if(j=a.aoData[g],null!==j.nTr){f=[];for(e=0,h=j.nTr.childNodes.length;e<h;e++){d=j.nTr.childNodes[e].nodeName.toLowerCase(),("td"==d||"th"==d)&&f.push(j.nTr.childNodes[e])}d=0;for(e=0,h=a.aoColumns.length;e<h;e++){a.aoColumns[e].bVisible?c.push(f[e-d]):(c.push(j._anHidden[e]),d++)}}}return c}function F(a,b,c){a=null===a?"DataTables warning: "+c:"DataTables warning (table id = '"+a.sTableId+"'): "+c;if(0===b){if("alert"==j.ext.sErrMode){alert(a)}else{throw Error(a)}}else{V.console&&console.log&&console.log(a)}}function p(a,b,c,d){d===m&&(d=c);b[c]!==m&&(a[d]=b[c])}function Ta(a,b){for(var c in b){b.hasOwnProperty(c)&&("object"===typeof e[c]&&!1===h.isArray(b[c])?h.extend(!0,a[c],b[c]):a[c]=b[c])}return a}function Qa(a,b,c){h(a).bind("click.DT",b,function(b){a.blur();c(b)}).bind("keypress.DT",b,function(a){13===a.which&&c(a)}).bind("selectstart.DT",function(){return !1})}function C(a,b,c,d){c&&a[b].push({fn:c,sName:d})}function D(a,b,c,d){for(var b=a[b],f=[],g=b.length-1;0<=g;g--){f.push(b[g].fn.apply(a.oInstance,d))}null!==c&&h(a.oInstance).trigger(c,d);return f}function Ua(a){return function(){var b=[t(this[j.ext.iApiIndex])].concat(Array.prototype.slice.call(arguments));return j.ext.oApi[a].apply(this,b)}}var Va=V.JSON?JSON.stringify:function(a){var b=typeof a;if("object"!==b||null===a){return"string"===b&&(a='"'+a+'"'),a+""}var c,d,f=[],g=h.isArray(a);for(c in a){d=a[c],b=typeof d,"string"===b?d='"'+d+'"':"object"===b&&null!==d&&(d=Va(d)),f.push((g?"":'"'+c+'":')+d)}return(g?"[":"{")+f+(g?"]":"}")};this.$=function(a,b){var c,d,f=[],g=t(this[j.ext.iApiIndex]);b||(b={});b=h.extend({},{filter:"none",order:"current",page:"all"},b);if("current"==b.page){for(c=g._iDisplayStart,d=g.fnDisplayEnd();c<d;c++){f.push(g.aoData[g.aiDisplay[c]].nTr)}}else{if("current"==b.order&&"none"==b.filter){for(c=0,d=g.aiDisplayMaster.length;c<d;c++){f.push(g.aoData[g.aiDisplayMaster[c]].nTr)}}else{if("current"==b.order&&"applied"==b.filter){for(c=0,d=g.aiDisplay.length;c<d;c++){f.push(g.aoData[g.aiDisplay[c]].nTr)}}else{if("original"==b.order&&"none"==b.filter){for(c=0,d=g.aoData.length;c<d;c++){f.push(g.aoData[c].nTr)}}else{if("original"==b.order&&"applied"==b.filter){for(c=0,d=g.aoData.length;c<d;c++){-1!==h.inArray(c,g.aiDisplay)&&f.push(g.aoData[c].nTr)}}else{F(g,1,"Unknown selection options")}}}}}d=h(f);c=d.filter(a);d=d.find(a);return h([].concat(h.makeArray(c),h.makeArray(d)))};this._=function(a,b){var c=[],d,f,g=this.$(a,b);for(d=0,f=g.length;d<f;d++){c.push(this.fnGetData(g[d]))}return c};this.fnAddData=function(a,b){if(0===a.length){return[]}var c=[],d,f=t(this[j.ext.iApiIndex]);if("object"===typeof a[0]&&null!==a[0]){for(var g=0;g<a.length;g++){d=H(f,a[g]);if(-1==d){return c}c.push(d)}}else{d=H(f,a);if(-1==d){return c}c.push(d)}f.aiDisplay=f.aiDisplayMaster.slice();(b===m||b)&&$(f);return c};this.fnAdjustColumnSizing=function(a){var b=t(this[j.ext.iApiIndex]);k(b);a===m||a?this.fnDraw(!1):(""!==b.oScroll.sX||""!==b.oScroll.sY)&&this.oApi._fnScrollDraw(b)};this.fnClearTable=function(a){var b=t(this[j.ext.iApiIndex]);ea(b);(a===m||a)&&z(b)};this.fnClose=function(a){for(var b=t(this[j.ext.iApiIndex]),c=0;c<b.aoOpenRows.length;c++){if(b.aoOpenRows[c].nParent==a){return(a=b.aoOpenRows[c].nTr.parentNode)&&a.removeChild(b.aoOpenRows[c].nTr),b.aoOpenRows.splice(c,1),0}}return 1};this.fnDeleteRow=function(a,b,c){var d=t(this[j.ext.iApiIndex]),f,g,a="object"===typeof a?K(d,a):a,e=d.aoData.splice(a,1);for(f=0,g=d.aoData.length;f<g;f++){if(null!==d.aoData[f].nTr){d.aoData[f].nTr._DT_RowIndex=f}}f=h.inArray(a,d.aiDisplay);d.asDataSearch.splice(f,1);fa(d.aiDisplayMaster,a);fa(d.aiDisplay,a);"function"===typeof b&&b.call(this,d,e);if(d._iDisplayStart>=d.aiDisplay.length&&(d._iDisplayStart-=d._iDisplayLength,0>d._iDisplayStart)){d._iDisplayStart=0}if(c===m||c){B(d),z(d)}return e};this.fnDestroy=function(a){var b=t(this[j.ext.iApiIndex]),c=b.nTableWrapper.parentNode,d=b.nTBody,f,g,a=a===m?!1:!0;b.bDestroying=!0;D(b,"aoDestroyCallback","destroy",[b]);for(f=0,g=b.aoColumns.length;f<g;f++){!1===b.aoColumns[f].bVisible&&this.fnSetColumnVis(f,!0)}h(b.nTableWrapper).find("*").andSelf().unbind(".DT");h("tbody>tr>td."+b.oClasses.sRowEmpty,b.nTable).parent().remove();b.nTable!=b.nTHead.parentNode&&(h(b.nTable).children("thead").remove(),b.nTable.appendChild(b.nTHead));b.nTFoot&&b.nTable!=b.nTFoot.parentNode&&(h(b.nTable).children("tfoot").remove(),b.nTable.appendChild(b.nTFoot));b.nTable.parentNode.removeChild(b.nTable);h(b.nTableWrapper).remove();b.aaSorting=[];b.aaSortingFixed=[];Q(b);h(S(b)).removeClass(b.asStripeClasses.join(" "));h("th, td",b.nTHead).removeClass([b.oClasses.sSortable,b.oClasses.sSortableAsc,b.oClasses.sSortableDesc,b.oClasses.sSortableNone].join(" "));b.bJUI&&(h("th span."+b.oClasses.sSortIcon+", td span."+b.oClasses.sSortIcon,b.nTHead).remove(),h("th, td",b.nTHead).each(function(){var a=h("div."+b.oClasses.sSortJUIWrapper,this),c=a.contents();h(this).append(c);a.remove()}));!a&&b.nTableReinsertBefore?c.insertBefore(b.nTable,b.nTableReinsertBefore):a||c.appendChild(b.nTable);for(f=0,g=b.aoData.length;f<g;f++){null!==b.aoData[f].nTr&&d.appendChild(b.aoData[f].nTr)}if(!0===b.oFeatures.bAutoWidth){b.nTable.style.width=q(b.sDestroyWidth)}h(d).children("tr:even").addClass(b.asDestroyStripes[0]);h(d).children("tr:odd").addClass(b.asDestroyStripes[1]);for(f=0,g=j.settings.length;f<g;f++){j.settings[f]==b&&j.settings.splice(f,1)}b=null};this.fnDraw=function(a){var b=t(this[j.ext.iApiIndex]);!1===a?(B(b),z(b)):$(b)};this.fnFilter=function(a,b,c,d,f,g){var e=t(this[j.ext.iApiIndex]);if(e.oFeatures.bFilter){if(c===m||null===c){c=!1}if(d===m||null===d){d=!0}if(f===m||null===f){f=!0}if(g===m||null===g){g=!0}if(b===m||null===b){if(M(e,{sSearch:a+"",bRegex:c,bSmart:d,bCaseInsensitive:g},1),f&&e.aanFeatures.f){b=e.aanFeatures.f;c=0;for(d=b.length;c<d;c++){h(b[c]._DT_Input).val(a)}}}else{h.extend(e.aoPreSearchCols[b],{sSearch:a+"",bRegex:c,bSmart:d,bCaseInsensitive:g}),M(e,e.oPreviousSearch,1)}}};this.fnGetData=function(a,b){var c=t(this[j.ext.iApiIndex]);if(a!==m){var d=a;if("object"===typeof a){var f=a.nodeName.toLowerCase();"tr"===f?d=K(c,a):"td"===f&&(d=K(c,a.parentNode),b=da(c,d,a))}return b!==m?w(c,d,b,""):c.aoData[d]!==m?c.aoData[d]._aData:null}return Y(c)};this.fnGetNodes=function(a){var b=t(this[j.ext.iApiIndex]);return a!==m?b.aoData[a]!==m?b.aoData[a].nTr:null:S(b)};this.fnGetPosition=function(a){var b=t(this[j.ext.iApiIndex]),c=a.nodeName.toUpperCase();if("TR"==c){return K(b,a)}return"TD"==c||"TH"==c?(c=K(b,a.parentNode),a=da(b,c,a),[c,r(b,a),a]):null};this.fnIsOpen=function(a){for(var b=t(this[j.ext.iApiIndex]),c=0;c<b.aoOpenRows.length;c++){if(b.aoOpenRows[c].nParent==a){return !0}}return !1};this.fnOpen=function(a,b,c){var d=t(this[j.ext.iApiIndex]),f=S(d);if(-1!==h.inArray(a,f)){this.fnClose(a);var f=l.createElement("tr"),g=l.createElement("td");f.appendChild(g);g.className=c;g.colSpan=v(d);"string"===typeof b?g.innerHTML=b:h(g).html(b);b=h("tr",d.nTBody);-1!=h.inArray(a,b)&&h(f).insertAfter(a);d.aoOpenRows.push({nTr:f,nParent:a});return f}};this.fnPageChange=function(a,b){var c=t(this[j.ext.iApiIndex]);pa(c,a);B(c);(b===m||b)&&z(c)};this.fnSetColumnVis=function(a,b,c){var d=t(this[j.ext.iApiIndex]),f,g,e=d.aoColumns,h=d.aoData,o,n;if(e[a].bVisible!=b){if(b){for(f=g=0;f<a;f++){e[f].bVisible&&g++}n=g>=v(d);if(!n){for(f=a;f<e.length;f++){if(e[f].bVisible){o=f;break}}}for(f=0,g=h.length;f<g;f++){null!==h[f].nTr&&(n?h[f].nTr.appendChild(h[f]._anHidden[a]):h[f].nTr.insertBefore(h[f]._anHidden[a],L(d,f)[o]))}}else{for(f=0,g=h.length;f<g;f++){null!==h[f].nTr&&(o=L(d,f)[a],h[f]._anHidden[a]=o,o.parentNode.removeChild(o))}}e[a].bVisible=b;U(d,d.aoHeader);d.nTFoot&&U(d,d.aoFooter);for(f=0,g=d.aoOpenRows.length;f<g;f++){d.aoOpenRows[f].nTr.colSpan=v(d)}if(c===m||c){k(d),z(d)}qa(d)}};this.fnSettings=function(){return t(this[j.ext.iApiIndex])};this.fnSort=function(a){var b=t(this[j.ext.iApiIndex]);b.aaSorting=a;P(b)};this.fnSortListener=function(a,b,c){ga(t(this[j.ext.iApiIndex]),a,b,c)};this.fnUpdate=function(a,b,c,d,f){var e=t(this[j.ext.iApiIndex]),b="object"===typeof b?K(e,b):b;if(e.__fnUpdateDeep===m&&h.isArray(a)&&"object"===typeof a){e.aoData[b]._aData=a.slice();e.__fnUpdateDeep=!0;for(c=0;c<e.aoColumns.length;c++){this.fnUpdate(w(e,b,c),b,c,!1,!1)}e.__fnUpdateDeep=m}else{if(e.__fnUpdateDeep===m&&null!==a&&"object"===typeof a){e.aoData[b]._aData=h.extend(!0,{},a);e.__fnUpdateDeep=!0;for(c=0;c<e.aoColumns.length;c++){this.fnUpdate(w(e,b,c),b,c,!1,!1)}e.__fnUpdateDeep=m}else{I(e,b,c,a);var a=w(e,b,c,"display"),i=e.aoColumns[c];null!==i.fnRender&&(a=R(e,b,c),i.bUseRendered&&I(e,b,c,a));if(null!==e.aoData[b].nTr){L(e,b)[c].innerHTML=a}}}c=h.inArray(b,e.aiDisplay);e.asDataSearch[c]=ma(e,X(e,b,"filter"));(f===m||f)&&k(e);(d===m||d)&&$(e);return 0};this.fnVersionCheck=j.ext.fnVersionCheck;this.oApi={_fnExternApiFunc:Ua,_fnInitialise:aa,_fnInitComplete:Z,_fnLanguageCompat:oa,_fnAddColumn:o,_fnColumnOptions:s,_fnAddData:H,_fnCreateTr:ca,_fnGatherData:ua,_fnBuildHead:va,_fnDrawHead:U,_fnDraw:z,_fnReDraw:$,_fnAjaxUpdate:wa,_fnAjaxParameters:Ea,_fnAjaxUpdateDraw:Fa,_fnServerParams:ia,_fnAddOptionsHtml:xa,_fnFeatureHtmlTable:Ba,_fnScrollDraw:Ka,_fnAdjustColumnSizing:k,_fnFeatureHtmlFilter:za,_fnFilterComplete:M,_fnFilterCustom:Ia,_fnFilterColumn:Ha,_fnFilter:Ga,_fnBuildSearchArray:ja,_fnBuildSearchRow:ma,_fnFilterCreateSearch:ka,_fnDataToSearch:la,_fnSort:P,_fnSortAttachListener:ga,_fnSortingClasses:Q,_fnFeatureHtmlPaginate:Da,_fnPageChange:pa,_fnFeatureHtmlInfo:Ca,_fnUpdateInfo:Ja,_fnFeatureHtmlLength:ya,_fnFeatureHtmlProcessing:Aa,_fnProcessingDisplay:G,_fnVisibleToColumnIndex:x,_fnColumnIndexToVisible:r,_fnNodeToDataIndex:K,_fnVisbleColumns:v,_fnCalculateEnd:B,_fnConvertToWidth:La,_fnCalculateColumnWidths:ba,_fnScrollingWidthAdjust:Na,_fnGetWidestNode:Ma,_fnGetMaxLenString:Oa,_fnStringToCss:q,_fnDetectType:A,_fnSettingsFromNode:t,_fnGetDataMaster:Y,_fnGetTrNodes:S,_fnGetTdNodes:L,_fnEscapeRegex:na,_fnDeleteIndex:fa,_fnReOrderIndex:E,_fnColumnOrdering:y,_fnLog:F,_fnClearTable:ea,_fnSaveState:qa,_fnLoadState:Ra,_fnCreateCookie:function(a,b,c,d,e){var g=new Date;g.setTime(g.getTime()+1000*c);var c=V.location.pathname.split("/"),a=a+"_"+c.pop().replace(/[\/:]/g,"").toLowerCase(),i;null!==e?(i="function"===typeof h.parseJSON?h.parseJSON(b):eval("("+b+")"),b=e(a,i,g.toGMTString(),c.join("/")+"/")):b=a+"="+encodeURIComponent(b)+"; expires="+g.toGMTString()+"; path="+c.join("/")+"/";e="";g=9999999999999;if(4096<(null!==Sa(a)?l.cookie.length:b.length+l.cookie.length)+10){for(var a=l.cookie.split(";"),j=0,o=a.length;j<o;j++){if(-1!=a[j].indexOf(d)){var k=a[j].split("=");try{i=eval("("+decodeURIComponent(k[1])+")")}catch(m){continue}if(i.iCreate&&i.iCreate<g){e=k[0],g=i.iCreate}}}if(""!==e){l.cookie=e+"=; expires=Thu, 01-Jan-1970 00:00:01 GMT; path="+c.join("/")+"/"}}l.cookie=b},_fnReadCookie:Sa,_fnDetectHeader:T,_fnGetUniqueThs:O,_fnScrollBarWidth:Pa,_fnApplyToChildren:N,_fnMap:p,_fnGetRowData:X,_fnGetCellData:w,_fnSetCellData:I,_fnGetObjectDataFn:W,_fnSetObjectDataFn:ta,_fnApplyColumnDefs:J,_fnBindAction:Qa,_fnExtend:Ta,_fnCallbackReg:C,_fnCallbackFire:D,_fnJsonString:Va,_fnRender:R,_fnNodeToColumnIndex:da,_fnInfoMacros:ha};h.extend(j.ext.oApi,this.oApi);for(var ra in j.ext.oApi){ra&&(this[ra]=Ua(ra))}var sa=this;return this.each(function(){var a=0,b,c,d;c=this.getAttribute("id");var f=!1,g=!1;if("table"!=this.nodeName.toLowerCase()){F(null,0,"Attempted to initialise DataTables on a node which is not a table: "+this.nodeName)}else{for(a=0,b=j.settings.length;a<b;a++){if(j.settings[a].nTable==this){if(e===m||e.bRetrieve){return j.settings[a].oInstance}if(e.bDestroy){j.settings[a].oInstance.fnDestroy();break}else{F(j.settings[a],0,"Cannot reinitialise DataTable.\n\nTo retrieve the DataTables object for this table, pass no arguments or see the docs for bRetrieve and bDestroy");return}}if(j.settings[a].sTableId==this.id){j.settings.splice(a,1);break}}if(null===c||""===c){this.id=c="DataTables_Table_"+j.ext._oExternConfig.iNextUnique++}var i=h.extend(!0,{},j.models.oSettings,{nTable:this,oApi:sa.oApi,oInit:e,sDestroyWidth:h(this).width(),sInstance:c,sTableId:c});j.settings.push(i);i.oInstance=1===sa.length?sa:h(this).dataTable();e||(e={});e.oLanguage&&oa(e.oLanguage);e=Ta(h.extend(!0,{},j.defaults),e);p(i.oFeatures,e,"bPaginate");p(i.oFeatures,e,"bLengthChange");p(i.oFeatures,e,"bFilter");p(i.oFeatures,e,"bSort");p(i.oFeatures,e,"bInfo");p(i.oFeatures,e,"bProcessing");p(i.oFeatures,e,"bAutoWidth");p(i.oFeatures,e,"bSortClasses");p(i.oFeatures,e,"bServerSide");p(i.oFeatures,e,"bDeferRender");p(i.oScroll,e,"sScrollX","sX");p(i.oScroll,e,"sScrollXInner","sXInner");p(i.oScroll,e,"sScrollY","sY");p(i.oScroll,e,"bScrollCollapse","bCollapse");p(i.oScroll,e,"bScrollInfinite","bInfinite");p(i.oScroll,e,"iScrollLoadGap","iLoadGap");p(i.oScroll,e,"bScrollAutoCss","bAutoCss");p(i,e,"asStripeClasses");p(i,e,"asStripClasses","asStripeClasses");p(i,e,"fnServerData");p(i,e,"fnFormatNumber");p(i,e,"sServerMethod");p(i,e,"aaSorting");p(i,e,"aaSortingFixed");p(i,e,"aLengthMenu");p(i,e,"sPaginationType");p(i,e,"sAjaxSource");p(i,e,"sAjaxDataProp");p(i,e,"iCookieDuration");p(i,e,"sCookiePrefix");p(i,e,"sDom");p(i,e,"bSortCellsTop");p(i,e,"iTabIndex");p(i,e,"oSearch","oPreviousSearch");p(i,e,"aoSearchCols","aoPreSearchCols");p(i,e,"iDisplayLength","_iDisplayLength");p(i,e,"bJQueryUI","bJUI");p(i,e,"fnCookieCallback");p(i,e,"fnStateLoad");p(i,e,"fnStateSave");p(i.oLanguage,e,"fnInfoCallback");C(i,"aoDrawCallback",e.fnDrawCallback,"user");C(i,"aoServerParams",e.fnServerParams,"user");C(i,"aoStateSaveParams",e.fnStateSaveParams,"user");C(i,"aoStateLoadParams",e.fnStateLoadParams,"user");C(i,"aoStateLoaded",e.fnStateLoaded,"user");C(i,"aoRowCallback",e.fnRowCallback,"user");C(i,"aoRowCreatedCallback",e.fnCreatedRow,"user");C(i,"aoHeaderCallback",e.fnHeaderCallback,"user");C(i,"aoFooterCallback",e.fnFooterCallback,"user");C(i,"aoInitComplete",e.fnInitComplete,"user");C(i,"aoPreDrawCallback",e.fnPreDrawCallback,"user");i.oFeatures.bServerSide&&i.oFeatures.bSort&&i.oFeatures.bSortClasses?C(i,"aoDrawCallback",Q,"server_side_sort_classes"):i.oFeatures.bDeferRender&&C(i,"aoDrawCallback",Q,"defer_sort_classes");if(e.bJQueryUI){if(h.extend(i.oClasses,j.ext.oJUIClasses),e.sDom===j.defaults.sDom&&"lfrtip"===j.defaults.sDom){i.sDom='<"H"lfr>t<"F"ip>'}}else{h.extend(i.oClasses,j.ext.oStdClasses)}h(this).addClass(i.oClasses.sTable);if(""!==i.oScroll.sX||""!==i.oScroll.sY){i.oScroll.iBarWidth=Pa()}if(i.iInitDisplayStart===m){i.iInitDisplayStart=e.iDisplayStart,i._iDisplayStart=e.iDisplayStart}if(e.bStateSave){i.oFeatures.bStateSave=!0,Ra(i,e),C(i,"aoDrawCallback",qa,"state_save")}if(null!==e.iDeferLoading){i.bDeferLoading=!0,a=h.isArray(e.iDeferLoading),i._iRecordsDisplay=a?e.iDeferLoading[0]:e.iDeferLoading,i._iRecordsTotal=a?e.iDeferLoading[1]:e.iDeferLoading}null!==e.aaData&&(g=!0);""!==e.oLanguage.sUrl?(i.oLanguage.sUrl=e.oLanguage.sUrl,h.getJSON(i.oLanguage.sUrl,null,function(a){oa(a);h.extend(!0,i.oLanguage,e.oLanguage,a);aa(i)}),f=!0):h.extend(!0,i.oLanguage,e.oLanguage);if(null===e.asStripeClasses){i.asStripeClasses=[i.oClasses.sStripeOdd,i.oClasses.sStripeEven]}c=!1;d=h(this).children("tbody").children("tr");for(a=0,b=i.asStripeClasses.length;a<b;a++){if(d.filter(":lt(2)").hasClass(i.asStripeClasses[a])){c=!0;break}}if(c){i.asDestroyStripes=["",""],h(d[0]).hasClass(i.oClasses.sStripeOdd)&&(i.asDestroyStripes[0]+=i.oClasses.sStripeOdd+" "),h(d[0]).hasClass(i.oClasses.sStripeEven)&&(i.asDestroyStripes[0]+=i.oClasses.sStripeEven),h(d[1]).hasClass(i.oClasses.sStripeOdd)&&(i.asDestroyStripes[1]+=i.oClasses.sStripeOdd+" "),h(d[1]).hasClass(i.oClasses.sStripeEven)&&(i.asDestroyStripes[1]+=i.oClasses.sStripeEven),d.removeClass(i.asStripeClasses.join(" "))}c=[];a=this.getElementsByTagName("thead");0!==a.length&&(T(i.aoHeader,a[0]),c=O(i));if(null===e.aoColumns){d=[];for(a=0,b=c.length;a<b;a++){d.push(null)}}else{d=e.aoColumns}for(a=0,b=d.length;a<b;a++){if(e.saved_aoColumns!==m&&e.saved_aoColumns.length==b){null===d[a]&&(d[a]={}),d[a].bVisible=e.saved_aoColumns[a].bVisible}o(i,c?c[a]:null)}J(i,e.aoColumnDefs,d,function(a,b){s(i,a,b)});for(a=0,b=i.aaSorting.length;a<b;a++){i.aaSorting[a][0]>=i.aoColumns.length&&(i.aaSorting[a][0]=0);var k=i.aoColumns[i.aaSorting[a][0]];i.aaSorting[a][2]===m&&(i.aaSorting[a][2]=0);e.aaSorting===m&&i.saved_aaSorting===m&&(i.aaSorting[a][1]=k.asSorting[0]);for(c=0,d=k.asSorting.length;c<d;c++){if(i.aaSorting[a][1]==k.asSorting[c]){i.aaSorting[a][2]=c;break}}}Q(i);a=h(this).children("caption").each(function(){this._captionSide=h(this).css("caption-side")});b=h(this).children("thead");0===b.length&&(b=[l.createElement("thead")],this.appendChild(b[0]));i.nTHead=b[0];b=h(this).children("tbody");0===b.length&&(b=[l.createElement("tbody")],this.appendChild(b[0]));i.nTBody=b[0];i.nTBody.setAttribute("role","alert");i.nTBody.setAttribute("aria-live","polite");i.nTBody.setAttribute("aria-relevant","all");b=h(this).children("tfoot");if(0===b.length&&0<a.length&&(""!==i.oScroll.sX||""!==i.oScroll.sY)){b=[l.createElement("tfoot")],this.appendChild(b[0])}if(0<b.length){i.nTFoot=b[0],T(i.aoFooter,i.nTFoot)}if(g){for(a=0;a<e.aaData.length;a++){H(i,e.aaData[a])}}else{ua(i)}i.aiDisplay=i.aiDisplayMaster.slice();i.bInitialised=!0;!1===f&&aa(i)}})};j.fnVersionCheck=function(e){for(var h=function(e,h){for(;e.length<h;){e+="0"}return e},m=j.ext.sVersion.split("."),e=e.split("."),k="",l="",r=0,v=e.length;r<v;r++){k+=h(m[r],3),l+=h(e[r],3)}return parseInt(k,10)>=parseInt(l,10)};j.fnIsDataTable=function(e){for(var h=j.settings,m=0;m<h.length;m++){if(h[m].nTable===e||h[m].nScrollHead===e||h[m].nScrollFoot===e){return !0}}return !1};j.fnTables=function(e){var o=[];jQuery.each(j.settings,function(j,k){(!e||!0===e&&h(k.nTable).is(":visible"))&&o.push(k.nTable)});return o};j.version="1.9.1";j.settings=[];j.models={};j.models.ext={afnFiltering:[],afnSortData:[],aoFeatures:[],aTypes:[],fnVersionCheck:j.fnVersionCheck,iApiIndex:0,ofnSearch:{},oApi:{},oStdClasses:{},oJUIClasses:{},oPagination:{},oSort:{},sVersion:j.version,sErrMode:"alert",_oExternConfig:{iNextUnique:0}};j.models.oSearch={bCaseInsensitive:!0,sSearch:"",bRegex:!1,bSmart:!0};j.models.oRow={nTr:null,_aData:[],_aSortData:[],_anHidden:[],_sRowStripe:""};j.models.oColumn={aDataSort:null,asSorting:null,bSearchable:null,bSortable:null,bUseRendered:null,bVisible:null,_bAutoType:!0,fnCreatedCell:null,fnGetData:null,fnRender:null,fnSetData:null,mDataProp:null,nTh:null,nTf:null,sClass:null,sContentPadding:null,sDefaultContent:null,sName:null,sSortDataType:"std",sSortingClass:null,sSortingClassJUI:null,sTitle:null,sType:null,sWidth:null,sWidthOrig:null};j.defaults={aaData:null,aaSorting:[[0,"asc"]],aaSortingFixed:null,aLengthMenu:[10,25,50,100],aoColumns:null,aoColumnDefs:null,aoSearchCols:[],asStripeClasses:null,bAutoWidth:!0,bDeferRender:!1,bDestroy:!1,bFilter:!0,bInfo:!0,bJQueryUI:!1,bLengthChange:!0,bPaginate:!0,bProcessing:!1,bRetrieve:!1,bScrollAutoCss:!0,bScrollCollapse:!1,bScrollInfinite:!1,bServerSide:!1,bSort:!0,bSortCellsTop:!1,bSortClasses:!0,bStateSave:!1,fnCookieCallback:null,fnCreatedRow:null,fnDrawCallback:null,fnFooterCallback:null,fnFormatNumber:function(e){if(1000>e){return e}for(var h=e+"",e=h.split(""),j="",h=h.length,k=0;k<h;k++){0===k%3&&0!==k&&(j=this.oLanguage.sInfoThousands+j),j=e[h-k-1]+j}return j},fnHeaderCallback:null,fnInfoCallback:null,fnInitComplete:null,fnPreDrawCallback:null,fnRowCallback:null,fnServerData:function(e,j,m,k){k.jqXHR=h.ajax({url:e,data:j,success:function(e){h(k.oInstance).trigger("xhr",k);m(e)},dataType:"json",cache:!1,type:k.sServerMethod,error:function(e,h){"parsererror"==h&&k.oApi._fnLog(k,0,"DataTables warning: JSON data from server could not be parsed. This is caused by a JSON formatting error.")}})},fnServerParams:null,fnStateLoad:function(e){var e=this.oApi._fnReadCookie(e.sCookiePrefix+e.sInstance),j;try{j="function"===typeof h.parseJSON?h.parseJSON(e):eval("("+e+")")}catch(m){j=null}return j},fnStateLoadParams:null,fnStateLoaded:null,fnStateSave:function(e,h){this.oApi._fnCreateCookie(e.sCookiePrefix+e.sInstance,this.oApi._fnJsonString(h),e.iCookieDuration,e.sCookiePrefix,e.fnCookieCallback)},fnStateSaveParams:null,iCookieDuration:7200,iDeferLoading:null,iDisplayLength:10,iDisplayStart:0,iScrollLoadGap:100,iTabIndex:0,oLanguage:{oAria:{sSortAscending:": activate to sort column ascending",sSortDescending:": activate to sort column descending"},oPaginate:{sFirst:"First",sLast:"Last",sNext:"Next",sPrevious:"Previous"},sEmptyTable:"No data available in table",sInfo:"Showing _START_ to _END_ of _TOTAL_ entries",sInfoEmpty:"Showing 0 to 0 of 0 entries",sInfoFiltered:"(filtered from _MAX_ total entries)",sInfoPostFix:"",sInfoThousands:",",sLengthMenu:"Show _MENU_ entries",sLoadingRecords:"Loading...",sProcessing:"Processing...",sSearch:"Search:",sUrl:"",sZeroRecords:"No matching records found"},oSearch:h.extend({},j.models.oSearch),sAjaxDataProp:"aaData",sAjaxSource:null,sCookiePrefix:"SpryMedia_DataTables_",sDom:"lfrtip",sPaginationType:"two_button",sScrollX:"",sScrollXInner:"",sScrollY:"",sServerMethod:"GET"};j.defaults.columns={aDataSort:null,asSorting:["asc","desc"],bSearchable:!0,bSortable:!0,bUseRendered:!0,bVisible:!0,fnCreatedCell:null,fnRender:null,iDataSort:-1,mDataProp:null,sCellType:"td",sClass:"",sContentPadding:"",sDefaultContent:null,sName:"",sSortDataType:"std",sTitle:null,sType:null,sWidth:null};j.models.oSettings={oFeatures:{bAutoWidth:null,bDeferRender:null,bFilter:null,bInfo:null,bLengthChange:null,bPaginate:null,bProcessing:null,bServerSide:null,bSort:null,bSortClasses:null,bStateSave:null},oScroll:{bAutoCss:null,bCollapse:null,bInfinite:null,iBarWidth:0,iLoadGap:null,sX:null,sXInner:null,sY:null},oLanguage:{fnInfoCallback:null},aanFeatures:[],aoData:[],aiDisplay:[],aiDisplayMaster:[],aoColumns:[],aoHeader:[],aoFooter:[],asDataSearch:[],oPreviousSearch:{},aoPreSearchCols:[],aaSorting:null,aaSortingFixed:null,asStripeClasses:null,asDestroyStripes:[],sDestroyWidth:0,aoRowCallback:[],aoHeaderCallback:[],aoFooterCallback:[],aoDrawCallback:[],aoRowCreatedCallback:[],aoPreDrawCallback:[],aoInitComplete:[],aoStateSaveParams:[],aoStateLoadParams:[],aoStateLoaded:[],sTableId:"",nTable:null,nTHead:null,nTFoot:null,nTBody:null,nTableWrapper:null,bDeferLoading:!1,bInitialised:!1,aoOpenRows:[],sDom:null,sPaginationType:"two_button",iCookieDuration:0,sCookiePrefix:"",fnCookieCallback:null,aoStateSave:[],aoStateLoad:[],oLoadedState:null,sAjaxSource:null,sAjaxDataProp:null,bAjaxDataGet:!0,jqXHR:null,fnServerData:null,aoServerParams:[],sServerMethod:null,fnFormatNumber:null,aLengthMenu:null,iDraw:0,bDrawing:!1,iDrawError:-1,_iDisplayLength:10,_iDisplayStart:0,_iDisplayEnd:10,_iRecordsTotal:0,_iRecordsDisplay:0,bJUI:null,oClasses:{},bFiltered:!1,bSorted:!1,bSortCellsTop:null,oInit:null,aoDestroyCallback:[],fnRecordsTotal:function(){return this.oFeatures.bServerSide?parseInt(this._iRecordsTotal,10):this.aiDisplayMaster.length},fnRecordsDisplay:function(){return this.oFeatures.bServerSide?parseInt(this._iRecordsDisplay,10):this.aiDisplay.length},fnDisplayEnd:function(){return this.oFeatures.bServerSide?!1===this.oFeatures.bPaginate||-1==this._iDisplayLength?this._iDisplayStart+this.aiDisplay.length:Math.min(this._iDisplayStart+this._iDisplayLength,this._iRecordsDisplay):this._iDisplayEnd},oInstance:null,sInstance:null,iTabIndex:0,nScrollHead:null,nScrollFoot:null};j.ext=h.extend(!0,{},j.models.ext);h.extend(j.ext.oStdClasses,{sTable:"dataTable",sPagePrevEnabled:"paginate_enabled_previous",sPagePrevDisabled:"paginate_disabled_previous",sPageNextEnabled:"paginate_enabled_next",sPageNextDisabled:"paginate_disabled_next",sPageJUINext:"",sPageJUIPrev:"",sPageButton:"paginate_button",sPageButtonActive:"paginate_active",sPageButtonStaticDisabled:"paginate_button paginate_button_disabled",sPageFirst:"first",sPagePrevious:"previous",sPageNext:"next",sPageLast:"last",sStripeOdd:"odd",sStripeEven:"even",sRowEmpty:"dataTables_empty",sWrapper:"dataTables_wrapper",sFilter:"dataTables_filter",sInfo:"dataTables_info",sPaging:"dataTables_paginate paging_",sLength:"dataTables_length",sProcessing:"dataTables_processing",sSortAsc:"sorting_asc",sSortDesc:"sorting_desc",sSortable:"sorting",sSortableAsc:"sorting_asc_disabled",sSortableDesc:"sorting_desc_disabled",sSortableNone:"sorting_disabled",sSortColumn:"sorting_",sSortJUIAsc:"",sSortJUIDesc:"",sSortJUI:"",sSortJUIAscAllowed:"",sSortJUIDescAllowed:"",sSortJUIWrapper:"",sSortIcon:"",sScrollWrapper:"dataTables_scroll",sScrollHead:"dataTables_scrollHead",sScrollHeadInner:"dataTables_scrollHeadInner",sScrollBody:"dataTables_scrollBody",sScrollFoot:"dataTables_scrollFoot",sScrollFootInner:"dataTables_scrollFootInner",sFooterTH:""});h.extend(j.ext.oJUIClasses,j.ext.oStdClasses,{sPagePrevEnabled:"fg-button ui-button ui-state-default ui-corner-left",sPagePrevDisabled:"fg-button ui-button ui-state-default ui-corner-left ui-state-disabled",sPageNextEnabled:"fg-button ui-button ui-state-default ui-corner-right",sPageNextDisabled:"fg-button ui-button ui-state-default ui-corner-right ui-state-disabled",sPageJUINext:"ui-icon ui-icon-circle-arrow-e",sPageJUIPrev:"ui-icon ui-icon-circle-arrow-w",sPageButton:"fg-button ui-button ui-state-default",sPageButtonActive:"fg-button ui-button ui-state-default ui-state-disabled",sPageButtonStaticDisabled:"fg-button ui-button ui-state-default ui-state-disabled",sPageFirst:"first ui-corner-tl ui-corner-bl",sPageLast:"last ui-corner-tr ui-corner-br",sPaging:"dataTables_paginate fg-buttonset ui-buttonset fg-buttonset-multi ui-buttonset-multi paging_",sSortAsc:"ui-state-default",sSortDesc:"ui-state-default",sSortable:"ui-state-default",sSortableAsc:"ui-state-default",sSortableDesc:"ui-state-default",sSortableNone:"ui-state-default",sSortJUIAsc:"css_right ui-icon ui-icon-triangle-1-n",sSortJUIDesc:"css_right ui-icon ui-icon-triangle-1-s",sSortJUI:"css_right ui-icon ui-icon-carat-2-n-s",sSortJUIAscAllowed:"css_right ui-icon ui-icon-carat-1-n",sSortJUIDescAllowed:"css_right ui-icon ui-icon-carat-1-s",sSortJUIWrapper:"DataTables_sort_wrapper",sSortIcon:"DataTables_sort_icon",sScrollHead:"dataTables_scrollHead ui-state-default",sScrollFoot:"dataTables_scrollFoot ui-state-default",sFooterTH:"ui-state-default"});h.extend(j.ext.oPagination,{two_button:{fnInit:function(e,j,m){var k=e.oLanguage.oPaginate,l=function(h){e.oApi._fnPageChange(e,h.data.action)&&m(e)},k=!e.bJUI?'<a class="'+e.oClasses.sPagePrevDisabled+'" tabindex="'+e.iTabIndex+'" role="button">'+k.sPrevious+'</a><a class="'+e.oClasses.sPageNextDisabled+'" tabindex="'+e.iTabIndex+'" role="button">'+k.sNext+"</a>":'<a class="'+e.oClasses.sPagePrevDisabled+'" tabindex="'+e.iTabIndex+'" role="button"><span class="'+e.oClasses.sPageJUIPrev+'"></span></a><a class="'+e.oClasses.sPageNextDisabled+'" tabindex="'+e.iTabIndex+'" role="button"><span class="'+e.oClasses.sPageJUINext+'"></span></a>';h(j).append(k);var r=h("a",j),k=r[0],r=r[1];e.oApi._fnBindAction(k,{action:"previous"},l);e.oApi._fnBindAction(r,{action:"next"},l);if(!e.aanFeatures.p){j.id=e.sTableId+"_paginate",k.id=e.sTableId+"_previous",r.id=e.sTableId+"_next",k.setAttribute("aria-controls",e.sTableId),r.setAttribute("aria-controls",e.sTableId)}},fnUpdate:function(e){if(e.aanFeatures.p){for(var h=e.oClasses,j=e.aanFeatures.p,k=0,m=j.length;k<m;k++){if(0!==j[k].childNodes.length){j[k].childNodes[0].className=0===e._iDisplayStart?h.sPagePrevDisabled:h.sPagePrevEnabled,j[k].childNodes[1].className=e.fnDisplayEnd()==e.fnRecordsDisplay()?h.sPageNextDisabled:h.sPageNextEnabled}}}}},iFullNumbersShowPages:5,full_numbers:{fnInit:function(e,j,m){var k=e.oLanguage.oPaginate,l=e.oClasses,r=function(h){e.oApi._fnPageChange(e,h.data.action)&&m(e)};h(j).append('<a  tabindex="'+e.iTabIndex+'" class="'+l.sPageButton+" "+l.sPageFirst+'">'+k.sFirst+'</a><a  tabindex="'+e.iTabIndex+'" class="'+l.sPageButton+" "+l.sPagePrevious+'">'+k.sPrevious+'</a><span></span><a tabindex="'+e.iTabIndex+'" class="'+l.sPageButton+" "+l.sPageNext+'">'+k.sNext+'</a><a tabindex="'+e.iTabIndex+'" class="'+l.sPageButton+" "+l.sPageLast+'">'+k.sLast+"</a>");var v=h("a",j),k=v[0],l=v[1],A=v[2],v=v[3];e.oApi._fnBindAction(k,{action:"first"},r);e.oApi._fnBindAction(l,{action:"previous"},r);e.oApi._fnBindAction(A,{action:"next"},r);e.oApi._fnBindAction(v,{action:"last"},r);if(!e.aanFeatures.p){j.id=e.sTableId+"_paginate",k.id=e.sTableId+"_first",l.id=e.sTableId+"_previous",A.id=e.sTableId+"_next",v.id=e.sTableId+"_last"}},fnUpdate:function(e,m){if(e.aanFeatures.p){var l=j.ext.oPagination.iFullNumbersShowPages,k=Math.floor(l/2),x=Math.ceil(e.fnRecordsDisplay()/e._iDisplayLength),r=Math.ceil(e._iDisplayStart/e._iDisplayLength)+1,v="",A,E=e.oClasses,y,J=e.aanFeatures.p,H=function(h){e.oApi._fnBindAction(this,{page:h+A-1},function(h){e.oApi._fnPageChange(e,h.data.page);m(e);h.preventDefault()})};-1===e._iDisplayLength?r=k=A=1:x<l?(A=1,k=x):r<=k?(A=1,k=l):r>=x-k?(A=x-l+1,k=x):(A=r-Math.ceil(l/2)+1,k=A+l-1);for(l=A;l<=k;l++){v+=r!==l?'<a tabindex="'+e.iTabIndex+'" class="'+E.sPageButton+'">'+e.fnFormatNumber(l)+"</a>":'<a tabindex="'+e.iTabIndex+'" class="'+E.sPageButtonActive+'">'+e.fnFormatNumber(l)+"</a>"}for(l=0,k=J.length;l<k;l++){0!==J[l].childNodes.length&&(h("span:eq(0)",J[l]).html(v).children("a").each(H),y=J[l].getElementsByTagName("a"),y=[y[0],y[1],y[y.length-2],y[y.length-1]],h(y).removeClass(E.sPageButton+" "+E.sPageButtonActive+" "+E.sPageButtonStaticDisabled),h([y[0],y[1]]).addClass(1==r?E.sPageButtonStaticDisabled:E.sPageButton),h([y[2],y[3]]).addClass(0===x||r===x||-1===e._iDisplayLength?E.sPageButtonStaticDisabled:E.sPageButton))}}}}});h.extend(j.ext.oSort,{"string-pre":function(e){"string"!=typeof e&&(e=null!==e&&e.toString?e.toString():"");return e.toLowerCase()},"string-asc":function(e,h){return e<h?-1:e>h?1:0},"string-desc":function(e,h){return e<h?1:e>h?-1:0},"html-pre":function(e){return e.replace(/<.*?>/g,"").toLowerCase()},"html-asc":function(e,h){return e<h?-1:e>h?1:0},"html-desc":function(e,h){return e<h?1:e>h?-1:0},"date-pre":function(e){e=Date.parse(e);if(isNaN(e)||""===e){e=Date.parse("01/01/1970 00:00:00")}return e},"date-asc":function(e,h){return e-h},"date-desc":function(e,h){return h-e},"numeric-pre":function(e){return"-"==e||""===e?0:1*e},"numeric-asc":function(e,h){return e-h},"numeric-desc":function(e,h){return h-e}});h.extend(j.ext.aTypes,[function(e){if("number"===typeof e){return"numeric"}if("string"!==typeof e){return null}var h,j=!1;h=e.charAt(0);if(-1=="0123456789-".indexOf(h)){return null}for(var k=1;k<e.length;k++){h=e.charAt(k);if(-1=="0123456789.".indexOf(h)){return null}if("."==h){if(j){return null}j=!0}}return"numeric"},function(e){var h=Date.parse(e);return null!==h&&!isNaN(h)||"string"===typeof e&&0===e.length?"date":null},function(e){return"string"===typeof e&&-1!=e.indexOf("<")&&-1!=e.indexOf(">")?"html":null}]);h.fn.DataTable=j;h.fn.dataTable=j;h.fn.dataTableSettings=j.settings;h.fn.dataTableExt=j.ext})(jQuery,window,document,void 0);$.fn.dataTableExt.oApi.fnPagingInfo=function(a){return{iStart:a._iDisplayStart,iEnd:a.fnDisplayEnd(),iLength:a._iDisplayLength,iTotal:a.fnRecordsTotal(),iFilteredTotal:a.fnRecordsDisplay(),iPage:Math.ceil(a._iDisplayStart/a._iDisplayLength),iTotalPages:Math.ceil(a.fnRecordsDisplay()/a._iDisplayLength)}};$.extend($.fn.dataTableExt.oPagination,{bootstrap:{fnInit:function(e,b,d){var a=e.oLanguage.oPaginate;var f=function(g){g.preventDefault();if(e.oApi._fnPageChange(e,g.data.action)){d(e)}};$(b).addClass("pagination").append('<ul><li class="prev disabled"><a href="#">&larr; '+a.sPrevious+'</a></li><li class="next disabled"><a href="#">'+a.sNext+" &rarr; </a></li></ul>");var c=$("a",b);$(c[0]).bind("click.DT",{action:"previous"},f);$(c[1]).bind("click.DT",{action:"next"},f)},fnUpdate:function(c,k){var l=5;var e=c.oInstance.fnPagingInfo();var h=c.aanFeatures.p;var g,f,d,a,m,b=Math.floor(l/2);if(e.iTotalPages<l){a=1;m=e.iTotalPages}else{if(e.iPage<=b){a=1;m=l}else{if(e.iPage>=(e.iTotalPages-b)){a=e.iTotalPages-l+1;m=e.iTotalPages}else{a=e.iPage-b+1;m=a+l-1}}}for(g=0,iLen=h.length;g<iLen;g++){$("li:gt(0)",h[g]).filter(":not(:last)").remove();for(f=a;f<=m;f++){d=(f==e.iPage+1)?'class="active"':"";$("<li "+d+'><a href="#">'+f+"</a></li>").insertBefore($("li:last",h[g])[0]).bind("click",function(i){i.preventDefault();c._iDisplayStart=(parseInt($("a",this).text(),10)-1)*e.iLength;k(c)})}if(e.iPage===0){$("li:first",h[g]).addClass("disabled")}else{$("li:first",h[g]).removeClass("disabled")}if(e.iPage===e.iTotalPages-1||e.iTotalPages===0){$("li:last",h[g]).addClass("disabled")}else{$("li:last",h[g]).removeClass("disabled")}}}}});
/*!
 * jQuery Form Plugin
 * version: 3.09 (16-APR-2012)
 * @requires jQuery v1.3.2 or later
 *
 * Examples and documentation at: http://malsup.com/jquery/form/
 * Project repository: https://github.com/malsup/form
 * Dual licensed under the MIT and GPL licenses:
 *    http://malsup.github.com/mit-license.txt
 *    http://malsup.github.com/gpl-license-v2.txt
 */
(function(e){var c={};c.fileapi=e("<input type='file'/>").get(0).files!==undefined;c.formdata=window.FormData!==undefined;e.fn.ajaxSubmit=function(g){if(!this.length){d("ajaxSubmit: skipping submit process - no element selected");return this}var f,w,i,l=this;if(typeof g=="function"){g={success:g}}f=this.attr("method");w=this.attr("action");i=(typeof w==="string")?e.trim(w):"";i=i||window.location.href||"";if(i){i=(i.match(/^([^#]+)/)||[])[1]}g=e.extend(true,{url:i,success:e.ajaxSettings.success,type:f||"GET",iframeSrc:/^https/i.test(window.location.href||"")?"javascript:false":"about:blank"},g);var r={};this.trigger("form-pre-serialize",[this,g,r]);if(r.veto){d("ajaxSubmit: submit vetoed via form-pre-serialize trigger");return this}if(g.beforeSerialize&&g.beforeSerialize(this,g)===false){d("ajaxSubmit: submit aborted via beforeSerialize callback");return this}var j=g.traditional;if(j===undefined){j=e.ajaxSettings.traditional}var o=[];var B,C=this.formToArray(g.semantic,o);if(g.data){g.extraData=g.data;B=e.param(g.data,j)}if(g.beforeSubmit&&g.beforeSubmit(C,this,g)===false){d("ajaxSubmit: submit aborted via beforeSubmit callback");return this}this.trigger("form-submit-validate",[C,this,g,r]);if(r.veto){d("ajaxSubmit: submit vetoed via form-submit-validate trigger");return this}var u=e.param(C,j);if(B){u=(u?(u+"&"+B):B)}if(g.type.toUpperCase()=="GET"){g.url+=(g.url.indexOf("?")>=0?"&":"?")+u;g.data=null}else{g.data=u}var E=[];if(g.resetForm){E.push(function(){l.resetForm()})}if(g.clearForm){E.push(function(){l.clearForm(g.includeHidden)})}if(!g.dataType&&g.target){var h=g.success||function(){};E.push(function(q){var k=g.replaceTarget?"replaceWith":"html";e(g.target)[k](q).each(h,arguments)})}else{if(g.success){E.push(g.success)}}g.success=function(H,q,I){var G=g.context||g;for(var F=0,k=E.length;F<k;F++){E[F].apply(G,[H,q,I||l,l])}};var A=e("input:file:enabled[value]",this);var m=A.length>0;var z="multipart/form-data";var t=(l.attr("enctype")==z||l.attr("encoding")==z);var s=c.fileapi&&c.formdata;d("fileAPI :"+s);var n=(m||t)&&!s;if(g.iframe!==false&&(g.iframe||n)){if(g.closeKeepAlive){e.get(g.closeKeepAlive,function(){D(C)})}else{D(C)}}else{if((m||t)&&s){p(C)}else{e.ajax(g)}}for(var v=0;v<o.length;v++){o[v]=null}this.trigger("form-submit-notify",[this,g]);return this;function p(q){var k=new FormData();for(var F=0;F<q.length;F++){k.append(q[F].name,q[F].value)}if(g.extraData){for(var I in g.extraData){if(g.extraData.hasOwnProperty(I)){k.append(I,g.extraData[I])}}}g.data=null;var H=e.extend(true,{},e.ajaxSettings,g,{contentType:false,processData:false,cache:false,type:"POST"});if(g.uploadProgress){H.xhr=function(){var J=jQuery.ajaxSettings.xhr();if(J.upload){J.upload.onprogress=function(N){var M=0;var K=N.loaded||N.position;var L=N.total;if(N.lengthComputable){M=Math.ceil(K/L*100)}g.uploadProgress(N,K,L,M)}}return J}}H.data=null;var G=H.beforeSend;H.beforeSend=function(K,J){J.data=k;if(G){G.call(J,K,g)}};e.ajax(H)}function D(ad){var I=l[0],H,Z,T,ab,W,K,O,M,N,X,aa,R;var L=!!e.fn.prop;if(e(":input[name=submit],:input[id=submit]",I).length){alert('Error: Form elements must not have name or id of "submit".');return}if(ad){for(Z=0;Z<o.length;Z++){H=e(o[Z]);if(L){H.prop("disabled",false)}else{H.removeAttr("disabled")}}}T=e.extend(true,{},e.ajaxSettings,g);T.context=T.context||T;W="jqFormIO"+(new Date().getTime());if(T.iframeTarget){K=e(T.iframeTarget);X=K.attr("name");if(!X){K.attr("name",W)}else{W=X}}else{K=e('<iframe name="'+W+'" src="'+T.iframeSrc+'" />');K.css({position:"absolute",top:"-1000px",left:"-1000px"})}O=K[0];M={aborted:0,responseText:null,responseXML:null,status:0,statusText:"n/a",getAllResponseHeaders:function(){},getResponseHeader:function(){},setRequestHeader:function(){},abort:function(ag){var ah=(ag==="timeout"?"timeout":"aborted");d("aborting upload... "+ah);this.aborted=1;K.attr("src",T.iframeSrc);M.error=ah;if(T.error){T.error.call(T.context,M,ah,ag)}if(ab){e.event.trigger("ajaxError",[M,T,ah])}if(T.complete){T.complete.call(T.context,M,ah)}}};ab=T.global;if(ab&&0===e.active++){e.event.trigger("ajaxStart")}if(ab){e.event.trigger("ajaxSend",[M,T])}if(T.beforeSend&&T.beforeSend.call(T.context,M,T)===false){if(T.global){e.active--}return}if(M.aborted){return}N=I.clk;if(N){X=N.name;if(X&&!N.disabled){T.extraData=T.extraData||{};T.extraData[X]=N.value;if(N.type=="image"){T.extraData[X+".x"]=I.clk_x;T.extraData[X+".y"]=I.clk_y}}}var S=1;var P=2;function Q(ah){var ag=ah.contentWindow?ah.contentWindow.document:ah.contentDocument?ah.contentDocument:ah.document;return ag}var G=e("meta[name=csrf-token]").attr("content");var F=e("meta[name=csrf-param]").attr("content");if(F&&G){T.extraData=T.extraData||{};T.extraData[F]=G}function Y(){var ai=l.attr("target"),ag=l.attr("action");I.setAttribute("target",W);if(!f){I.setAttribute("method","POST")}if(ag!=T.url){I.setAttribute("action",T.url)}if(!T.skipEncodingOverride&&(!f||/post/i.test(f))){l.attr({encoding:"multipart/form-data",enctype:"multipart/form-data"})}if(T.timeout){R=setTimeout(function(){aa=true;V(S)},T.timeout)}function aj(){try{var al=Q(O).readyState;d("state = "+al);if(al&&al.toLowerCase()=="uninitialized"){setTimeout(aj,50)}}catch(am){d("Server abort: ",am," (",am.name,")");V(P);if(R){clearTimeout(R)}R=undefined}}var ah=[];try{if(T.extraData){for(var ak in T.extraData){if(T.extraData.hasOwnProperty(ak)){ah.push(e('<input type="hidden" name="'+ak+'">').attr("value",T.extraData[ak]).appendTo(I)[0])}}}if(!T.iframeTarget){K.appendTo("body");if(O.attachEvent){O.attachEvent("onload",V)}else{O.addEventListener("load",V,false)}}setTimeout(aj,15);I.submit()}finally{I.setAttribute("action",ag);if(ai){I.setAttribute("target",ai)}else{l.removeAttr("target")}e(ah).remove()}}if(T.forceSync){Y()}else{setTimeout(Y,10)}var ae,af,ac=50,J;function V(al){if(M.aborted||J){return}try{af=Q(O)}catch(ao){d("cannot access response document: ",ao);al=P}if(al===S&&M){M.abort("timeout");return}else{if(al==P&&M){M.abort("server abort");return}}if(!af||af.location.href==T.iframeSrc){if(!aa){return}}if(O.detachEvent){O.detachEvent("onload",V)}else{O.removeEventListener("load",V,false)}var aj="success",an;try{if(aa){throw"timeout"}var ai=T.dataType=="xml"||af.XMLDocument||e.isXMLDoc(af);d("isXml="+ai);if(!ai&&window.opera&&(af.body===null||!af.body.innerHTML)){if(--ac){d("requeing onLoad callback, DOM not available");setTimeout(V,250);return}}var ap=af.body?af.body:af.documentElement;M.responseText=ap?ap.innerHTML:null;M.responseXML=af.XMLDocument?af.XMLDocument:af;if(ai){T.dataType="xml"}M.getResponseHeader=function(at){var ar={"content-type":T.dataType};return ar[at]};if(ap){M.status=Number(ap.getAttribute("status"))||M.status;M.statusText=ap.getAttribute("statusText")||M.statusText}var ag=(T.dataType||"").toLowerCase();var am=/(json|script|text)/.test(ag);if(am||T.textarea){var ak=af.getElementsByTagName("textarea")[0];if(ak){M.responseText=ak.value;M.status=Number(ak.getAttribute("status"))||M.status;M.statusText=ak.getAttribute("statusText")||M.statusText}else{if(am){var ah=af.getElementsByTagName("pre")[0];var aq=af.getElementsByTagName("body")[0];if(ah){M.responseText=ah.textContent?ah.textContent:ah.innerText}else{if(aq){M.responseText=aq.textContent?aq.textContent:aq.innerText}}}}}else{if(ag=="xml"&&!M.responseXML&&M.responseText){M.responseXML=U(M.responseText)}}try{ae=k(M,ag,T)}catch(al){aj="parsererror";M.error=an=(al||aj)}}catch(al){d("error caught: ",al);aj="error";M.error=an=(al||aj)}if(M.aborted){d("upload aborted");aj=null}if(M.status){aj=(M.status>=200&&M.status<300||M.status===304)?"success":"error"}if(aj==="success"){if(T.success){T.success.call(T.context,ae,"success",M)}if(ab){e.event.trigger("ajaxSuccess",[M,T])}}else{if(aj){if(an===undefined){an=M.statusText}if(T.error){T.error.call(T.context,M,aj,an)}if(ab){e.event.trigger("ajaxError",[M,T,an])}}}if(ab){e.event.trigger("ajaxComplete",[M,T])}if(ab&&!--e.active){e.event.trigger("ajaxStop")}if(T.complete){T.complete.call(T.context,M,aj)}J=true;if(T.timeout){clearTimeout(R)}setTimeout(function(){if(!T.iframeTarget){K.remove()}M.responseXML=null},100)}var U=e.parseXML||function(ag,ah){if(window.ActiveXObject){ah=new ActiveXObject("Microsoft.XMLDOM");ah.async="false";ah.loadXML(ag)}else{ah=(new DOMParser()).parseFromString(ag,"text/xml")}return(ah&&ah.documentElement&&ah.documentElement.nodeName!="parsererror")?ah:null};var q=e.parseJSON||function(ag){return window["eval"]("("+ag+")")};var k=function(al,aj,ai){var ah=al.getResponseHeader("content-type")||"",ag=aj==="xml"||!aj&&ah.indexOf("xml")>=0,ak=ag?al.responseXML:al.responseText;if(ag&&ak.documentElement.nodeName==="parsererror"){if(e.error){e.error("parsererror")}}if(ai&&ai.dataFilter){ak=ai.dataFilter(ak,aj)}if(typeof ak==="string"){if(aj==="json"||!aj&&ah.indexOf("json")>=0){ak=q(ak)}else{if(aj==="script"||!aj&&ah.indexOf("javascript")>=0){e.globalEval(ak)}}}return ak}}};e.fn.ajaxForm=function(f){f=f||{};f.delegation=f.delegation&&e.isFunction(e.fn.on);if(!f.delegation&&this.length===0){var g={s:this.selector,c:this.context};if(!e.isReady&&g.s){d("DOM not ready, queuing ajaxForm");e(function(){e(g.s,g.c).ajaxForm(f)});return this}d("terminating; zero elements found by selector"+(e.isReady?"":" (DOM not ready)"));return this}if(f.delegation){e(document).off("submit.form-plugin",this.selector,b).off("click.form-plugin",this.selector,a).on("submit.form-plugin",this.selector,f,b).on("click.form-plugin",this.selector,f,a);return this}return this.ajaxFormUnbind().bind("submit.form-plugin",f,b).bind("click.form-plugin",f,a)};function b(g){var f=g.data;if(!g.isDefaultPrevented()){g.preventDefault();e(this).ajaxSubmit(f)}}function a(j){var i=j.target;var g=e(i);if(!(g.is(":submit,input:image"))){var f=g.closest(":submit");if(f.length===0){return}i=f[0]}var h=this;h.clk=i;if(i.type=="image"){if(j.offsetX!==undefined){h.clk_x=j.offsetX;h.clk_y=j.offsetY}else{if(typeof e.fn.offset=="function"){var k=g.offset();h.clk_x=j.pageX-k.left;h.clk_y=j.pageY-k.top}else{h.clk_x=j.pageX-i.offsetLeft;h.clk_y=j.pageY-i.offsetTop}}}setTimeout(function(){h.clk=h.clk_x=h.clk_y=null},100)}e.fn.ajaxFormUnbind=function(){return this.unbind("submit.form-plugin click.form-plugin")};e.fn.formToArray=function(w,f){var u=[];if(this.length===0){return u}var k=this[0];var o=w?k.getElementsByTagName("*"):k.elements;if(!o){return u}var q,p,m,z,l,s,h;for(q=0,s=o.length;q<s;q++){l=o[q];m=l.name;if(!m){continue}if(w&&k.clk&&l.type=="image"){if(!l.disabled&&k.clk==l){u.push({name:m,value:e(l).val(),type:l.type});u.push({name:m+".x",value:k.clk_x},{name:m+".y",value:k.clk_y})}continue}z=e.fieldValue(l,true);if(z&&z.constructor==Array){if(f){f.push(l)}for(p=0,h=z.length;p<h;p++){u.push({name:m,value:z[p]})}}else{if(c.fileapi&&l.type=="file"&&!l.disabled){if(f){f.push(l)}var g=l.files;if(g.length){for(p=0;p<g.length;p++){u.push({name:m,value:g[p],type:l.type})}}else{u.push({name:m,value:"",type:l.type})}}else{if(z!==null&&typeof z!="undefined"){if(f){f.push(l)}u.push({name:m,value:z,type:l.type,required:l.required})}}}}if(!w&&k.clk){var r=e(k.clk),t=r[0];m=t.name;if(m&&!t.disabled&&t.type=="image"){u.push({name:m,value:r.val()});u.push({name:m+".x",value:k.clk_x},{name:m+".y",value:k.clk_y})}}return u};e.fn.formSerialize=function(f){return e.param(this.formToArray(f))};e.fn.fieldSerialize=function(g){var f=[];this.each(function(){var l=this.name;if(!l){return}var j=e.fieldValue(this,g);if(j&&j.constructor==Array){for(var k=0,h=j.length;k<h;k++){f.push({name:l,value:j[k]})}}else{if(j!==null&&typeof j!="undefined"){f.push({name:this.name,value:j})}}});return e.param(f)};e.fn.fieldValue=function(l){for(var k=[],h=0,f=this.length;h<f;h++){var j=this[h];var g=e.fieldValue(j,l);if(g===null||typeof g=="undefined"||(g.constructor==Array&&!g.length)){continue}if(g.constructor==Array){e.merge(k,g)}else{k.push(g)}}return k};e.fieldValue=function(f,m){var h=f.name,s=f.type,u=f.tagName.toLowerCase();if(m===undefined){m=true}if(m&&(!h||f.disabled||s=="reset"||s=="button"||(s=="checkbox"||s=="radio")&&!f.checked||(s=="submit"||s=="image")&&f.form&&f.form.clk!=f||u=="select"&&f.selectedIndex==-1)){return null}if(u=="select"){var o=f.selectedIndex;if(o<0){return null}var q=[],g=f.options;var k=(s=="select-one");var p=(k?o+1:g.length);for(var j=(k?o:0);j<p;j++){var l=g[j];if(l.selected){var r=l.value;if(!r){r=(l.attributes&&l.attributes.value&&!(l.attributes.value.specified))?l.text:l.value}if(k){return r}q.push(r)}}return q}return e(f).val()};e.fn.clearForm=function(f){return this.each(function(){e("input,select,textarea",this).clearFields(f)})};e.fn.clearFields=e.fn.clearInputs=function(f){var g=/^(?:color|date|datetime|email|month|number|password|range|search|tel|text|time|url|week)$/i;return this.each(function(){var i=this.type,h=this.tagName.toLowerCase();if(g.test(i)||h=="textarea"){this.value=""}else{if(i=="checkbox"||i=="radio"){this.checked=false}else{if(h=="select"){this.selectedIndex=-1}else{if(f){if((f===true&&/hidden/.test(i))||(typeof f=="string"&&e(this).is(f))){this.value=""}}}}}})};e.fn.resetForm=function(){return this.each(function(){if(typeof this.reset=="function"||(typeof this.reset=="object"&&!this.reset.nodeType)){this.reset()}})};e.fn.enable=function(f){if(f===undefined){f=true}return this.each(function(){this.disabled=!f})};e.fn.selected=function(f){if(f===undefined){f=true}return this.each(function(){var g=this.type;if(g=="checkbox"||g=="radio"){this.checked=f}else{if(this.tagName.toLowerCase()=="option"){var h=e(this).parent("select");if(f&&h[0]&&h[0].type=="select-one"){h.find("option").selected(false)}this.selected=f}}})};e.fn.ajaxSubmit.debug=false;function d(){if(!e.fn.ajaxSubmit.debug){return}var f="[jquery.form] "+Array.prototype.join.call(arguments,"");if(window.console&&window.console.log){window.console.log(f)}else{if(window.opera&&window.opera.postError){window.opera.postError(f)}}}})(jQuery);(function(d){d.each(["backgroundColor","borderBottomColor","borderLeftColor","borderRightColor","borderTopColor","color","outlineColor"],function(f,e){d.fx.step[e]=function(g){if(g.state==0){g.start=c(g.elem,e);g.end=b(g.end)}g.elem.style[e]="rgb("+[Math.max(Math.min(parseInt((g.pos*(g.end[0]-g.start[0]))+g.start[0]),255),0),Math.max(Math.min(parseInt((g.pos*(g.end[1]-g.start[1]))+g.start[1]),255),0),Math.max(Math.min(parseInt((g.pos*(g.end[2]-g.start[2]))+g.start[2]),255),0)].join(",")+")"}});function b(f){var e;if(f&&f.constructor==Array&&f.length==3){return f}if(e=/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/.exec(f)){return[parseInt(e[1]),parseInt(e[2]),parseInt(e[3])]}if(e=/rgb\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*\)/.exec(f)){return[parseFloat(e[1])*2.55,parseFloat(e[2])*2.55,parseFloat(e[3])*2.55]}if(e=/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/.exec(f)){return[parseInt(e[1],16),parseInt(e[2],16),parseInt(e[3],16)]}if(e=/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/.exec(f)){return[parseInt(e[1]+e[1],16),parseInt(e[2]+e[2],16),parseInt(e[3]+e[3],16)]}return a[d.trim(f).toLowerCase()]}function c(g,e){var f;do{f=d.curCSS(g,e);if(f!=""&&f!="transparent"||d.nodeName(g,"body")){break}e="backgroundColor"}while(g=g.parentNode);return b(f)}var a={aqua:[0,255,255],azure:[240,255,255],beige:[245,245,220],black:[0,0,0],blue:[0,0,255],brown:[165,42,42],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgrey:[169,169,169],darkgreen:[0,100,0],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkviolet:[148,0,211],fuchsia:[255,0,255],gold:[255,215,0],green:[0,128,0],indigo:[75,0,130],khaki:[240,230,140],lightblue:[173,216,230],lightcyan:[224,255,255],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightyellow:[255,255,224],lime:[0,255,0],magenta:[255,0,255],maroon:[128,0,0],navy:[0,0,128],olive:[128,128,0],orange:[255,165,0],pink:[255,192,203],purple:[128,0,128],violet:[128,0,128],red:[255,0,0],silver:[192,192,192],white:[255,255,255],yellow:[255,255,0]}})(jQuery);(function(a){a.Jcrop=function(e,E){var L=a.extend({},a.Jcrop.defaults),ah,av,aj=false;function n(aw){return aw+"px"}function G(aw){return L.baseClass+"-"+aw}function H(){return a.fx.step.hasOwnProperty("backgroundColor")}function I(aw){var ax=a(aw).offset();return[ax.left,ax.top]}function J(aw){return[(aw.pageX-ah[0]),(aw.pageY-ah[1])]}function D(aw){if(typeof(aw)!=="object"){aw={}}L=a.extend(L,aw);a.each(["onChange","onSelect","onRelease","onDblClick"],function(ax,ay){if(typeof(L[ay])!=="function"){L[ay]=function(){}}})}function g(ay,aA){ah=I(at);S.setCursor(ay==="move"?ay:ay+"-resize");if(ay==="move"){return S.activateHandlers(U(aA),r)}var aw=ad.getFixed();var ax=t(ay);var az=ad.getCorner(t(ax));ad.setPressed(ad.getCorner(ax));ad.setCurrent(az);S.activateHandlers(K(ay,aw),r)}function K(ax,aw){return function(ay){if(!L.aspectRatio){switch(ax){case"e":ay[1]=aw.y2;break;case"w":ay[1]=aw.y2;break;case"n":ay[0]=aw.x2;break;case"s":ay[0]=aw.x2;break}}else{switch(ax){case"e":ay[1]=aw.y+1;break;case"w":ay[1]=aw.y+1;break;case"n":ay[0]=aw.x+1;break;case"s":ay[0]=aw.x+1;break}}ad.setCurrent(ay);Z.update()}}function U(ax){var aw=ax;ar.watchKeys();return function(ay){ad.moveOffset([ay[0]-aw[0],ay[1]-aw[1]]);aw=ay;Z.update()}}function t(aw){switch(aw){case"n":return"sw";case"s":return"nw";case"e":return"nw";case"w":return"ne";case"ne":return"sw";case"nw":return"se";case"se":return"nw";case"sw":return"ne"}}function c(aw){return function(ax){if(L.disabled){return false}if((aw==="move")&&!L.allowMove){return false}ah=I(at);s=true;g(aw,J(ax));ax.stopPropagation();ax.preventDefault();return false}}function X(aA,ax,az){var aw=aA.width(),ay=aA.height();if((aw>ax)&&ax>0){aw=ax;ay=(ax/aA.width())*aA.height()}if((ay>az)&&az>0){ay=az;aw=(az/aA.height())*aA.width()}P=aA.width()/aw;f=aA.height()/ay;aA.width(aw).height(ay)}function ab(aw){return{x:aw.x*P,y:aw.y*f,x2:aw.x2*P,y2:aw.y2*f,w:aw.w*P,h:aw.h*f}}function r(ax){var aw=ad.getFixed();if((aw.w>L.minSelect[0])&&(aw.h>L.minSelect[1])){Z.enableHandles();Z.done()}else{Z.release()}S.setCursor(L.allowSelect?"crosshair":"default")}function ag(aw){if(L.disabled){return false}if(!L.allowSelect){return false}s=true;ah=I(at);Z.disableHandles();S.setCursor("crosshair");var ax=J(aw);ad.setPressed(ax);Z.update();S.activateHandlers(aq,r);ar.watchKeys();aw.stopPropagation();aw.preventDefault();return false}function aq(aw){ad.setCurrent(aw);Z.update()}function ai(){var aw=a("<div></div>").addClass(G("tracker"));if(a.browser.msie){aw.css({opacity:0,backgroundColor:"white"})}return aw}if(a.browser.msie&&(a.browser.version.split(".")[0]==="6")){aj=true}if(typeof(e)!=="object"){e=a(e)[0]}if(typeof(E)!=="object"){E={}}D(E);var j={border:"none",visibility:"visible",margin:0,padding:0,position:"absolute",top:0,left:0};var aa=a(e),al=true;if(e.tagName=="IMG"){if(aa[0].width!=0&&aa[0].height!=0){aa.width(aa[0].width);aa.height(aa[0].height)}else{var w=new Image();w.src=aa[0].src;aa.width(w.width);aa.height(w.height)}var at=aa.clone().removeAttr("id").css(j).show();at.width(aa.width());at.height(aa.height());aa.after(at).hide()}else{at=aa.css(j).show();al=false;if(L.shade===null){L.shade=true}}X(at,L.boxWidth,L.boxHeight);var T=at.width(),R=at.height(),ac=a("<div />").width(T).height(R).addClass(G("holder")).css({position:"relative",backgroundColor:L.bgColor}).insertAfter(aa).append(at);if(L.addClass){ac.addClass(L.addClass)}var M=a("<div />"),m=a("<div />").width("100%").height("100%").css({zIndex:310,position:"absolute",overflow:"hidden"}),O=a("<div />").width("100%").height("100%").css("zIndex",320),C=a("<div />").css({position:"absolute",zIndex:600}).dblclick(function(){var aw=ad.getFixed();L.onDblClick.call(i,aw)}).insertBefore(at).append(m,O);if(al){M=a("<img />").attr("src",at.attr("src")).css(j).width(T).height(R),m.append(M)}if(aj){C.css({overflowY:"hidden"})}var v=L.boundary;var b=ai().width(T+(v*2)).height(R+(v*2)).css({position:"absolute",top:n(-v),left:n(-v),zIndex:290}).mousedown(ag);var ap=L.bgColor,ae=L.bgOpacity,B,an,q,W,P,f,p=true,s,F,af;ah=I(at);var V=(function(){function aw(){var aD={},aB=["touchstart","touchmove","touchend"],aC=document.createElement("div"),aA;try{for(aA=0;aA<aB.length;aA++){var ay=aB[aA];ay="on"+ay;var az=(ay in aC);if(!az){aC.setAttribute(ay,"return;");az=typeof aC[ay]=="function"}aD[aB[aA]]=az}return aD.touchstart&&aD.touchend&&aD.touchmove}catch(aE){return false}}function ax(){if((L.touchSupport===true)||(L.touchSupport===false)){return L.touchSupport}else{return aw()}}return{createDragger:function(ay){return function(az){az.pageX=az.originalEvent.changedTouches[0].pageX;az.pageY=az.originalEvent.changedTouches[0].pageY;if(L.disabled){return false}if((ay==="move")&&!L.allowMove){return false}s=true;g(ay,J(az));az.stopPropagation();az.preventDefault();return false}},newSelection:function(ay){ay.pageX=ay.originalEvent.changedTouches[0].pageX;ay.pageY=ay.originalEvent.changedTouches[0].pageY;return ag(ay)},isSupported:aw,support:ax()}}());var ad=(function(){var ay=0,aJ=0,ax=0,aI=0,aB,az;function aD(aM){aM=aA(aM);ax=ay=aM[0];aI=aJ=aM[1]}function aC(aM){aM=aA(aM);aB=aM[0]-ax;az=aM[1]-aI;ax=aM[0];aI=aM[1]}function aL(){return[aB,az]}function aw(aO){var aN=aO[0],aM=aO[1];if(0>ay+aN){aN-=aN+ay}if(0>aJ+aM){aM-=aM+aJ}if(R<aI+aM){aM+=R-(aI+aM)}if(T<ax+aN){aN+=T-(ax+aN)}ay+=aN;ax+=aN;aJ+=aM;aI+=aM}function aE(aM){var aN=aK();switch(aM){case"ne":return[aN.x2,aN.y];case"nw":return[aN.x,aN.y];case"se":return[aN.x2,aN.y2];case"sw":return[aN.x,aN.y2]}}function aK(){if(!L.aspectRatio){return aH()}var aO=L.aspectRatio,aV=L.minSize[0]/P,aN=L.maxSize[0]/P,aY=L.maxSize[1]/f,aP=ax-ay,aX=aI-aJ,aQ=Math.abs(aP),aR=Math.abs(aX),aT=aQ/aR,aM,aU,aW,aS;if(aN===0){aN=T*10}if(aY===0){aY=R*10}if(aT<aO){aU=aI;aW=aR*aO;aM=aP<0?ay-aW:aW+ay;if(aM<0){aM=0;aS=Math.abs((aM-ay)/aO);aU=aX<0?aJ-aS:aS+aJ}else{if(aM>T){aM=T;aS=Math.abs((aM-ay)/aO);aU=aX<0?aJ-aS:aS+aJ}}}else{aM=ax;aS=aQ/aO;aU=aX<0?aJ-aS:aJ+aS;if(aU<0){aU=0;aW=Math.abs((aU-aJ)*aO);aM=aP<0?ay-aW:aW+ay}else{if(aU>R){aU=R;aW=Math.abs(aU-aJ)*aO;aM=aP<0?ay-aW:aW+ay}}}if(aM>ay){if(aM-ay<aV){aM=ay+aV}else{if(aM-ay>aN){aM=ay+aN}}if(aU>aJ){aU=aJ+(aM-ay)/aO}else{aU=aJ-(aM-ay)/aO}}else{if(aM<ay){if(ay-aM<aV){aM=ay-aV}else{if(ay-aM>aN){aM=ay-aN}}if(aU>aJ){aU=aJ+(ay-aM)/aO}else{aU=aJ-(ay-aM)/aO}}}if(aM<0){ay-=aM;aM=0}else{if(aM>T){ay-=aM-T;aM=T}}if(aU<0){aJ-=aU;aU=0}else{if(aU>R){aJ-=aU-R;aU=R}}return aG(aF(ay,aJ,aM,aU))}function aA(aM){if(aM[0]<0){aM[0]=0}if(aM[1]<0){aM[1]=0}if(aM[0]>T){aM[0]=T}if(aM[1]>R){aM[1]=R}return[aM[0],aM[1]]}function aF(aP,aR,aO,aQ){var aT=aP,aS=aO,aN=aR,aM=aQ;if(aO<aP){aT=aO;aS=aP}if(aQ<aR){aN=aQ;aM=aR}return[aT,aN,aS,aM]}function aH(){var aN=ax-ay,aM=aI-aJ,aO;if(B&&(Math.abs(aN)>B)){ax=(aN>0)?(ay+B):(ay-B)}if(an&&(Math.abs(aM)>an)){aI=(aM>0)?(aJ+an):(aJ-an)}if(W/f&&(Math.abs(aM)<W/f)){aI=(aM>0)?(aJ+W/f):(aJ-W/f)}if(q/P&&(Math.abs(aN)<q/P)){ax=(aN>0)?(ay+q/P):(ay-q/P)}if(ay<0){ax-=ay;ay-=ay}if(aJ<0){aI-=aJ;aJ-=aJ}if(ax<0){ay-=ax;ax-=ax}if(aI<0){aJ-=aI;aI-=aI}if(ax>T){aO=ax-T;ay-=aO;ax-=aO}if(aI>R){aO=aI-R;aJ-=aO;aI-=aO}if(ay>T){aO=ay-R;aI-=aO;aJ-=aO}if(aJ>R){aO=aJ-R;aI-=aO;aJ-=aO}return aG(aF(ay,aJ,ax,aI))}function aG(aM){return{x:aM[0],y:aM[1],x2:aM[2],y2:aM[3],w:aM[2]-aM[0],h:aM[3]-aM[1]}}return{flipCoords:aF,setPressed:aD,setCurrent:aC,getOffset:aL,moveOffset:aw,getCorner:aE,getFixed:aK}}());var d=(function(){var aB=false,aG=a("<div />").css({position:"absolute",zIndex:240,opacity:0}),aA={top:aC(),left:aC().height(R),right:aC().height(R),bottom:aC()};function aI(aJ,aK){aA.left.css({height:n(aK)});aA.right.css({height:n(aK)})}function ay(){return aD(ad.getFixed())}function aD(aJ){aA.top.css({left:n(aJ.x),width:n(aJ.w),height:n(aJ.y)});aA.bottom.css({top:n(aJ.y2),left:n(aJ.x),width:n(aJ.w),height:n(R-aJ.y2)});aA.right.css({left:n(aJ.x2),width:n(T-aJ.x2)});aA.left.css({width:n(aJ.x)})}function aC(){return a("<div />").css({position:"absolute",backgroundColor:L.shadeColor||L.bgColor}).appendTo(aG)}function az(){if(!aB){aB=true;aG.insertBefore(at);ay();Z.setBgOpacity(1,0,1);M.hide();aF(L.shadeColor||L.bgColor,1);if(Z.isAwake()){ax(L.bgOpacity,1)}else{ax(1,1)}}}function aF(aJ,aK){h(aw(),aJ,aK)}function aH(){if(aB){aG.remove();M.show();aB=false;if(Z.isAwake()){Z.setBgOpacity(L.bgOpacity,1,1)}else{Z.setBgOpacity(1,1,1);Z.disableHandles()}h(ac,0,1)}}function ax(aK,aJ){if(aB){if(L.bgFade&&!aJ){aG.animate({opacity:1-aK},{queue:false,duration:L.fadeTime})}else{aG.css({opacity:1-aK})}}}function aE(){L.shade?az():aH();if(Z.isAwake()){ax(L.bgOpacity)}}function aw(){return aG.children()}return{update:ay,updateRaw:aD,getShades:aw,setBgColor:aF,enable:az,disable:aH,resize:aI,refresh:aE,opacity:ax}}());var Z=(function(){var aH,aQ=370,aD={},aT={},ay={},aA=false;function aE(aX){var aY=a("<div />").css({position:"absolute",opacity:L.borderOpacity}).addClass(G(aX));m.append(aY);return aY}function az(aX,aY){var aZ=a("<div />").mousedown(c(aX)).css({cursor:aX+"-resize",position:"absolute",zIndex:aY}).addClass("ord-"+aX);if(V.support){aZ.bind("touchstart.jcrop",V.createDragger(aX))}O.append(aZ);return aZ}function aI(aX){var aY=L.handleSize;return az(aX,aQ++).css({opacity:L.handleOpacity}).width(aY).height(aY).addClass(G("handle"))}function aO(aX){return az(aX,aQ++).addClass("jcrop-dragbar")}function aL(aX){var aY;for(aY=0;aY<aX.length;aY++){ay[aX[aY]]=aO(aX[aY])}}function aP(aX){var aY,aZ;for(aZ=0;aZ<aX.length;aZ++){switch(aX[aZ]){case"n":aY="hline";break;case"s":aY="hline bottom";break;case"e":aY="vline right";break;case"w":aY="vline";break}aD[aX[aZ]]=aE(aY)}}function aK(aX){var aY;for(aY=0;aY<aX.length;aY++){aT[aX[aY]]=aI(aX[aY])}}function aG(aX,aY){if(!L.shade){M.css({top:n(-aY),left:n(-aX)})}C.css({top:n(aY),left:n(aX)})}function aW(aX,aY){C.width(aX).height(aY)}function aB(){var aX=ad.getFixed();ad.setPressed([aX.x,aX.y]);ad.setCurrent([aX.x2,aX.y2]);aU()}function aU(aX){if(aH){return aF(aX)}}function aF(aX){var aY=ad.getFixed();aW(aY.w,aY.h);aG(aY.x,aY.y);if(L.shade){d.updateRaw(aY)}aH||aV();if(aX){L.onSelect.call(i,ab(aY))}else{L.onChange.call(i,ab(aY))}}function ax(aY,aZ,aX){if(!aH&&!aZ){return}if(L.bgFade&&!aX){at.animate({opacity:aY},{queue:false,duration:L.fadeTime})}else{at.css("opacity",aY)}}function aV(){C.show();if(L.shade){d.opacity(ae)}else{ax(ae,true)}aH=true}function aR(){aS();C.hide();if(L.shade){d.opacity(1)}else{ax(1)}aH=false;L.onRelease.call(i)}function aw(){if(aA){O.show()}}function aM(){aA=true;if(L.allowResize){O.show();return true}}function aS(){aA=false;O.hide()}function aN(aX){if(F===aX){aS()}else{aM()}}function aJ(){aN(false);aB()}if(L.dragEdges&&a.isArray(L.createDragbars)){aL(L.createDragbars)}if(a.isArray(L.createHandles)){aK(L.createHandles)}if(L.drawBorders&&a.isArray(L.createBorders)){aP(L.createBorders)}a(document).bind("touchstart.jcrop-ios",function(aX){if(a(aX.currentTarget).hasClass("jcrop-tracker")){aX.stopPropagation()}});var aC=ai().mousedown(c("move")).css({cursor:"move",position:"absolute",zIndex:360});if(V.support){aC.bind("touchstart.jcrop",V.createDragger("move"))}m.append(aC);aS();return{updateVisible:aU,update:aF,release:aR,refresh:aB,isAwake:function(){return aH},setCursor:function(aX){aC.css("cursor",aX)},enableHandles:aM,enableOnly:function(){aA=true},showHandles:aw,disableHandles:aS,animMode:aN,setBgOpacity:ax,done:aJ}}());var S=(function(){var ax=function(){},az=function(){},ay=L.trackDocument;function aG(){b.css({zIndex:450});if(V.support){a(document).bind("touchmove.jcrop",aF).bind("touchend.jcrop",aC)}if(ay){a(document).bind("mousemove.jcrop",aw).bind("mouseup.jcrop",aA)}}function aE(){b.css({zIndex:290});a(document).unbind(".jcrop")}function aw(aH){ax(J(aH));return false}function aA(aH){aH.preventDefault();aH.stopPropagation();if(s){s=false;az(J(aH));if(Z.isAwake()){L.onSelect.call(i,ab(ad.getFixed()))}aE();ax=function(){};az=function(){}}return false}function aB(aI,aH){s=true;ax=aI;az=aH;aG();return false}function aF(aH){aH.pageX=aH.originalEvent.changedTouches[0].pageX;aH.pageY=aH.originalEvent.changedTouches[0].pageY;return aw(aH)}function aC(aH){aH.pageX=aH.originalEvent.changedTouches[0].pageX;aH.pageY=aH.originalEvent.changedTouches[0].pageY;return aA(aH)}function aD(aH){b.css("cursor",aH)}if(!ay){b.mousemove(aw).mouseup(aA).mouseout(aA)}at.before(b);return{activateHandlers:aB,setCursor:aD}}());var ar=(function(){var az=a('<input type="radio" />').css({position:"fixed",left:"-120px",width:"12px"}),aB=a("<div />").css({position:"absolute",overflow:"hidden"}).append(az);function ax(){if(L.keySupport){az.show();az.focus()}}function aA(aC){az.hide()}function ay(aD,aC,aE){if(L.allowMove){ad.moveOffset([aC,aE]);Z.updateVisible(true)}aD.preventDefault();aD.stopPropagation()}function aw(aD){if(aD.ctrlKey||aD.metaKey){return true}af=aD.shiftKey?true:false;var aC=af?10:1;switch(aD.keyCode){case 37:ay(aD,-aC,0);break;case 39:ay(aD,aC,0);break;case 38:ay(aD,0,-aC);break;case 40:ay(aD,0,aC);break;case 27:if(L.allowSelect){Z.release()}break;case 9:return true}return false}if(L.keySupport){az.keydown(aw).blur(aA);if(aj||!L.fixedSupport){az.css({position:"absolute",left:"-20px"});aB.append(az).insertBefore(at)}else{az.insertBefore(at)}}return{watchKeys:ax}}());function l(aw){ac.removeClass().addClass(G("holder")).addClass(aw)}function u(aP,aD){var aJ=aP[0]/P,ay=aP[1]/f,aI=aP[2]/P,ax=aP[3]/f;if(F){return}var aH=ad.flipCoords(aJ,ay,aI,ax),aN=ad.getFixed(),aK=[aN.x,aN.y,aN.x2,aN.y2],aA=aK,az=L.animationDelay,aM=aH[0]-aK[0],aC=aH[1]-aK[1],aL=aH[2]-aK[2],aB=aH[3]-aK[3],aG=0,aE=L.swingSpeed;x=aA[0];y=aA[1];aI=aA[2];ax=aA[3];Z.animMode(true);var aw;function aF(){window.setTimeout(aO,az)}var aO=(function(){return function(){aG+=(100-aG)/aE;aA[0]=x+((aG/100)*aM);aA[1]=y+((aG/100)*aC);aA[2]=aI+((aG/100)*aL);aA[3]=ax+((aG/100)*aB);if(aG>=99.8){aG=100}if(aG<100){ao(aA);aF()}else{Z.done();if(typeof(aD)==="function"){aD.call(i)}}}}());aF()}function N(aw){ao([aw[0]/P,aw[1]/f,aw[2]/P,aw[3]/f]);L.onSelect.call(i,ab(ad.getFixed()));Z.enableHandles()}function ao(aw){ad.setPressed([aw[0],aw[1]]);ad.setCurrent([aw[2],aw[3]]);Z.update()}function k(){return ab(ad.getFixed())}function am(){return ad.getFixed()}function z(aw){D(aw);Q()}function A(){L.disabled=true;Z.disableHandles();Z.setCursor("default");S.setCursor("default")}function Y(){L.disabled=false;Q()}function o(){Z.done();S.activateHandlers(null,null)}function ak(){ac.remove();aa.show();a(e).removeData("Jcrop")}function au(ax,ay){Z.release();A();var aw=new Image();aw.onload=function(){var az=aw.width;var aB=aw.height;var aC=L.boxWidth;var aA=L.boxHeight;at.width(az).height(aB);at.attr("src",ax);M.attr("src",ax);X(at,aC,aA);T=at.width();R=at.height();M.width(T).height(R);b.width(T+(v*2)).height(R+(v*2));ac.width(T).height(R);d.resize(T,R);Y();if(typeof(ay)==="function"){ay.call(i)}};aw.src=ax}function h(az,aw,ax){var ay=aw||L.bgColor;if(L.bgFade&&H()&&L.fadeTime&&!ax){az.animate({backgroundColor:ay},{queue:false,duration:L.fadeTime})}else{az.css("backgroundColor",ay)}}function Q(aw){if(L.allowResize){if(aw){Z.enableOnly()}else{Z.enableHandles()}}else{Z.disableHandles()}S.setCursor(L.allowSelect?"crosshair":"default");Z.setCursor(L.allowMove?"move":"default");if(L.hasOwnProperty("trueSize")){P=L.trueSize[0]/T;f=L.trueSize[1]/R}if(L.hasOwnProperty("setSelect")){N(L.setSelect);Z.done();delete (L.setSelect)}d.refresh();if(L.bgColor!=ap){h(L.shade?d.getShades():ac,L.shade?(L.shadeColor||L.bgColor):L.bgColor);ap=L.bgColor}if(ae!=L.bgOpacity){ae=L.bgOpacity;if(L.shade){d.refresh()}else{Z.setBgOpacity(ae)}}B=L.maxSize[0]||0;an=L.maxSize[1]||0;q=L.minSize[0]||0;W=L.minSize[1]||0;if(L.hasOwnProperty("outerImage")){at.attr("src",L.outerImage);delete (L.outerImage)}Z.refresh()}if(V.support){b.bind("touchstart.jcrop",V.newSelection)}O.hide();Q(true);var i={setImage:au,animateTo:u,setSelect:N,setOptions:z,tellSelect:k,tellScaled:am,setClass:l,disable:A,enable:Y,cancel:o,release:Z.release,destroy:ak,focus:ar.watchKeys,getBounds:function(){return[T*P,R*f]},getWidgetSize:function(){return[T,R]},getScaleFactor:function(){return[P,f]},getOptions:function(){return L},ui:{holder:ac,selection:C}};if(a.browser.msie){ac.bind("selectstart",function(){return false})}aa.data("Jcrop",i);return i};a.fn.Jcrop=function(b,d){var c;this.each(function(){if(a(this).data("Jcrop")){if(b==="api"){return a(this).data("Jcrop")}else{a(this).data("Jcrop").setOptions(b)}}else{if(this.tagName=="IMG"){a.Jcrop.Loader(this,function(){a(this).css({display:"block",visibility:"hidden"});c=a.Jcrop(this,b);if(a.isFunction(d)){d.call(c)}})}else{a(this).css({display:"block",visibility:"hidden"});c=a.Jcrop(this,b);if(a.isFunction(d)){d.call(c)}}}});return this};a.Jcrop.Loader=function(f,g,c){var d=a(f),b=d[0];function e(){if(b.complete){d.unbind(".jcloader");if(a.isFunction(g)){g.call(b)}}else{window.setTimeout(e,50)}}d.bind("load.jcloader",e).bind("error.jcloader",function(h){d.unbind(".jcloader");if(a.isFunction(c)){c.call(b)}});if(b.complete&&a.isFunction(g)){d.unbind(".jcloader");g.call(b)}};a.Jcrop.defaults={allowSelect:true,allowMove:true,allowResize:true,trackDocument:true,baseClass:"jcrop",addClass:null,bgColor:"black",bgOpacity:0.6,bgFade:false,borderOpacity:0.4,handleOpacity:0.5,handleSize:7,aspectRatio:0,keySupport:true,createHandles:["n","s","e","w","nw","ne","se","sw"],createDragbars:["n","s","e","w"],createBorders:["n","s","e","w"],drawBorders:true,dragEdges:true,fixedSupport:true,touchSupport:null,shade:null,boxWidth:0,boxHeight:0,boundary:2,fadeTime:400,animationDelay:20,swingSpeed:3,minSelect:[0,0],maxSize:[0,0],minSize:[0,0],onChange:function(){},onSelect:function(){},onDblClick:function(){},onRelease:function(){}}}(jQuery));(function(){var g,c,b,a,f,d,e;b=function(){var i,h;h='input[data-role="datepicker"]';i={format:"yyyy/mm/dd",weekStart:0,startDate:-Infinity,endDate:Infinity,autoclose:true,startView:"month",language:"en"};$(h).each(function(){var m,l,k,j;k=$(this);l=k.data();for(j in i){m="date"+j.charAt(0).toUpperCase()+j.slice(1);i[j]=l[m]||i[j]}return k.datepicker(i)});return $('input[data-role="timepicker"]').timepicker()};f=function(){return $("div.status").each(function(){var i,h;h=$(this).data("type");i=false;if(h==="error"||h==="warning"){i=true}return $(this).find("ul li").each(function(){return $.jnotify($(this).text(),h,i)})})};e=function(){return $('textarea[data-role="editor"]').editor().parent().wrap($('<div class="well"/>'))};d=function(){return $('input[data-role="tagcomplete"]').tagcomplete()};a=function(){return $("a[data-prompt]").not('[data-prompt="off"]').click(function(k){var j,i,l,h;k.preventDefault();h=$(this).attr("href");l=$(this).attr("title");j=$('<div class="modal"/>');i="";i+='<div class="modal-header"><button class="close" data-dismiss="modal">×</button><h3>Are you sure?</h3></div><div class="modal-body"><p>'+l+'</p></div><div class="modal-footer"><a href="#" class="btn" data-dismiss="modal">Cancel</a><a href="'+h+'" class="btn btn-primary">Yes</a></div>';return j.html(i).modal()})};c=function(){if($("img.crop").length){return $("img.crop").each(function(){var h,i;i=$(this).data("ratio");h=$('input[name="'+$(this).data("name")+'"]');return $(this).Jcrop({aspectRatio:i,onSelect:function(j){return h.val(JSON.stringify(j))}})})}};$(document).ready(function(){b();f();e();d();a();c();return $('[rel="tooltip"]').tooltip()});jQuery.fn.dataTableExt.oSort["featured-asc"]=function(h,i){if($(h).find("i").hasClass("icon-star-empty")&&$(i).find("i").hasClass("icon-star")){return -1}else{if($(h).find("i").hasClass("icon-star")&&$(i).find("i").hasClass("icon-star-empty")){return 1}else{return 0}}};jQuery.fn.dataTableExt.oSort["featured-desc"]=function(h,i){if($(h).find("i").hasClass("icon-star-empty")&&$(i).find("i").hasClass("icon-star")){return 1}else{if($(h).find("i").hasClass("icon-star")&&$(i).find("i").hasClass("icon-star-empty")){return -1}else{return 0}}};$.extend($.fn.dataTableExt.oStdClasses,{sSortAsc:"header headerSortDown",sSortDesc:"header headerSortUp",sSortable:"header"});g=[];$("table thead th").each(function(h){if($(this).data("dtsort")){return g.push({sType:$(this).data("dtsort"),aTargets:[h]})}});g.push({bSortable:false,aTargets:[parseInt($("table thead th").length-1,10)]});$("section[id^=admin-][id$=-index] table").dataTable({sDom:"<'row'<'pull-right'l><'span8'f>r>t<'row'<'span8'i><'pagination-right'p>>",sPaginationType:"bootstrap",aoColumnDefs:g})}).call(this);